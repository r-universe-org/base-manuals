<!DOCTYPE html>
<html>
  <head>
    <title>Package 'tools' reference manual</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <!-- styling for math and syntax -->
    <link rel="stylesheet" type="text/css" href="https://r-universe.dev/static/katex.min.css">
    <link rel="stylesheet" type="text/css" href="https://r-universe.dev/static/R.css">
    <link rel="stylesheet" type="text/css" href="https://r-universe.dev/static/prism.css">

    <!-- for (future) customizations -->
    <script src="https://r-universe.dev/static/manual.js"></script>
    <link rel="stylesheet" type="text/css" href="https://r-universe.dev/static/manual.css?nocache=1">

  </head>

  <body class="macintosh">
    <h1 class="manual-title">Package 'tools'</h1>
    <table class="description-table">
      <tr>
<th>Title:</th>
<td class="description-title">Tools for Package Development</td>
</tr>
      <tr>
<th>Description:</th>
<td class="description-description">Tools for package development, administration and documentation.</td>
</tr>
      <tr>
<th>Authors:</th>
<td class="description-author">R Core Team</td>
</tr>
      <tr>
<th>Maintainer:</th>
<td class="description-maintainer">R Core Team &lt;do-use-Contact-address@r-project.org&gt;</td>
</tr>
      <tr>
<th>License:</th>
<td class="description-license">Part of R 4.2.2</td>
</tr>
      <tr>
<th>Version:</th>
<td class="description-version">4.2.2</td>
</tr>
      <tr>
<th>Built:</th>
<td class="description-date">2022-10-31 22:31:50 UTC</td>
</tr>
      <tr>
<th>Source:</th>
<td class="description-source">base</td>
</tr>
    </table>

    <a href="#help-index" style="color:black;"><h2 id="help-index">Help Index</h2></a>
    <ul id="help-index-list">
<li class="help-index-item"><a href="#print.via.format">Printing Utilities</a></li>
<li class="help-index-item"><a href="#add_datalist">
Add a ‘datalist’ File to a Source Package
</a></li>
<li class="help-index-item"><a href="#assertCondition">Asserting Error Conditions</a></li>
<li class="help-index-item"><a href="#bibstyle">Select or Define a Bibliography Style</a></li>
<li class="help-index-item"><a href="#buildVignette">Build One Vignette</a></li>
<li class="help-index-item"><a href="#buildVignettes">List and Build Package Vignettes</a></li>
<li class="help-index-item"><a href="#charsets">Conversion Tables between Character Sets</a></li>
<li class="help-index-item"><a href="#check_packages_in_dir">Check Source Packages and Their Reverse Dependencies</a></li>
<li class="help-index-item"><a href="#checkFF">Check Foreign Function Calls</a></li>
<li class="help-index-item"><a href="#checkMD5sums">Check and Create MD5 Checksum Files</a></li>
<li class="help-index-item"><a href="#checkPoFiles">Check Translation Files for Inconsistent Format Strings</a></li>
<li class="help-index-item"><a href="#checkRd"> Check an Rd Object </a></li>
<li class="help-index-item"><a href="#checkRdaFiles">
Report on Details of Saved Images or Re-saves them
</a></li>
<li class="help-index-item"><a href="#checkTnF">Check R Packages or Code for T/F</a></li>
<li class="help-index-item"><a href="#checkVignettes">Check Package Vignettes</a></li>
<li class="help-index-item"><a href="#codoc">Check Code/Documentation Consistency</a></li>
<li class="help-index-item"><a href="#compactPDF">
Compact PDF Files
</a></li>
<li class="help-index-item"><a href="#CRANtools">CRAN Package Repository Tools</a></li>
<li class="help-index-item"><a href="#delimMatch">Delimited Pattern Matching</a></li>
<li class="help-index-item"><a href="#dependsOnPkgs">Find Reverse Dependencies</a></li>
<li class="help-index-item"><a href="#encoded">Translate non-ASCII Text to LaTeX Escapes</a></li>
<li class="help-index-item"><a href="#fileutils">File Utilities</a></li>
<li class="help-index-item"><a href="#find_gs_cmd">
Find a GhostScript Executable
</a></li>
<li class="help-index-item"><a href="#getVignetteInfo">Get Information on Installed Vignettes</a></li>
<li class="help-index-item"><a href="#HTMLheader">Generate a Standard HTML Header for R Help</a></li>
<li class="help-index-item"><a href="#HTMLlinks">Collect HTML Links from Package Documentation</a></li>
<li class="help-index-item"><a href="#loadRdMacros">Load User-defined Rd Help System Macros</a></li>
<li class="help-index-item"><a href="#make_translations_pkg">Package the Current Translations in the R Sources</a></li>
<li class="help-index-item"><a href="#makeLazyLoading">Lazy Loading of Packages</a></li>
<li class="help-index-item"><a href="#makevars">User and Site Compilation Variables</a></li>
<li class="help-index-item"><a href="#md5sum">Compute MD5 Checksums</a></li>
<li class="help-index-item"><a href="#package_dependencies">Computations on the Dependency Hierarchy of Packages</a></li>
<li class="help-index-item"><a href="#package_native_routine_registration_skeleton">
Write Skeleton for Adding Native Routine Registration to a Package
</a></li>
<li class="help-index-item"><a href="#parse_Rd">Parse an Rd File</a></li>
<li class="help-index-item"><a href="#parseLatex">Experimental Functions to Work with LaTeX Code</a></li>
<li class="help-index-item"><a href="#pskill">Kill a Process</a></li>
<li class="help-index-item"><a href="#psnice">Get or Set the Priority (Niceness) of a Process</a></li>
<li class="help-index-item"><a href="#QC">QC Checks for R Code and/or Documentation</a></li>
<li class="help-index-item"><a href="#Rcmd">R CMD Interface</a></li>
<li class="help-index-item"><a href="#Rd2HTML"> Rd Converters </a></li>
<li class="help-index-item"><a href="#Rd2txt_options">Set Formatting Options for Text Help</a></li>
<li class="help-index-item"><a href="#Rdiff">Difference R Output Files</a></li>
<li class="help-index-item"><a href="#Rdindex">Generate Index from Rd Files</a></li>
<li class="help-index-item"><a href="#RdTextFilter">Select Text in an Rd File</a></li>
<li class="help-index-item"><a href="#Rdutils">Rd Utilities</a></li>
<li class="help-index-item"><a href="#read.00Index">Read 00Index-style Files</a></li>
<li class="help-index-item"><a href="#showNonASCII">Pick Out Non-ASCII Characters</a></li>
<li class="help-index-item"><a href="#startDynamicHelp">Start the Dynamic HTML Help System</a></li>
<li class="help-index-item"><a href="#SweaveTeXFilter">Strip R Code out of Sweave File</a></li>
<li class="help-index-item"><a href="#testInstalledPackage">Test Installed Packages</a></li>
<li class="help-index-item"><a href="#texi2dvi">Compile LaTeX Files</a></li>
<li class="help-index-item"><a href="#toHTML">Display an Object in HTML</a></li>
<li class="help-index-item"><a href="#tools-defunct">Defunct Objects in Package tools</a></li>
<li class="help-index-item"><a href="#tools-deprecated">Deprecated Objects in Package tools</a></li>
<li class="help-index-item"><a href="#tools-package">Tools for Package Development</a></li>
<li class="help-index-item"><a href="#toRd">Generic Function to Convert Object to a Fragment of Rd Code</a></li>
<li class="help-index-item"><a href="#toTitleCase">Convert Titles to Title Case</a></li>
<li class="help-index-item"><a href="#undoc">Find Undocumented Objects</a></li>
<li class="help-index-item"><a href="#updatePACKAGES">Update Existing PACKAGES Files</a></li>
<li class="help-index-item"><a href="#update_pkg_po">
Prepare Translations for a Package
</a></li>
<li class="help-index-item"><a href="#userdir">R User Directories</a></li>
<li class="help-index-item"><a href="#vignetteEngine">Set or Get a Vignette Processing Engine</a></li>
<li class="help-index-item"><a href="#vignetteInfo">Basic Information about a Vignette</a></li>
<li class="help-index-item"><a href="#writePACKAGES">Generate PACKAGES Files</a></li>
<li class="help-index-item"><a href="#xgettext">Extract Translatable Messages from R Files in a Package</a></li>
</ul>

    <hr>
    <div class="manual-pages-content">
<div class="container manual-page" id="print.via.format">

<a href="#print.via.format" class="help-page-title"><h2>Printing Utilities</h2></a>

<h3>Description</h3>

<p><code>.print.via.format</code> is a “prototype” <code><a href="https://r-universe.dev/manuals/base.html#print">print</a>()</code>
method, useful, at least as a start, by a simple
</p>
<pre>    print.&lt;myS3class&gt;  &lt;-  .print.via.format</pre>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">.print.via.format<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object to be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>optional further arguments, passed to <code><a href="https://r-universe.dev/manuals/base.html#format">format</a></code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>x</code>, invisibly (by <code><a href="https://r-universe.dev/manuals/base.html#invisible">invisible</a>()</code>), as
<code><a href="https://r-universe.dev/manuals/base.html#print">print</a></code> methods should.
</p>


<h3>See Also</h3>

<p>The <code><a href="https://r-universe.dev/manuals/base.html#print">print</a></code> generic; its default method
<code><a href="https://r-universe.dev/manuals/base.html#print.default">print.default</a></code> (used for many basic implicit classes such
as <code>"numeric"</code>, <code>"character"</code> and <code><a href="https://r-universe.dev/manuals/base.html#array">array</a></code>s of
them, <code><a href="https://r-universe.dev/manuals/base.html#list">list</a></code>s etc).
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## The function is simply defined as</span><span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token ellipsis">...</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    writeLines<span class="token punctuation">(</span>format<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    invisible<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

<span class="token comment">## is used for simple print methods in R, and as prototype for new methods.</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="add_datalist">

<a href="#add_datalist" class="help-page-title"><h2>
Add a ‘<span class="file">datalist</span>’ File to a Source Package
</h2></a>

<h3>Description</h3>

<p>The <code><a href="https://r-universe.dev/manuals/utils.html#data">data</a>()</code> command with no arguments lists all the
datasets available via <code>data</code> in attached packages, and to do so a
per-package list is installed.  Creating that list at install time can
be slow for packages with huge datasets, and can be expedited by a
supplying ‘<span class="file">data/datalist</span>’ file.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">add_datalist<span class="token punctuation">(</span>pkgpath<span class="token punctuation">,</span> force <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> small.size <span class="token operator">=</span> <span class="token number">1024</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgpath</code></td>
<td>
<p>The path to a (source) package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>logical: can an existing ‘<span class="file">data/datalist</span>’ file be
over-written?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>small.size</code></td>
<td>
<p>number: a ‘<span class="file">data/datalist</span>’ file is created only if
the total size of the data files is larger than <code>small.size</code> bytes.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>R CMD build</code> will call this function to add a data list to
packages with 1MB or more of file in the ‘<span class="file">data</span>’ directory.
</p>
<p>It can also be also helpful to give a ‘<span class="file">data/datalist</span>’ file in
packages whose datasets have many dependencies, including loading the
packages itself (and maybe others).
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#data">data</a></code>.
</p>
<p>The ‘Writing R Extensions’ manual.
</p>

<hr>
</div>
<div class="container manual-page" id="assertCondition">

<a href="#assertCondition" class="help-page-title"><h2>Asserting Error Conditions</h2></a>

<h3>Description</h3>

<p>When testing code, it is not sufficient to check that results are correct,
but also that errors or warnings are signalled in appropriate
situations.  The functions described here provide a convenient
facility for doing so.  The three functions check that evaluating the
supplied expression produces an error, a warning or one of a
specified list of conditions, respectively.  If the assertion fails,
an error is signalled.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">assertError<span class="token punctuation">(</span>expr<span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token string">"error"</span><span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
assertWarning<span class="token punctuation">(</span>expr<span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token string">"warning"</span><span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
assertCondition<span class="token punctuation">(</span>expr<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">,</span> .exprString <span class="token operator">=</span> <span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>an unevaluated <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> expression which will be evaluated via
<code><a href="https://r-universe.dev/manuals/base.html#conditions">tryCatch</a>(expr, ..)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classes, ...</code></td>
<td>
<p><code><a href="https://r-universe.dev/manuals/base.html#character">character</a></code> strings corresponding to the
classes of the conditions that would satisfy the assertion; e.g., <code>"error"</code> or
<code>"warning"</code>.  If none are specified, any condition will
satisfy the assertion.  See the details section. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.exprString</code></td>
<td>
<p>The string to be printed corresponding to
<code>expr</code>. By default, the actual <code>expr</code> will be
deparsed.  Will be omitted if the function is supplied with the
actual expression to be tested.  If <code>assertCondition()</code> is
called from another function, with the actual expression passed as
an argument to that function, supply the deparsed version.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If <code>TRUE</code>, a message is printed when the
condition is satisfied.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>assertCondition()</code> uses the general condition mechanism to
check all the conditions generated in evaluating <code>expr</code>.  The
occurrence of any of the supplied condition classes among these satisfies the
assertion regardless of what other conditions may be signalled.
</p>
<p><code>assertError()</code> is a convenience function for asserting errors;
it calls <code>assertCondition()</code>.
</p>
<p><code>assertWarning()</code> asserts that a warning will be signalled, but
<em>not</em> an error, whereas <code>assertCondition(expr, "warning")</code>
will be satisfied even if an error follows the warning.  See the examples.
</p>


<h3>Value</h3>

<p>If the assertion is satisfied, a list of all the condition objects
signalled is returned, invisibly. See <code><a href="https://r-universe.dev/manuals/base.html#conditions">conditionMessage</a></code> for the
interpretation of these objects.  Note that <em>all</em> conditions
signalled during the evaluation are returned, whether or not they
were among the requirements.
</p>


<h3>Author(s)</h3>

<p>John Chambers and Martin Maechler</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#stop">stop</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#warning">warning</a></code>;
<code><a href="https://r-universe.dev/manuals/base.html#conditions">signalCondition</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#conditions">tryCatch</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">assertError<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  assertWarning<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  assertCondition<span class="token punctuation">(</span> <span class="token string">""</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">)</span> <span class="token comment"># ok, any condition would satisfy this</span>

try<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token comment">## .. Failed to get warning in evaluating sqrt(2)</span>
     assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span>   <span class="token comment"># ok</span>
try<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token comment"># -&gt; error: had no warning</span>
     assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span>
  <span class="token comment">## identical to assertError() call above</span>

assertCondition<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span>
try<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token comment">## .. Failed to get expected error ....</span>

<span class="token comment">## either warning or worse:</span>
assertCondition<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">,</span><span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token comment"># OK</span>
assertCondition<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token comment"># OK</span>

<span class="token comment">## when both are signalled:</span>
ff <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> warning<span class="token punctuation">(</span><span class="token string">"my warning"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> stop<span class="token punctuation">(</span><span class="token string">"my error"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    assertCondition<span class="token punctuation">(</span>ff<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span>
<span class="token comment">## but assertWarning does not allow an error to follow</span>
try<span class="token punctuation">(</span>assertWarning<span class="token punctuation">(</span>ff<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    assertCondition<span class="token punctuation">(</span>ff<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span>          <span class="token comment"># ok</span>
assertCondition<span class="token punctuation">(</span>ff<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token comment"># ok (quietly, catching warning)</span>

<span class="token comment">## assert that assertC..() does not assert [and use *one* argument only]</span>
assertCondition<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span> <span class="token number">2</span>   <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
assertCondition<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>sqrt<span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"warning"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span>
assertCondition<span class="token punctuation">(</span> assertCondition<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">"error"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="bibstyle">

<a href="#bibstyle" class="help-page-title"><h2>Select or Define a Bibliography Style</h2></a>

<h3>Description</h3>

<p>This function defines and registers styles for rendering
<code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> objects into ‘<span class="file">Rd</span>’ format, for later
conversion to text, HTML, etc.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">bibstyle<span class="token punctuation">(</span>style<span class="token punctuation">,</span> envir<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">,</span> .init <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> .default <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
getBibstyle<span class="token punctuation">(</span>all <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>

<p>A character string naming the style.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>

<p>(optional) An environment holding the functions to implement the style.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Named arguments to add to the environment.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.init</code></td>
<td>

<p>Whether to initialize the environment from the default style <code>"JSS"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.default</code></td>
<td>

<p>Whether to set the specified style as the default style.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>

<p>Whether to return the names of all registered styles.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Rendering of <code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> objects may be done using routines
modelled after those used by BibTeX.  This function allows environments
to be created and manipulated to contain those routines.
</p>
<p>There are two ways to create a new style environment.  The easiest
is to set <code>.init = TRUE</code>, in which case the environment will be
initialized with a copy of the default <code>"JSS"</code> environment.  (This style
is modelled after the ‘<span class="file">jss.bst</span>’ style used by the <em>Journal
of Statistical Software</em>.)  Alternatively, the <code>envir</code> argument
can be used to specify a completely new style environment.
</p>
<p>To find the name of the default style, use <code>getBibstyle()</code>. To
retrieve an existing style without setting it as the default, use
<code>bibstyle(style, .default = FALSE)</code>.  To modify an existing style,
specify <code>style</code> and some named entries via <code>...</code>.
(Modifying the default <code>"JSS"</code> style is discouraged.)  Setting
<code>style</code> to <code>NULL</code> or leaving it missing will retrieve the
default style, but modifications will not be allowed.
</p>
<p>At a minimum, the environment should contain routines to render each
of the 12 types of bibliographic entry supported by
<code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> as well as several other routines
described below.
The former must be named <code>formatArticle</code>,
<code>formatBook</code>, <code>formatInbook</code>, <code>formatIncollection</code>,
<code>formatInProceedings</code>, <code>formatManual</code>,
<code>formatMastersthesis</code>, <code>formatMisc</code>, <code>formatPhdthesis</code>,
<code>formatProceedings</code>, <code>formatTechreport</code> and
<code>formatUnpublished</code>.  Each of these takes one argument, a single
<code><a href="https://r-universe.dev/manuals/base.html#class">unclass</a></code>'ed entry from the <code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> vector
passed to the renderer, and should produce a single element character
vector (possibly containing newlines).
</p>
<p>The other routines are as follows.  <code>sortKeys</code>, a function to
produce a sort key to sort the entries, is passed the original
<code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> vector and should produce a sortable vector of
the same length to define the sort order.  Finally,
the optional function <code>cite</code> should have the same argument list
as <code>utils::<a href="https://r-universe.dev/manuals/utils.html#cite">cite</a></code>, and should produce a citation to be used
in text.
</p>
<p>The <code><a href="https://r-universe.dev/manuals/base.html#format">format</a></code> method for <code>"bibentry"</code> objects adds a
field named <code>".index"</code> to each entry after sorting and before
formatting.  This is a 1-based index within the complete object that
can be used in styles that require numbering.  Although the
<code>"JSS"</code> style doesn't use numbers, it includes a
<code>fmtPrefix()</code> stub function that may be used to display them.
See the example below.
</p>


<h3>Value</h3>

<p><code>bibstyle</code> returns the environment which has been selected or created.
</p>
<p><code>getBibstyle</code> returns the name of the default style, or all
style names.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">refs <span class="token operator">&lt;-</span>
c<span class="token punctuation">(</span>bibentry<span class="token punctuation">(</span>bibtype <span class="token operator">=</span> <span class="token string">"manual"</span><span class="token punctuation">,</span>
    title <span class="token operator">=</span> <span class="token string">"R: A Language and Environment for Statistical Computing"</span><span class="token punctuation">,</span>
    author <span class="token operator">=</span> person<span class="token punctuation">(</span><span class="token string">"R Core Team"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    organization <span class="token operator">=</span> <span class="token string">"R Foundation for Statistical Computing"</span><span class="token punctuation">,</span>
    address <span class="token operator">=</span> <span class="token string">"Vienna, Austria"</span><span class="token punctuation">,</span>
    year <span class="token operator">=</span> <span class="token number">2013</span><span class="token punctuation">,</span>
    url <span class="token operator">=</span> <span class="token string">"https://www.R-project.org"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  bibentry<span class="token punctuation">(</span>bibtype <span class="token operator">=</span> <span class="token string">"article"</span><span class="token punctuation">,</span>
    author <span class="token operator">=</span> c<span class="token punctuation">(</span>person<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"George"</span><span class="token punctuation">,</span> <span class="token string">"E."</span><span class="token punctuation">,</span> <span class="token string">"P."</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Box"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               person<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"David"</span><span class="token punctuation">,</span>  <span class="token string">"R."</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token string">"Cox"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    year <span class="token operator">=</span> <span class="token number">1964</span><span class="token punctuation">,</span>
    title <span class="token operator">=</span> <span class="token string">"An Analysis of Transformations"</span><span class="token punctuation">,</span>
    journal <span class="token operator">=</span> <span class="token string">"Journal of the Royal Statistical Society, Series B"</span><span class="token punctuation">,</span>
    volume <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">,</span> number <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> pages <span class="token operator">=</span> <span class="token string">"211--243"</span><span class="token punctuation">,</span>
    doi <span class="token operator">=</span> <span class="token string">"10.1111/j.2517-6161.1964.tb00553.x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

bibstyle<span class="token punctuation">(</span><span class="token string">"unsorted"</span><span class="token punctuation">,</span> sortKeys <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>refs<span class="token punctuation">)</span> seq_along<span class="token punctuation">(</span>refs<span class="token punctuation">)</span><span class="token punctuation">,</span>
    fmtPrefix <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>paper<span class="token punctuation">)</span> paste0<span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">,</span> paper<span class="token operator">$</span>.index<span class="token punctuation">,</span> <span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       .init <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
print<span class="token punctuation">(</span>refs<span class="token punctuation">,</span> .bibstyle <span class="token operator">=</span> <span class="token string">"unsorted"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="buildVignette">

<a href="#buildVignette" class="help-page-title"><h2>Build One Vignette</h2></a>

<h3>Description</h3>

<p>Run <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> (or other custom weave function),
<code><a href="#texi2dvi">texi2pdf</a></code>, and/or <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Stangle</a></code> 
(or other custom tangle function) on one vignette.
</p>
<p>This is the workhorse of <code>R CMD Sweave</code>.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">buildVignette<span class="token punctuation">(</span>file<span class="token punctuation">,</span> dir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span> weave <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> latex <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> tangle <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> 
              quiet <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> clean <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> keep <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              engine <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> buildPkg <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>character; the vignette source file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>character; the working directory in which the intermediate and 
output files will be produced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weave</code></td>
<td>
<p>logical; should weave be run?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latex</code></td>
<td>
<p>logical; should <a href="#texi2dvi">texi2pdf</a> be run if weaving produces a ‘<span class="file">.tex</span>’ file?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tangle</code></td>
<td>
<p>logical; should tangle be run?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical; run in quiet mode?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>logical; whether to remove some newly created, often
intermediate, files.  See details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>a list of file names to keep in any case when cleaning.  Note
that “target” files are kept anyway.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>engine</code></td>
<td>
<p><code>NULL</code> or character; name of vignette engine to
use.  Overrides any <code>\VignetteEngine{}</code> markup in the vignette.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>buildPkg</code></td>
<td>
<p><code>NULL</code> or a character vector; optional packages
in which to find the vignette engine.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>the encoding to assume for the file.  If not
specified, it will be read if possible from the file's contents.
Note that if the vignette is part of a package,
<code><a href="#buildVignettes">buildVignettes</a></code> reads the package's encoding from the
‘<span class="file">DESCRIPTION</span>’ file but this function does not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to weave and tangle.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function determines the vignette engine for the vignette (default
<code>utils::Sweave</code>), then weaves and/or tangles the vignette using
that engine.  Finally, if <code>clean</code> is <code>TRUE</code>, newly created
intermediate files (non “targets”, where these depend on the engine,
etc, and not any in <code>keep</code>) will be deleted.  If <code>clean</code> is
<code>NA</code>, and <code>weave</code> is true, newly created intermediate output
files (e.g., ‘<span class="file">.tex</span>’) will not be deleted even if a ‘<span class="file">.pdf</span>’
file has been produced from them.  
</p>
<p>If <code>buildPkg</code> is specified, those packages will be loaded before
the vignette is processed and will be used as the default packages in
the search for a vignette engine, but an explicitly specified package
in the vignette source (e.g., using
<code>\VignetteEngine{utils::Sweave}</code> to specify the <code>Sweave</code>
engine in the <span class="pkg">utils</span> package) will override it.  In contrast, if
the <code>engine</code> argument is given, it will override the vignette
source.
</p>


<h3>Value</h3>

<p>A character vector naming the files that have been produced.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson and Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="#buildVignettes">buildVignettes</a></code> for building all vignettes in a package.
</p>

<hr>
</div>
<div class="container manual-page" id="buildVignettes">

<a href="#buildVignettes" class="help-page-title"><h2>List and Build Package Vignettes</h2></a>

<h3>Description</h3>

<p>Run <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> (or other custom weave function)
and <code><a href="#texi2dvi">texi2pdf</a></code> on all vignettes
of a package, or list the vignettes.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">buildVignettes<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> quiet <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
               clean <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> tangle <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> ser_elibs <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>

pkgVignettes<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> subdirs <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
	     output <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> source <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> check <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.
If given, vignette source files are by default looked for in
subdirectory ‘<span class="file">doc</span>’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory. 
If given, vignette source files are by default looked for in
subdirectory ‘<span class="file">vignettes</span>’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical.
Weave and run <code><a href="#texi2dvi">texi2pdf</a></code> in quiet mode.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>Remove all files generated by the build, even if there
were copies there before.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tangle</code></td>
<td>
<p>logical.
Do tangling as well as weaving.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ser_elibs</code></td>
<td>
<p>For use from <code>R CMD check</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdirs</code></td>
<td>
<p>a character vector of subdirectories of <code>dir</code> in
which to look for vignettes.  The first which exists is used.
Defaults to <code>"doc"</code> if <code>package</code> is supplied, otherwise
<code>"vignettes"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>logical indicating if the output filenames for each
vignette should be returned (in component <code>outputs</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>logical indicating if the <em>tangled</em> output
filenames for each vignette should be returned (in component <code>sources</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check</code></td>
<td>
<p>logical.  If <code>TRUE</code>, check whether all files that
have vignette-like filenames have an identifiable vignette engine.
This may be a false positive if a file is not a vignette but has a 
filename matching a pattern defined by one of the vignette engines.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>buildVignettes</code> is used by <code>R CMD build</code> and
<code>R CMD check</code> to (re-)build vignette outputs from their sources. 
</p>
<p>As from <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.4.1, both of these functions ignore files that are listed in
the ‘<span class="file">.Rbuildignore</span>’ file in <code>dir</code>.
</p>


<h3>Value</h3>

<p><code>buildVignettes</code> is called for its side effect of creating the
outputs of all vignettes, and if <code>tangle = TRUE</code>, 
extracting the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code.
</p>
<p><code>pkgVignettes</code> returns an object of class <code>"pkgVignettes"</code>
if a vignette directory is found, otherwise <code>NULL</code>.  
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">gVigns <span class="token operator">&lt;-</span> pkgVignettes<span class="token punctuation">(</span><span class="token string">"grid"</span><span class="token punctuation">)</span>
str<span class="token punctuation">(</span>gVigns<span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="charsets">

<a href="#charsets" class="help-page-title"><h2>Conversion Tables between Character Sets</h2></a>

<h3>Description</h3>

<p><code>charset_to_Unicode</code> is a matrix of Unicode code points with
columns for the common 8-bit encodings.
</p>
<p><code>Adobe_glyphs</code> is a data frame which gives Adobe glyph names for
Unicode code points.  It has two character columns, <code>"adobe"</code> and
<code>"unicode"</code> (a 4-digit hex representation).
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">charset_to_Unicode

Adobe_glyphs</code></pre>


<h3>Details</h3>

<p><code>charset_to_Unicode</code> is an integer matrix of class
<code>c("<a href="https://r-universe.dev/manuals/base.html#noquote">noquote</a>", "<a href="https://r-universe.dev/manuals/base.html#hexmode">hexmode</a>")</code> so prints in hexadecimal.
The mappings are those used by <code>libiconv</code>: there are differences
in the way quotes and minus/hyphen are mapped between sources (and the
postscript encoding files use a different mapping).
</p>
<p><code>Adobe_glyphs</code> includes all the Adobe glyph names which correspond
to single Unicode characters.  It is sorted by Unicode code point and
within a point alphabetically on the glyph (there can be more than one
name for a Unicode code point).  The data are in the file
‘<span class="file"><var><a href="https://r-universe.dev/manuals/base.html#Rhome">R_HOME</a></var>/share/encodings/Adobe_glyphlist</span>’.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## find Adobe names for ISOLatin2 chars.</span>
latin2 <span class="token operator">&lt;-</span> charset_to_Unicode<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">"ISOLatin2"</span><span class="token punctuation">]</span>
aUnicode <span class="token operator">&lt;-</span> as.hexmode<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span><span class="token string">"0x"</span><span class="token punctuation">,</span> Adobe_glyphs<span class="token operator">$</span>unicode<span class="token punctuation">)</span><span class="token punctuation">)</span>
keep <span class="token operator">&lt;-</span> aUnicode <span class="token percent-operator operator">%in%</span> latin2
aUnicode <span class="token operator">&lt;-</span> aUnicode<span class="token punctuation">[</span>keep<span class="token punctuation">]</span>
aAdobe <span class="token operator">&lt;-</span> Adobe_glyphs<span class="token punctuation">[</span>keep<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token comment">## first match</span>
aLatin2 <span class="token operator">&lt;-</span> aAdobe<span class="token punctuation">[</span>match<span class="token punctuation">(</span>latin2<span class="token punctuation">,</span> aUnicode<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token comment">## all matches</span>
bLatin2 <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> aAdobe<span class="token punctuation">[</span>aUnicode <span class="token operator">==</span> latin2<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
format<span class="token punctuation">(</span>bLatin2<span class="token punctuation">,</span> justify <span class="token operator">=</span> <span class="token string">"none"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="check_packages_in_dir">

<a href="#check_packages_in_dir" class="help-page-title"><h2>Check Source Packages and Their Reverse Dependencies</h2></a>

<h3>Description</h3>

<p>Check source packages in a given directory, optionally with their
reverse dependencies.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">check_packages_in_dir<span class="token punctuation">(</span>dir<span class="token punctuation">,</span>
                      check_args <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      check_args_db <span class="token operator">=</span> list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      reverse <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
                      check_env <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      xvfb <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                      Ncpus <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"Ncpus"</span><span class="token punctuation">,</span> <span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      clean <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
                      <span class="token ellipsis">...</span><span class="token punctuation">)</span>

summarize_check_packages_in_dir_results<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> all <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
                                        full <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
summarize_check_packages_in_dir_timings<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> all <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                                        full <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
summarize_check_packages_in_dir_depends<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> all <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                                        which <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Depends"</span><span class="token punctuation">,</span>
                                                  <span class="token string">"Imports"</span><span class="token punctuation">,</span>
                                                  <span class="token string">"LinkingTo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

check_packages_in_dir_changes<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> old<span class="token punctuation">,</span>
                              outputs <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> sources <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
check_packages_in_dir_details<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> logs <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> drop_ok <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string giving the path to the directory with
the source ‘<span class="file">.tar.gz</span>’ files to be checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_args</code></td>
<td>
<p>a character vector with arguments to be passed to
<code>R CMD check</code>, or a list of length two of such character
vectors to be used for checking packages and reverse dependencies,
respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_args_db</code></td>
<td>
<p>a named list of character vectors with arguments
to be passed to <code>R CMD check</code>, with names the respective
package names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>a list with names partially matching <code>"repos"</code>,
<code>"which"</code>, or <code>"recursive"</code>, giving the repositories to
use for locating reverse dependencies (a subset of
<code>getOption("repos")</code>, the default), the types of reverse dependencies
(default: <code>c("Depends", "Imports", "LinkingTo")</code>, with
shorthands <code>"most"</code> and <code>"all"</code> as for
<code><a href="#package_dependencies">package_dependencies</a></code>), and indicating whether to also
check reverse dependencies of reverse dependencies and so on
(default: <code>FALSE</code>), or <code>NULL</code> (default), in which case no
reverse dependencies are checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_env</code></td>
<td>
<p>a character vector of name=value strings to set
environment variables for checking, or a list of length two of such
character vectors to be used for checking packages and reverse
dependencies, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xvfb</code></td>
<td>
<p>a logical indicating whether to perform checking inside a
virtual framebuffer X server (Unix only), or a character vector of
Xvfb options for doing so.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ncpus</code></td>
<td>
<p>the number of parallel processes to use for parallel
installation and checking.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>a logical indicating whether to remove the downloaded
reverse dependency sources.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passed to <code><a href="https://r-universe.dev/manuals/base.html#readLines">readLines</a></code>, e.g. for reading log files 
produced in a different encoding; currently not used by 
<code>check_packages_in_dir</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p>a logical indicating whether to also summarize the reverse
dependencies checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full</code></td>
<td>
<p>a logical indicating whether to also give details for
checks with non-ok results, or summarize check example timings (if
available).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>see <code><a href="#package_dependencies">package_dependencies</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>old</code></td>
<td>
<p>a character string giving the path to the directory of a
previous <code>check_packages_in_dir</code> run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputs</code></td>
<td>
<p>a logical indicating whether to analyze changes in
the outputs of the checks performed, or only (default) the status of
the checks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sources</code></td>
<td>
<p>a logical indicating whether to also investigate the
changes in the source files checked (default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logs</code></td>
<td>
<p>a character vector with the paths of ‘<span class="file">00check.log</span>’ to
analyze.  Only used if <code>dir</code> was not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_ok</code></td>
<td>
<p>a logical indicating whether to drop checks with
‘ok’ status, or a character vector with the ‘ok’
status tags to drop.  The default corresponds to tags ‘<span class="samp">⁠OK⁠</span>’,
‘<span class="samp">⁠NONE⁠</span>’ and ‘<span class="samp">⁠SKIPPED⁠</span>’.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>check_packages_in_dir</code> allows to conveniently check source
package ‘<span class="file">.tar.gz</span>’ files in the given directory <code>dir</code>, along
with their reverse dependencies as controlled by <code>reverse</code>.
</p>
<p>The <code>"which"</code> component of <code>reverse</code> can also be a list, in
which case reverse dependencies are obtained for each element of the
list and the corresponding element of the <code>"recursive"</code> component
of <code>reverse</code> (which is recycled as needed).
</p>
<p>If needed, the source ‘<span class="file">.tar.gz</span>’ files of the reverse dependencies
to be checked as well are downloaded into <code>dir</code> (and removed at
the end if <code>clean</code> is true).  Next, all packages (additionally)
needed for checking are installed to the ‘<span class="file">Library</span>’ subdirectory
of <code>dir</code>.  Then, all ‘<span class="file">.tar.gz</span>’ files are checked using the
given arguments and environment variables, with outputs and messages
to files in the ‘<span class="file">Outputs</span>’ subdirectory of <code>dir</code>.  The
‘<span class="file">*.Rcheck</span>’ directories with the check results of the reverse
dependencies are renamed by prefixing their base names with
‘<span class="samp">⁠rdepends_⁠</span>’.
</p>
<p>Results and timings can conveniently be summarized using
<code>summarize_check_packages_in_dir_results</code> and
<code>summarize_check_packages_in_dir_timings</code>, respectively.
</p>
<p>Installation and checking is performed in parallel if <code>Ncpus</code> is
greater than one: this will use <code><a href="https://r-universe.dev/manuals/parallel.html#mclapply">mclapply</a></code> on
Unix and <code><a href="https://r-universe.dev/manuals/parallel.html#clusterApply">parLapply</a></code> on Windows.
</p>
<p><code>check_packages_in_dir</code> returns an object inheriting from class
<code>"check_packages_in_dir"</code> which has <code><a href="https://r-universe.dev/manuals/base.html#print">print</a></code> and
<code><a href="https://r-universe.dev/manuals/base.html#summary">summary</a></code> methods.
</p>
<p><code>check_packages_in_dir_changes</code> allows to analyze the effect of
changing (some of) the sources.  With <code>dir</code> and <code>old</code> the
paths to the directories with the new and old sources, respectively,
and the corresponding check results, possible changes in the check
results can conveniently be analyzed as controlled via options
<code>outputs</code> and <code>sources</code>.  The changes object returned can be
subscripted according to change in severity from the old to the new
results by using one of <code>"=="</code>, <code>"!="</code>, <code>"&lt;"</code>,
<code>"&lt;="</code>, <code>"&gt;"</code> or <code>"&gt;="</code> as row index.
</p>
<p><code>check_packages_in_dir_details</code> analyzes check log files to
obtain check details as a data frame which can be used for further
processing, providing check name, status and output for every check
performed and not dropped according to status tag (via variables
<code>Check</code>, <code>Status</code> and <code>Output</code>, respectively).
</p>
<p>Environment variable <span class="env">_R_CHECK_ELAPSED_TIMEOUT_</span> can be used to
set a limit on the elapsed time of each <code>check</code> run.  See the
‘R Internals’ manual for how the value is interpreted and for
other environment variables which can be used for finer-grained
control on timeouts within a <code>check</code> run.
</p>


<h3>Note</h3>

<p>This functionality is still experimental: interfaces may change in
future versions. 
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span><span class="token comment">## Check packages in dir without reverse dependencies:</span>
check_packages_in_dir<span class="token punctuation">(</span>dir<span class="token punctuation">)</span>
<span class="token comment">## Check packages in dir and their reverse dependencies using the</span>
<span class="token comment">## defaults (all repositories in getOption("repos"), all "strong"</span>
<span class="token comment">## reverse dependencies, no recursive reverse dependencies):</span>
check_packages_in_dir<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> reverse <span class="token operator">=</span> list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## Check packages in dir with their reverse dependencies from CRAN,</span>
<span class="token comment">## using all strong reverse dependencies and reverse suggests:</span>
check_packages_in_dir<span class="token punctuation">(</span>dir<span class="token punctuation">,</span>
                      reverse <span class="token operator">=</span> list<span class="token punctuation">(</span>repos <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"repos"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"CRAN"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                     which <span class="token operator">=</span> <span class="token string">"most"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                   
<span class="token comment">## Check packages in dir with their reverse dependencies from CRAN,</span>
<span class="token comment">## using '--as-cran' for the former but not the latter:</span>
check_packages_in_dir<span class="token punctuation">(</span>dir<span class="token punctuation">,</span>
                      check_args <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"--as-cran"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      reverse <span class="token operator">=</span> list<span class="token punctuation">(</span>repos <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"repos"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"CRAN"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="checkFF">

<a href="#checkFF" class="help-page-title"><h2>Check Foreign Function Calls</h2></a>

<h3>Description</h3>

<p>Performs checks on calls to compiled code from R code.  Currently only
checks whether the interface functions such as <code>.C</code> and
<code>.Fortran</code> are called with a <code>"<a href="https://r-universe.dev/manuals/base.html#getNativeSymbolInfo">NativeSymbolInfo</a>"</code>
first argument or with argument <code>PACKAGE</code> specified, which is
highly recommended to avoid name clashes in foreign function calls.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkFF<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> file<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
        registration <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> check_DUP <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
        verbose <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"verbose"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.  If
given, the installed R code of the package is checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This should contain the subdirectory ‘<span class="file">R</span>’
(for R code).  Only used if <code>package</code> is not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the name of a file containing R code to be checked.  Used
if neither <code>package</code> nor <code>dir</code> are given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>registration</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, checks
the registration information on the call (if available).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_DUP</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, <code>.C</code> and
<code>.Fortran</code> calls with <code>DUP = FALSE</code> are reported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, additional diagnostics are
printed (and the result is returned invisibly).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that we can only check if the <code>name</code> argument is a symbol or
a character string, not what class of object the symbol resolves to
at run-time.
</p>
<p>If the package has a namespace which contains a <code>useDynLib</code>
directive, calls in top-level functions in the package are not
reported as their symbols will be preferentially looked up in the DLL
named in the first <code>useDynLib</code> directive.
</p>
<p>This checks that calls with <code>PACKAGE</code> specified are to the
same package, and reports separately those which are in base packages
and those which are in other packages (and if those packages are
specified in the ‘<span class="file">DESCRIPTION</span>’ file).
</p>


<h3>Value</h3>

<p>An object of class <code>"checkFF"</code>.
</p>
<p>There are <code><a href="https://r-universe.dev/manuals/base.html#format">format</a></code> and <code>print</code> methods to display the
information contained in such objects.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#Foreign">.C</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#Foreign">.Fortran</a></code>;
<code><a href="https://r-universe.dev/manuals/base.html#Foreign">Foreign</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment"># order is pretty much random</span>
checkFF<span class="token punctuation">(</span>package <span class="token operator">=</span> <span class="token string">"stats"</span><span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="checkMD5sums">

<a href="#checkMD5sums" class="help-page-title"><h2>Check and Create MD5 Checksum Files</h2></a>

<h3>Description</h3>

<p><code>checkMD5sums</code> checks the files against a file ‘<span class="file">MD5</span>’.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkMD5sums<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>the name of an installed package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>the path to the top-level directory of an installed
package.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The file ‘<span class="file">MD5</span>’ which is created is in a format which can be
checked by <code>md5sum -c MD5</code> if a suitable command-line version
of <code>md5sum</code> is available.  (For Windows, one is supplied in
the bundle at <a href="https://cran.r-project.org/bin/windows/Rtools/" target="_blank">https://cran.r-project.org/bin/windows/Rtools/</a>.)
</p>
<p>If <code>dir</code> is missing, an installed package of name <code>package</code>
is searched for.
</p>
<p>The private function <code>tools:::.installMD5sums</code> is used to create
<code>MD5</code> files in the Windows build.
</p>


<h3>Value</h3>

<p><code>checkMD5sums</code> returns a logical, <code>NA</code> if there is no
‘<span class="file">MD5</span>’ file to be checked.
</p>


<h3>See Also</h3>

<p><code><a href="#md5sum">md5sum</a></code></p>

<hr>
</div>
<div class="container manual-page" id="checkPoFiles">

<a href="#checkPoFiles" class="help-page-title"><h2>Check Translation Files for Inconsistent Format Strings</h2></a>

<h3>Description</h3>

<p>These functions compare formats embedded in English messages
with translated strings to check for consistency.  <code>checkPoFile</code>
checks one file, while <code>checkPoFiles</code> checks all files for a specified
language.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkPoFile<span class="token punctuation">(</span>f<span class="token punctuation">,</span> strictPlural <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
checkPoFiles<span class="token punctuation">(</span>language<span class="token punctuation">,</span> dir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>a character string giving a single filepath.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strictPlural</code></td>
<td>
<p>whether to compare formats of singular and plural
forms in a strict way.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>language</code></td>
<td>
<p>a character string giving a language code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a path to a directory in which to check files.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Part of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s internationalization depends on translations of messages
in ‘<span class="file">.po</span>’ files.  In these files an ‘English’ message taken
from the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> sources is followed by a translation into another
language.  Many of these messages are format strings for C or <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
<code><a href="https://r-universe.dev/manuals/base.html#sprintf">sprintf</a></code> and related functions.  In these cases, the
translation must give a compatible format or an error will be
generated when the message is displayed.
</p>
<p>The rules for compatibility differ between C and <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> in several ways. C
supports several conversions not supported by <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, namely <code>c</code>,
<code>u</code>, <code>p</code>, <code>n</code>.  It is allowed in C's <code>sprintf()</code>
function to have more arguments than are needed by the format string,
but in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> the counts must match exactly.  <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> requires types of
arguments to match, whereas C will do the display whether it makes
sense or not.
</p>
<p>These functions compromise on the testing as follows.  The additional
formats allowed in C are accepted, and all differences in argument
type or count are reported.  As a consequence some reported
differences are not errors.
</p>
<p>If the <code>strictPlural</code> argument is <code>TRUE</code>, then argument
lists must agree exactly between singular and plural forms of messages; if
<code>FALSE</code>, then translations only need to match one or the other
of the two forms.  When <code>checkPoFiles</code> calls <code>checkPoFile</code>,
the <code>strictPlural</code> argument is set to <code>TRUE</code> for files with
names starting ‘<span class="file">R-</span>’, and to <code>FALSE</code> otherwise.
</p>
<p>Items marked as ‘fuzzy’ in the ‘<span class="file">.po</span>’ file are not
processed (as they are ignored by the message compiler).
</p>
<p>If a difference is found, the translated string is checked for variant
percent signs (e.g., the wide percent sign <code>"\uFF05"</code>).  Such signs
will not be recognized as format specifiers, and are likely to be
errors.
</p>


<h3>Value</h3>

<p>Both functions return an object of S3 class <code>"check_po_files"</code>.  A
<code>print</code> method is defined for this class to display a report on
the differences.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>References</h3>

<p>See the GNU gettext manual for the ‘<span class="file">.po</span>’ file format:<br><a href="https://www.gnu.org/software/gettext/manual/gettext.html" target="_blank">https://www.gnu.org/software/gettext/manual/gettext.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#update_pkg_po">update_pkg_po</a>()</code> which calls <code>checkPoFile()</code>;
<code><a href="#xgettext">xgettext</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#sprintf">sprintf</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span>
checkPoFiles<span class="token punctuation">(</span><span class="token string">"de"</span><span class="token punctuation">,</span> <span class="token string">"/path/to/R/src/directory"</span><span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="checkRd">

<a href="#checkRd" class="help-page-title"><h2> Check an Rd Object </h2></a>

<h3>Description</h3>

<p>Check an help file or the output of the <code><a href="#parse_Rd">parse_Rd</a></code> function.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkRd<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> defines <span class="token operator">=</span> .Platform<span class="token operator">$</span>OS.type<span class="token punctuation">,</span> stages <span class="token operator">=</span> <span class="token string">"render"</span><span class="token punctuation">,</span>
        unknownOK <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> listOK <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">,</span> def_enc <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Rd</code></td>
<td>
<p> a filename or <code>Rd</code> object to use as input. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>defines</code></td>
<td>
<p> string(s) to use in <code style="white-space: pre;">⁠#ifdef⁠</code> tests. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p> at which stage (<code>"build"</code>, <code>"install"</code>, or
<code>"render"</code>) should <code style="white-space: pre;">⁠\Sexpr⁠</code> macros be executed? See the
notes below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unknownOK</code></td>
<td>
<p> unrecognized macros are treated as errors if
<code>FALSE</code>, otherwise warnings. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>listOK</code></td>
<td>
<p> unnecessary non-empty braces (e.g., around text, not as
an argument) are treated as errors if <code>FALSE</code>, otherwise
warnings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional parameters to pass to <code><a href="#parse_Rd">parse_Rd</a></code> when
<code>Rd</code> is a filename.  One that is often useful is <code>encoding</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>def_enc</code></td>
<td>
<p>logical: has the package declared an encoding, so tests
for non-ASCII text are suppressed?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>checkRd</code> performs consistency checks on an Rd file, confirming that
required sections are present, etc.
</p>
<p>It accepts a filename for an Rd file, and will use
<code><a href="#parse_Rd">parse_Rd</a></code> to parse it before applying the checks.  If so,
warnings from <code>parse_Rd</code> are collected, together with those from
the internal function <code>prepare_Rd</code>, which does the
<code style="white-space: pre;">⁠#ifdef⁠</code> and <code style="white-space: pre;">⁠\Sexpr⁠</code> processing, drops sections that
would not be rendered or are duplicated (and should not be) and
removes empty sections.
</p>
<p>An Rd object is passed through <code>prepare_Rd</code>, but it may already
have been (and installed Rd objects have).
</p>
<p>Warnings are given a ‘level’: those from <code>prepare_Rd</code> have
level 0.  These include
</p>

<table>
<tr>
<td style="text-align: left;">
    All text must be in a section</td>
</tr>
<tr>
<td style="text-align: left;">
    Only one <var>tag name</var> section is allowed: the first will be used</td>
</tr>
<tr>
<td style="text-align: left;">
    Section <var>name</var> is unrecognized and will be dropped</td>
</tr>
<tr>
<td style="text-align: left;">
    Dropping empty section <var>name</var>
</td>
</tr>
<tr>
<td style="text-align: left;">
  </td>
</tr>
</table>
<p><code>checkRd</code> itself can show
</p>

<table>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Tag <var>tag name</var> not recognized</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> <code style="white-space: pre;">⁠\tabular⁠</code> format must be simple text</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Unrecognized <code style="white-space: pre;">⁠\tabular⁠</code> format: ...</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Only <var>n</var> columns allowed in this table</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Must have a <var>tag name</var>
</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Only one <var>tag name</var> is allowed</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> Tag <var>tag name</var> must not be empty</td>
</tr>
<tr>
<td style="text-align: right;">
    7 </td>
<td style="text-align: left;"> <code style="white-space: pre;">⁠\docType⁠</code> must be plain text</td>
</tr>
<tr>
<td style="text-align: right;">
    5 </td>
<td style="text-align: left;"> Tag <code style="white-space: pre;">⁠\method⁠</code> is only valid in <code style="white-space: pre;">⁠\usage⁠</code>
</td>
</tr>
<tr>
<td style="text-align: right;">
    5 </td>
<td style="text-align: left;"> Tag <code style="white-space: pre;">⁠\dontrun⁠</code> is only valid in <code style="white-space: pre;">⁠\examples⁠</code>
</td>
</tr>
<tr>
<td style="text-align: right;">
    5 </td>
<td style="text-align: left;"> Tag <var>tag name</var> is invalid in a <var>block name</var> block</td>
</tr>
<tr>
<td style="text-align: right;">
    5 </td>
<td style="text-align: left;"> Title of <code style="white-space: pre;">⁠\section⁠</code> must be non-empty plain text</td>
</tr>
<tr>
<td style="text-align: right;">
    5 </td>
<td style="text-align: left;"> <code style="white-space: pre;">⁠\title⁠</code> content must be plain text</td>
</tr>
<tr>
<td style="text-align: right;">
    3 </td>
<td style="text-align: left;"> Empty section <var>tag name</var>
</td>
</tr>
<tr>
<td style="text-align: right;">
    -1 </td>
<td style="text-align: left;"> Non-ASCII contents without declared encoding</td>
</tr>
<tr>
<td style="text-align: right;">
    -1 </td>
<td style="text-align: left;"> Non-ASCII contents in second part of <code style="white-space: pre;">⁠\enc⁠</code>
</td>
</tr>
<tr>
<td style="text-align: right;">
    -3 </td>
<td style="text-align: left;"> Tag <code style="white-space: pre;">⁠\ldots⁠</code> is not valid in a code block</td>
</tr>
<tr>
<td style="text-align: right;">
    -3 </td>
<td style="text-align: left;"> Apparent non-ASCII contents without declared encoding</td>
</tr>
<tr>
<td style="text-align: right;">
    -3 </td>
<td style="text-align: left;"> Apparent non-ASCII contents in second part of <code style="white-space: pre;">⁠\enc⁠</code>
</td>
</tr>
<tr>
<td style="text-align: right;">
    -3 </td>
<td style="text-align: left;"> Unnecessary braces at ...</td>
</tr>
<tr>
<td style="text-align: right;">
    -3 </td>
<td style="text-align: left;"> <code style="white-space: pre;">⁠\method⁠</code> not valid outside a code block</td>
</tr>
<tr>
<td style="text-align: right;">
  </td>
</tr>
</table>
<p>and variations with <code style="white-space: pre;">⁠\method⁠</code> replaced by <code style="white-space: pre;">⁠\S3method⁠</code> or
<code style="white-space: pre;">⁠\S4method⁠</code>.
</p>
<p>Note that both <code>prepare_Rd</code> and <code>checkRd</code> have tests for an
empty section: that in <code>checkRd</code> is stricter (essentially that
nothing is output).
</p>


<h3>Value</h3>

<p>This may fail through an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> error, but otherwise warnings are
collected as returned as an object of class <code>"checkRd"</code>, a
character vector of messages.  This class has a <code>print</code> method
which only prints unique messages, and has argument <code>minlevel</code>
that can be used to select only more serious messages.  (This is set
to <code>-1</code> in <code>R CMD check</code>.)
</p>
<p>Possible fatal errors are those from running the parser (e.g., a
non-existent file, unclosed quoted string, non-ASCII input without a
specified encoding) or from <code>prepare_Rd</code> (multiple
<code style="white-space: pre;">⁠\Rdversion⁠</code> declarations, invalid <code style="white-space: pre;">⁠\encoding⁠</code> or
<code style="white-space: pre;">⁠\docType⁠</code> or <code style="white-space: pre;">⁠\name⁠</code> sections, and missing or duplicate
<code style="white-space: pre;">⁠\name⁠</code> or <code style="white-space: pre;">⁠\title⁠</code> sections).
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley
</p>


<h3>See Also</h3>

<p><code><a href="#parse_Rd">parse_Rd</a></code>, <code><a href="#Rd2HTML">Rd2HTML</a></code>.
</p>

<hr>
</div>
<div class="container manual-page" id="checkRdaFiles">

<a href="#checkRdaFiles" class="help-page-title"><h2>
Report on Details of Saved Images or Re-saves them
</h2></a>

<h3>Description</h3>

<p>This reports for each of the files produced by <code>save</code> the size,
if it was saved in ASCII or XDR binary format, and if it was
compressed (and if so in what format).
</p>
<p>Usually such files have extension ‘<span class="file">.rda</span>’ or ‘<span class="file">.RData</span>’, hence
the name of the function.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkRdaFiles<span class="token punctuation">(</span>paths<span class="token punctuation">)</span>
resaveRdaFiles<span class="token punctuation">(</span>paths<span class="token punctuation">,</span> compress <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"auto"</span><span class="token punctuation">,</span> <span class="token string">"gzip"</span><span class="token punctuation">,</span> <span class="token string">"bzip2"</span><span class="token punctuation">,</span> <span class="token string">"xz"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               compression_level<span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>paths</code></td>
<td>
<p>A character vector of paths to <code>save</code> files.  If
this specifies a single directory, it is taken to refer to all
‘<span class="file">.rda</span>’ and ‘<span class="file">.RData</span>’ files in that directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress, compression_level</code></td>
<td>
<p>Type and level of compression: see
<code><a href="https://r-universe.dev/manuals/base.html#save">save</a></code>.  Values of <code>compress</code> can be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>The format to be used when re-saving: see
<code><a href="https://r-universe.dev/manuals/base.html#save">save</a></code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>compress = "auto"</code> asks <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> to choose the compression and ignores
<code>compression_level</code>.  It will try <code>"gzip"</code>, <code>"bzip2"</code>
and if the <code>"gzip"</code> compressed size is over 10Kb, <code>"xz"</code> and
choose the smallest compressed file (but with a 10% bias towards
<code>"gzip"</code>).  This can be slow.
</p>
<p>For back-compatibility, <code>version = NULL</code> is interpreted to mean
version 2: however version-3 files will only be saved as version 3.
</p>


<h3>Value</h3>

<p>For <code>checkRdaFiles</code>, a data frame with rows names <code>paths</code>
and columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>numeric: file size in bytes, <code>NA</code> if the file does
not exist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ASCII</code></td>
<td>
<p>logical: true for save(ASCII = TRUE), <code>NA</code> if the
format is not that of an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> save file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>character: type of compression.  One of <code>"gzip"</code>,
<code>"bzip2"</code>, <code>"xz"</code>, <code>"none"</code> or <code>"unknown"</code> (which
means that if this is an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> save file it is from a later version of
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>integer: positive with the version(s) of the
<code><a href="https://r-universe.dev/manuals/base.html#save">save</a>()</code>, see there on which versions have been default in
which versions of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, and <code>NA</code> for non-Rda files.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span><span class="token comment">## from a package top-level source directory</span>
paths <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>Sys.glob<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"data/*.rda"</span><span class="token punctuation">,</span> <span class="token string">"data/*.RData"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>res <span class="token operator">&lt;-</span> checkRdaFiles<span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## pick out some that may need attention</span>
bad <span class="token operator">&lt;-</span> is.na<span class="token punctuation">(</span>res<span class="token operator">$</span>ASCII<span class="token punctuation">)</span> <span class="token operator">|</span> res<span class="token operator">$</span>ASCII <span class="token operator">|</span> <span class="token punctuation">(</span>res<span class="token operator">$</span>size <span class="token operator">&gt;</span> <span class="token number">1e4</span> <span class="token operator">&amp;</span> res<span class="token operator">$</span>compress <span class="token operator">==</span> <span class="token string">"none"</span><span class="token punctuation">)</span>
res<span class="token punctuation">[</span>bad<span class="token punctuation">,</span> <span class="token punctuation">]</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="checkTnF">

<a href="#checkTnF" class="help-page-title"><h2>Check R Packages or Code for T/F</h2></a>

<h3>Description</h3>

<p>Checks the specified R package or code file for occurrences of
<code>T</code> or <code>F</code>, and gathers the expression containing these.
This is useful as in R <code>T</code> and <code>F</code> are just variables which
are set to the logicals <code>TRUE</code> and <code>FALSE</code> by default, but
are not reserved words and hence can be overwritten by the user.
Hence, one should always use <code>TRUE</code> and <code>FALSE</code> for the
logicals.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkTnF<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> file<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.  If
given, the installed R code and the examples in the documentation
files of the package are checked.  R code installed as an image file
cannot be checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectory ‘<span class="file">R</span>’ (for
R code), and should also contain ‘<span class="file">man</span>’ (for documentation).
Only used if <code>package</code> is not given.  If used, the R code files
and the examples in the documentation files are checked.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the name of a file containing R code to be checked.  Used
if neither <code>package</code> nor <code>dir</code> are given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class <code>"checkTnF"</code> which is a list containing, for
each file where occurrences of <code>T</code> or <code>F</code> were found, a list
with the expressions containing these occurrences.  The names of the
list are the corresponding file names.
</p>
<p>There is a <code>print</code> method for nicely displaying the information
contained in such objects.
</p>

<hr>
</div>
<div class="container manual-page" id="checkVignettes">

<a href="#checkVignettes" class="help-page-title"><h2>Check Package Vignettes</h2></a>

<h3>Description</h3>

<p>Check all vignettes of a package by running
<code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> (or other custom weave function) and/or
<code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Stangle</a></code> (or other custom tangle function) on them.
All R source code files found after the tangling step are
<code><a href="https://r-universe.dev/manuals/base.html#source">source</a></code>ed to check whether all code can be
executed without errors.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkVignettes<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
               tangle <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> weave <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> latex <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
               workdir <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"tmp"</span><span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"cur"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               keepfiles <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.
If given, vignette source files are looked for in subdirectory
‘<span class="file">doc</span>’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.
If given, vignette source files are looked for in subdirectory
‘<span class="file">vignettes</span>’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tangle</code></td>
<td>
<p>Perform a tangle and <code><a href="https://r-universe.dev/manuals/base.html#source">source</a></code> the extracted code?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weave</code></td>
<td>
<p>Perform a weave?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latex</code></td>
<td>
<p>logical: if <code>weave</code> and <code>latex</code>
are <code>TRUE</code> and there is no ‘<span class="file">Makefile</span>’ in the vignettes
directory, run the intermediate ‘<span class="file">.tex</span>’ outputs from weaving
through <code><a href="#texi2dvi">texi2pdf</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>workdir</code></td>
<td>
<p>Directory used as working directory while checking the
vignettes. If <code>"tmp"</code> then a temporary directory is created,
this is the default.  If <code>"src"</code> then the directory containing
the vignettes itself is used, if <code>"cur"</code> then the current
working directory of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is used.</p>
</td>
</tr>
</table>
<table><tr style="vertical-align: top;">
<td><code>keepfiles</code></td>
<td>
<p>Delete files in the temporary directory?  This option is
ignored when <code>workdir != "tmp"</code>.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function first uses <code><a href="#buildVignettes">pkgVignettes</a></code> to find the
package vignettes, and in particular their vignette engines (see
<code><a href="#vignetteEngine">vignetteEngine</a></code>).
</p>
<p>If <code>tangle</code> is true, it then runs <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Stangle</a></code> (or
other custom tangle function provided by the engine) to produce (one
or more) <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code files from each vignette, then <code><a href="https://r-universe.dev/manuals/base.html#source">source</a></code>s
each code file in turn.
</p>
<p>If <code>weave</code> is true, the vignettes are run through
<code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> (or other custom weave function provided by the
engine).  If <code>latex</code> is also true and there is no ‘<span class="file">Makefile</span>’
in the vignettes directory, <code><a href="#texi2dvi">texi2pdf</a></code> is run on the
intermediate ‘<span class="file">.tex</span>’ files from weaving for those vignettes which
did not give errors in the previous steps.
</p>


<h3>Value</h3>

<p>An object of class <code>"checkVignettes"</code>, which is a list with the
error messages found during the tangle, source, weave and latex steps.
There is a <code>print</code> method for displaying the information
contained in such objects.
</p>

<hr>
</div>
<div class="container manual-page" id="codoc">

<a href="#codoc" class="help-page-title"><h2>Check Code/Documentation Consistency</h2></a>

<h3>Description</h3>

<p>Find inconsistencies between actual and documented ‘structure’
of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects in a package.  <code>codoc</code> compares names and
optionally also corresponding positions and default values of the
arguments of functions.  <code>codocClasses</code> and <code>codocData</code>
compare slot names of S4 classes and variable names of data sets,
respectively.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">codoc<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
      use.values <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> verbose <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"verbose"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
codocClasses<span class="token punctuation">(</span>package<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
codocData<span class="token punctuation">(</span>package<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectories ‘<span class="file">man</span>’
with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> documentation sources (in Rd format) and ‘<span class="file">R</span>’ with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
code.  Only used if <code>package</code> is not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.values</code></td>
<td>
<p>if <code>FALSE</code>, do not use function default values
when comparing code and docs.  Otherwise, compare <em>all</em> default
values if <code>TRUE</code>, and only the ones documented in the usage
otherwise (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, additional diagnostics are
printed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The purpose of <code>codoc</code> is to check whether the documented usage
of function objects agrees with their formal arguments as defined in
the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code.  This is not always straightforward, in particular as the
usage information for methods to generic functions often employs the
name of the generic rather than the method.
</p>
<p>The following algorithm is used.  If an installed package is used, it
is loaded (unless it is the <span class="pkg">base</span> package), after possibly
detaching an already loaded version of the package.  Otherwise, if the
sources are used, the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code files of the package are collected and
sourced in a new environment.  Then, the usage sections of the Rd
files are extracted and parsed ‘as much as possible’ to give
the formals documented.  For interpreted functions in the code
environment, the formals are compared between code and documentation
according to the values of the argument <code>use.values</code>.  Synopsis
sections are used if present; their occurrence is reported if
<code>verbose</code> is true.
</p>
<p>If a package has a namespace both exported and unexported objects are
checked, as well as registered S3 methods.  (In the unlikely event of
differences the order is exported objects in the package, registered
S3 methods and finally objects in the namespace and only the first
found is checked.)
</p>
<p>Currently, the R documentation format has no high-level markup for the
basic ‘structure’ of classes and data sets (similar to the usage
sections for function synopses).  Variable names for data frames in
documentation objects obtained by suitably editing ‘templates’
created by <code><a href="https://r-universe.dev/manuals/utils.html#prompt">prompt</a></code> are recognized by <code>codocData</code>
and used provided that the documentation object is for a single data
frame (i.e., only has one alias).  <code>codocClasses</code> analogously
handles slot names for classes in documentation objects obtained by
editing shells created by <code><a href="https://r-universe.dev/manuals/methods.html#promptClass">promptClass</a></code>.
</p>
<p>Help files named ‘<span class="file"><var>pkgname</var>-defunct.Rd</span>’ for the
appropriate <var>pkgname</var> are checked more loosely, as they may
have undocumented arguments.
</p>


<h3>Value</h3>

<p><code>codoc</code> returns an object of class <code>"codoc"</code>.  Currently,
this is a list which, for each Rd object in the package where an
inconsistency was found, contains an element with a list of the
mismatches (which in turn are lists with elements <code>code</code> and
<code>docs</code>, giving the corresponding arguments obtained from the
function's code and documented usage).
</p>
<p><code>codocClasses</code> and <code>codocData</code> return objects of class
<code>"codocClasses"</code> and <code>"codocData"</code>, respectively, with a
structure similar to class <code>"codoc"</code>.
</p>
<p>There are <code>print</code> methods for nicely displaying the information
contained in such objects.
</p>


<h3>Note</h3>

<p>The default for <code>use.values</code> has been changed from
<code>FALSE</code> to <code>NULL</code>, for <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> versions 1.9.0 and later.
</p>


<h3>See Also</h3>

<p><code><a href="#undoc">undoc</a></code>, <code><a href="#QC">QC</a></code>
</p>

<hr>
</div>
<div class="container manual-page" id="compactPDF">

<a href="#compactPDF" class="help-page-title"><h2>
Compact PDF Files
</h2></a>

<h3>Description</h3>

<p>Re-save PDF files (especially vignettes) more compactly.
Support function for <code>R CMD build --compact-vignettes</code>.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">compactPDF<span class="token punctuation">(</span>paths<span class="token punctuation">,</span>
           qpdf <span class="token operator">=</span> Sys.which<span class="token punctuation">(</span>Sys.getenv<span class="token punctuation">(</span><span class="token string">"R_QPDF"</span><span class="token punctuation">,</span> <span class="token string">"qpdf"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           gs_cmd <span class="token operator">=</span> Sys.getenv<span class="token punctuation">(</span><span class="token string">"R_GSCMD"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           gs_quality <span class="token operator">=</span> Sys.getenv<span class="token punctuation">(</span><span class="token string">"GS_QUALITY"</span><span class="token punctuation">,</span> <span class="token string">"none"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           gs_extras <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## S3 method for class 'compactPDF'</span>
format<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ratio <span class="token operator">=</span> <span class="token number">0.9</span><span class="token punctuation">,</span> diff <span class="token operator">=</span> <span class="token number">1e4</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>paths</code></td>
<td>
<p>A character vector of paths to PDF files, or a length-one
character vector naming a directory, when all ‘<span class="file">.pdf</span>’ files in
that directory will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qpdf</code></td>
<td>
<p>Character string giving the path to the <code>qpdf</code>
command.  If empty, <code>qpdf</code> will not be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gs_cmd</code></td>
<td>
<p>Character string giving the path to the GhostScript
executable, if that is to be used.  On Windows this is the path to
‘<span class="file">gswin32c.exe</span>’ or ‘<span class="file">gswin64c.exe</span>’.  If <code>""</code> (the
default), the function will try to find a platform-specific path to
GhostScript where required.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gs_quality</code></td>
<td>
<p>A character string indicating the quality required:
the options are <code>"none"</code> (so GhostScript is not used),
<code>"printer"</code> (300dpi), <code>"ebook"</code> (150dpi) and
<code>"screen"</code> (72dpi).  Can be abbreviated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gs_extras</code></td>
<td>
<p>An optional character vector of further options to be
passed to GhostScript.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class <code>"compactPDF"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratio, diff</code></td>
<td>
<p>Limits for reporting: files are only reported whose
sizes are reduced both by a factor of <code>ratio</code> and by
<code>diff</code> bytes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This by default makes use of <code>qpdf</code>, available from
<a href="http://qpdf.sourceforge.net/" target="_blank">http://qpdf.sourceforge.net/</a> (including as a Windows binary) and
included with the CRAN macOS distribution of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.  If <code>gs_cmd</code>
is non-empty and <code>gs_quality != "none"</code>, GhostScript will used
first, then <code>qpdf</code> if it is available.  If
<code>gs_quality != "none"</code> and <code>gs_cmd</code> is <code>""</code>, an attempt
will be made to find a GhostScript executable.
</p>
<p><code>qpdf</code> and/or <code>gs_cmd</code> are run on all PDF files found,
and those which are reduced in size by at least 10% and 10Kb are
replaced.
</p>
<p>The strategy of our use of <code>qpdf</code> is to (losslessly) compress
both PDF streams and objects.  GhostScript compresses streams and more
(including downsampling and compressing embedded images) and
consequently is much slower and may lose quality (but can also produce
much smaller PDF files).  However, quality <code>"ebook"</code> is perfectly
adequate for screen viewing and printing on laser printers.
</p>
<p>Where PDF files are changed they will become PDF version 1.5 files:
these have been supported by Acrobat Reader since version 6 in 2003,
so this is very unlikely to cause difficulties.
</p>
<p>Stream compression is what most often has large gains.  Most PDF
documents are generated with object compression, but this does not
seem to be the default for MiKTeX's <code>pdflatex</code>.  For some PDF
files (and especially package vignettes), using GhostScript can
dramatically reduce the space taken by embedded images (often
screenshots).
</p>
<p>Where both GhostScript and <code>qpdf</code> are selected (when
<code>gs_quality != "none"</code> and both executables are found), they are
run in that order and the size reductions apply to the total
compression achieved.
</p>


<h3>Value</h3>

<p>An object of class <code>c("compactPDF", "data.frame")</code>.
This has two columns, the old and new sizes in bytes for the files
that were changed.
</p>
<p>There are <code>format</code> and <code>print</code> methods: the latter passes
<code>...</code> to the format method, so will accept <code>ratio</code> and
<code>diff</code> arguments.
</p>


<h3>Note</h3>

<p>The external tools used may change in future releases.
</p>
<p>Versions of GhostScript 9.06 and later give several times better
compression than 9.05 on some vignettes in CRAN packages.
</p>


<h3>See Also</h3>

<p><code><a href="#checkRdaFiles">resaveRdaFiles</a></code>.
</p>
<p>Many other (and sometimes more effective) tools to compact PDF files
are available, including Adobe Acrobat (not Reader).
See the ‘Writing R Extensions’ manual.
</p>

<hr>
</div>
<div class="container manual-page" id="CRANtools">

<a href="#CRANtools" class="help-page-title"><h2>CRAN Package Repository Tools</h2></a>

<h3>Description</h3>

<p>Tools for obtaining information about current packages in the
<abbr><span class="acronym">CRAN</span></abbr> package repository, and their check status.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">CRAN_package_db<span class="token punctuation">(</span><span class="token punctuation">)</span>

CRAN_check_results<span class="token punctuation">(</span>flavors <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
CRAN_check_details<span class="token punctuation">(</span>flavors <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
CRAN_check_issues<span class="token punctuation">(</span><span class="token punctuation">)</span>
summarize_CRAN_check_status<span class="token punctuation">(</span>packages<span class="token punctuation">,</span>
                            results <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
                            details <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
                            issues <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>packages</code></td>
<td>
<p>a character vector of package names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flavors</code></td>
<td>
<p>a character vector of <abbr><span class="acronym">CRAN</span></abbr> check flavor names, or
<code>NULL</code> (default), corresponding to all available flavors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>the return value of <code>CRAN_check_results()</code>
(default), or a subset of this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>details</code></td>
<td>
<p>the return value of <code>CRAN_check_details()</code>
(default), or a subset of this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>issues</code></td>
<td>
<p>the return value of <code>CRAN_check_issues()</code>
(default), or a subset of this.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>CRAN_package_db()</code> returns a data frame with character columns
containing most ‘<span class="file">DESCRIPTION</span>’ metadata for the current packages
in the CRAN package repository, including in particular the
Description and Maintainer information not provided by
<code>utils::<a href="https://r-universe.dev/manuals/utils.html#available.packages">available.packages</a>()</code>.
</p>
<p><code>CRAN_check_results()</code> returns a data frame with the basic
<abbr><span class="acronym">CRAN</span></abbr> package check results including timings, with columns
<code>Package</code>, <code>Flavor</code> and <code>Status</code> giving the package
name, check flavor, and overall check status, respectively.
</p>
<p><code>CRAN_check_details()</code> returns a data frame inheriting from class
<code>"check_details"</code> (which has useful <code>print</code> and
<code>format</code> methods) with details on the check results, providing
check name, status and output for every non-OK check (<em>via</em>
columns <code>Check</code>, <code>Status</code> and <code>Output</code>, respectively).
Packages with all-OK checks are indicated via a <code>*</code> <code>Check</code>
wildcard name and OK <code>Status</code>.
</p>
<p><code>CRAN_check_issues()</code> returns a character frame with additional
check issues (including the memory-access check results made available
from <a href="https://www.stats.ox.ac.uk/pub/bdr/memtests/" target="_blank">https://www.stats.ox.ac.uk/pub/bdr/memtests/</a>) as a
character frame with variables <code>Package</code>, <code>Version</code>,
<code>kind</code> (an identifier for the issue) and <code>href</code> (a URL with
information on the issue).
</p>
<p><code>CRAN_memtest_notes()</code> is now deprecated, with its functionality
integrated into that of <code>CRAN_check_issues()</code>.
</p>


<h3>Value</h3>

<p>See ‘Details’.  Note that the results are collated on
<abbr><span class="acronym">CRAN</span></abbr>: currently this is done in a locale which sorts
<code>aAbB</code> ....
</p>


<h3>Which CRAN?</h3>

<p>The main functions access a <abbr><span class="acronym">CRAN</span></abbr> mirror specified by the
environment variable <span class="env">R_CRAN_WEB</span>, defaulting to one specified in
the <code>"repos"</code> option.  Otherwise the entry in the
‘<span class="file">repositories</span>’ file (see <code><a href="https://r-universe.dev/manuals/utils.html#setRepositories">setRepositories</a></code>) is used:
if that specifies <code>@CRAN@</code> (the default) or does not contain an
entry for CRAN then <a href="https://CRAN.R-project.org" target="_blank">https://CRAN.R-project.org</a> is used.
</p>
<p>The mirror to be used is reported by
<code>utils::<a href="https://r-universe.dev/manuals/utils.html#findCRANmirror">findCRANmirror</a>("web")</code>.
</p>
<p>Note that these functions access parts of <abbr><span class="acronym">CRAN</span></abbr> under
‘<span class="file">web/contrib</span>’ and ‘<span class="file">web/packages</span>’ so if you have specified a
mirror of just ‘<span class="file">src/contrib</span>’ for installing packages you will
need to set <span class="env">R_CRAN_WEB</span> to point to a full mirror.
</p>
<p>Internal functions <code>CRAN_aliases_db</code>, <code>CRAN_archive_db</code>,
<code>CRAN_current_db</code> and <code>CRAN_rdxrefs_db</code> (used by <code>R
  CMD check</code>) use <span class="env">R_CRAN_SRC</span> rather than <span class="env">R_CRAN_WEB</span>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## This can be rather slow  with a non-local CRAN mirror</span><span class="token comment">## and might fail (slowly) without Internet access in that case.</span>

set.seed<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>  <span class="token comment"># but the packages chosen will change as soon as CRAN does.</span>
pdb <span class="token operator">&lt;-</span> CRAN_package_db<span class="token punctuation">(</span><span class="token punctuation">)</span>
dim<span class="token punctuation">(</span>pdb<span class="token punctuation">)</span>
<span class="token comment">## DESCRIPTION fields included:</span>
colnames<span class="token punctuation">(</span>pdb<span class="token punctuation">)</span>
<span class="token comment">## Summarize publication dates:</span>
summary<span class="token punctuation">(</span>as.Date<span class="token punctuation">(</span>pdb<span class="token operator">$</span>Published<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## Summarize numbers of packages according to maintainer:</span>
summary<span class="token punctuation">(</span>lengths<span class="token punctuation">(</span>split<span class="token punctuation">(</span>pdb<span class="token operator">$</span>Package<span class="token punctuation">,</span> pdb<span class="token operator">$</span>Maintainer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## Packages with 'LASSO' in their Description:</span>
pdb<span class="token operator">$</span>Package<span class="token punctuation">[</span>grepl<span class="token punctuation">(</span><span class="token string">"LASSO"</span><span class="token punctuation">,</span> pdb<span class="token operator">$</span>Description<span class="token punctuation">)</span><span class="token punctuation">]</span>

results <span class="token operator">&lt;-</span> CRAN_check_results<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">## Available variables:</span>
names<span class="token punctuation">(</span>results<span class="token punctuation">)</span>
<span class="token comment">## Tabulate overall check status according to flavor:</span>
with<span class="token punctuation">(</span>results<span class="token punctuation">,</span> table<span class="token punctuation">(</span>Flavor<span class="token punctuation">,</span> Status<span class="token punctuation">)</span><span class="token punctuation">)</span>

details <span class="token operator">&lt;-</span> CRAN_check_details<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">## Available variables:</span>
names<span class="token punctuation">(</span>details<span class="token punctuation">)</span>
<span class="token comment">## Tabulate checks according to their status:</span>
tab <span class="token operator">&lt;-</span> with<span class="token punctuation">(</span>details<span class="token punctuation">,</span> table<span class="token punctuation">(</span>Check<span class="token punctuation">,</span> Status<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## Inspect some installation problems:</span>
bad <span class="token operator">&lt;-</span> subset<span class="token punctuation">(</span>details<span class="token punctuation">,</span>
              <span class="token punctuation">(</span><span class="token punctuation">(</span>Check <span class="token operator">==</span> <span class="token string">"whether package can be installed"</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>
               <span class="token punctuation">(</span>Status <span class="token operator">!=</span> <span class="token string">"OK"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## Show a random sample of up to 6</span>
head<span class="token punctuation">(</span>bad<span class="token punctuation">[</span>sample<span class="token punctuation">(</span>seq_len<span class="token punctuation">(</span>NROW<span class="token punctuation">(</span>bad<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NROW<span class="token punctuation">(</span>bad<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>

issues <span class="token operator">&lt;-</span> CRAN_check_issues<span class="token punctuation">(</span><span class="token punctuation">)</span>
head<span class="token punctuation">(</span>issues<span class="token punctuation">)</span>
<span class="token comment">## Show counts of issues according to kind:</span>
table<span class="token punctuation">(</span>issues<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">"kind"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">## Summarize CRAN check status for 10 randomly-selected packages</span>
<span class="token comment">## (reusing the information already read in):</span>
pos <span class="token operator">&lt;-</span> sample<span class="token punctuation">(</span>seq_len<span class="token punctuation">(</span>NROW<span class="token punctuation">(</span>pdb<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10L</span><span class="token punctuation">)</span>
summarize_CRAN_check_status<span class="token punctuation">(</span>pdb<span class="token punctuation">[</span>pos<span class="token punctuation">,</span> <span class="token string">"Package"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                            results<span class="token punctuation">,</span> details<span class="token punctuation">,</span> issues<span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="delimMatch">

<a href="#delimMatch" class="help-page-title"><h2>Delimited Pattern Matching</h2></a>

<h3>Description</h3>

<p>Match delimited substrings in a character vector, with proper nesting.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">delimMatch<span class="token punctuation">(</span>x<span class="token punctuation">,</span> delim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"{"</span><span class="token punctuation">,</span> <span class="token string">"}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> syntax <span class="token operator">=</span> <span class="token string">"Rd"</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delim</code></td>
<td>
<p>a character vector of length 2 giving the start and end
delimiters.  Future versions might allow for arbitrary regular
expressions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>syntax</code></td>
<td>
<p>currently, always the string <code>"Rd"</code> indicating Rd
syntax (i.e., ‘<span class="samp">⁠%⁠</span>’ starts a comment extending till the end of
the line, and ‘<span class="samp">⁠\⁠</span>’ escapes).  Future versions might know about
other syntax, perhaps via ‘syntax tables’ allowing to
flexibly specify comment, escape, and quote characters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An integer vector of the same length as <code>x</code> giving the starting
position (in characters) of the first match, or <code class="reqn"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></code> if there is
none, with attribute <code>"match.length"</code> giving the length (in
characters) of the matched text (or <code class="reqn"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></code> for no match).
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#grep">regexpr</a></code> for ‘simple’ pattern matching.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">x <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"\\value{foo}"</span><span class="token punctuation">,</span> <span class="token string">"function(bar)"</span><span class="token punctuation">)</span>
delimMatch<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
delimMatch<span class="token punctuation">(</span>x<span class="token punctuation">,</span> c<span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">,</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="dependsOnPkgs">

<a href="#dependsOnPkgs" class="help-page-title"><h2>Find Reverse Dependencies</h2></a>

<h3>Description</h3>

<p>Find ‘reverse’ dependencies of packages, that is those packages
which depend on this one, and (optionally) so on recursively.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">dependsOnPkgs<span class="token punctuation">(</span>pkgs<span class="token punctuation">,</span>
              dependencies <span class="token operator">=</span> <span class="token string">"strong"</span><span class="token punctuation">,</span>
              recursive <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
              installed <span class="token operator">=</span>
              utils<span class="token operator">::</span>installed.packages<span class="token punctuation">(</span>lib.loc<span class="token punctuation">,</span> fields <span class="token operator">=</span> <span class="token string">"Enhances"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgs</code></td>
<td>
<p>a character vector of package names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dependencies</code></td>
<td>
<p>a character vector listing the types of
dependencies, a subset of
<code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string <code>"all"</code> is shorthand for that vector,
character string <code>"most"</code> for the same vector without
<code>"Enhances"</code>,
character string <code>"strong"</code> (default) for the first three
elements of that vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>logical: should reverse dependencies of reverse
dependencies (and so on) be included?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> library trees, or <code>NULL</code>
for all known trees (see <code><a href="https://r-universe.dev/manuals/base.html#libPaths">.libPaths</a></code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>installed</code></td>
<td>
<p>a result of calling <code><a href="https://r-universe.dev/manuals/utils.html#installed.packages">installed.packages</a></code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character vector of package names, which does not include any from
<code>pkgs</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#package_dependencies">package_dependencies</a>()</code> to get the regular
(“forward”) dependencies of a package.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## there are few dependencies in a vanilla R installation:</span><span class="token comment">## lattice may not be installed</span>
dependsOnPkgs<span class="token punctuation">(</span><span class="token string">"lattice"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="encoded">

<a href="#encoded" class="help-page-title"><h2>Translate non-ASCII Text to LaTeX Escapes</h2></a>

<h3>Description</h3>

<p>Translate non-ASCII characters in text to LaTeX escape sequences.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">encoded_text_to_latex<span class="token punctuation">(</span>x<span class="token punctuation">,</span>
                      encoding <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"latin1"</span><span class="token punctuation">,</span> <span class="token string">"latin2"</span><span class="token punctuation">,</span> <span class="token string">"latin9"</span><span class="token punctuation">,</span>
                                   <span class="token string">"UTF-8"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>the encoding to be assumed.  <code>"latin9"</code> is
officially ISO-8859-15 or Latin-9, but known as latin9 to LaTeX's
<code>inputenc</code> package.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Non-ASCII characters in <code>x</code> are replaced by an appropriate LaTeX
escape sequence, or ‘<span class="samp">⁠?⁠</span>’ if there is no appropriate sequence.
</p>
<p>Even if there is an appropriate sequence, it may not be supported by
the font in use.  Hyphen is mapped to ‘<span class="samp">⁠\-⁠</span>’.
</p>


<h3>Value</h3>

<p>A character vector of the same length as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#iconv">iconv</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">x <span class="token operator">&lt;-</span> <span class="token string">"fa\xE7ile"</span>
encoded_text_to_latex<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"latin1"</span><span class="token punctuation">)</span>
<span class="token comment">## Not run: </span>
<span class="token comment">## create a tex file to show the upper half of 8-bit charsets</span>
x <span class="token operator">&lt;-</span> rawToChar<span class="token punctuation">(</span>as.raw<span class="token punctuation">(</span><span class="token number">160</span><span class="token operator">:</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> multiple <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>x <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ncol <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
xx <span class="token operator">&lt;-</span> x
xx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> encoded_text_to_latex<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"latin1"</span><span class="token punctuation">)</span> <span class="token comment"># or latin2 or latin9</span>
xx <span class="token operator">&lt;-</span> apply<span class="token punctuation">(</span>xx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> paste<span class="token punctuation">,</span> collapse <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">)</span>
con <span class="token operator">&lt;-</span> file<span class="token punctuation">(</span><span class="token string">"test-encoding.tex"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>
header <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span>
<span class="token string">"\\documentclass{article}"</span><span class="token punctuation">,</span>
<span class="token string">"\\usepackage[T1]{fontenc}"</span><span class="token punctuation">,</span>
<span class="token string">"\\usepackage{Rd}"</span><span class="token punctuation">,</span>
<span class="token string">"\\begin{document}"</span><span class="token punctuation">,</span>
<span class="token string">"\\HeaderA{test}{}{test}"</span><span class="token punctuation">,</span>
<span class="token string">"\\begin{Details}\relax"</span><span class="token punctuation">,</span>
<span class="token string">"\\Tabular{cccccccccccccccc}{"</span><span class="token punctuation">)</span>
trailer <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"}"</span><span class="token punctuation">,</span> <span class="token string">"\\end{Details}"</span><span class="token punctuation">,</span> <span class="token string">"\\end{document}"</span><span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>header<span class="token punctuation">,</span> con<span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span>xx<span class="token punctuation">,</span> <span class="token string">"\\"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> con<span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>trailer<span class="token punctuation">,</span> con<span class="token punctuation">)</span>
close<span class="token punctuation">(</span>con<span class="token punctuation">)</span>
<span class="token comment">## and some UTF_8 chars</span>
x <span class="token operator">&lt;-</span> intToUtf8<span class="token punctuation">(</span>as.integer<span class="token punctuation">(</span>
    c<span class="token punctuation">(</span><span class="token number">160</span><span class="token operator">:</span><span class="token number">383</span><span class="token punctuation">,</span><span class="token number">0x0192</span><span class="token punctuation">,</span><span class="token number">0x02C6</span><span class="token punctuation">,</span><span class="token number">0x02C7</span><span class="token punctuation">,</span><span class="token number">0x02CA</span><span class="token punctuation">,</span><span class="token number">0x02D8</span><span class="token punctuation">,</span>
      <span class="token number">0x02D9</span><span class="token punctuation">,</span> <span class="token number">0x02DD</span><span class="token punctuation">,</span> <span class="token number">0x200C</span><span class="token punctuation">,</span> <span class="token number">0x2018</span><span class="token punctuation">,</span> <span class="token number">0x2019</span><span class="token punctuation">,</span> <span class="token number">0x201C</span><span class="token punctuation">,</span>
      <span class="token number">0x201D</span><span class="token punctuation">,</span> <span class="token number">0x2020</span><span class="token punctuation">,</span> <span class="token number">0x2022</span><span class="token punctuation">,</span> <span class="token number">0x2026</span><span class="token punctuation">,</span> <span class="token number">0x20AC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               multiple <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
x <span class="token operator">&lt;-</span> matrix<span class="token punctuation">(</span>x<span class="token punctuation">,</span> ncol <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">,</span> byrow <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
xx <span class="token operator">&lt;-</span> x
xx<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&lt;-</span> encoded_text_to_latex<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span>
xx <span class="token operator">&lt;-</span> apply<span class="token punctuation">(</span>xx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> paste<span class="token punctuation">,</span> collapse <span class="token operator">=</span> <span class="token string">"&amp;"</span><span class="token punctuation">)</span>
con <span class="token operator">&lt;-</span> file<span class="token punctuation">(</span><span class="token string">"test-utf8.tex"</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>header<span class="token punctuation">,</span> con<span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>paste<span class="token punctuation">(</span>xx<span class="token punctuation">,</span> <span class="token string">"\\"</span><span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> con<span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>trailer<span class="token punctuation">,</span> con<span class="token punctuation">)</span>
close<span class="token punctuation">(</span>con<span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="fileutils">

<a href="#fileutils" class="help-page-title"><h2>File Utilities</h2></a>

<h3>Description</h3>

<p>Utilities for listing files, and manipulating file paths.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">file_ext<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
file_path_as_absolute<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
file_path_sans_ext<span class="token punctuation">(</span>x<span class="token punctuation">,</span> compression <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>

list_files_with_exts<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> exts<span class="token punctuation">,</span> all.files <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                     full.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
list_files_with_type<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> type<span class="token punctuation">,</span> all.files <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                     full.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> OS_subdirs <span class="token operator">=</span> .OStype<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>character vector giving file paths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compression</code></td>
<td>
<p>logical: should compression extension ‘<span class="file">.gz</span>’,
‘<span class="file">.bz2</span>’ or ‘<span class="file">.xz</span>’ be removed first?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string with the path name to a directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exts</code></td>
<td>
<p>a character vector of possible file extensions (excluding
the leading dot).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all.files</code></td>
<td>
<p>a logical.  If <code>FALSE</code> (default), only visible
files are considered; if <code>TRUE</code>, all files are used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full.names</code></td>
<td>
<p>a logical indicating whether the full paths of the
files found are returned (default), or just the file names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a character string giving the ‘type’ of the files
to be listed, as characterized by their extensions.  Currently,
possible values are <code>"code"</code> (R code), <code>"data"</code> (data
sets), <code>"demo"</code> (demos), <code>"docs"</code> (R documentation), and
<code>"vignette"</code> (vignettes).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OS_subdirs</code></td>
<td>
<p>a character vector with the names of OS-specific
subdirectories to possibly include in the listing of R code and
documentation files.  By default, the value of the environment
variable <span class="env">R_OSTYPE</span>, or if this is empty, the value of
<code><a href="https://r-universe.dev/manuals/base.html#Platform">.Platform</a>$OS.type</code>, is used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>file_ext</code> returns the file (name) extensions (excluding the
leading dot).
(Only purely alphanumeric extensions are recognized.)
</p>
<p><code>file_path_as_absolute</code> turns a possibly relative file path
absolute, performing tilde expansion if necessary.  This is a wrapper
for <code><a href="https://r-universe.dev/manuals/base.html#normalizePath">normalizePath</a></code>.  Currently, <code>x</code> must be a single
existing path.
</p>
<p><code>file_path_sans_ext</code> returns the file paths without extensions
(and the leading dot).
(Only purely alphanumeric extensions are recognized.)
</p>
<p><code>list_files_with_exts</code> returns the paths or names of the files in
directory <code>dir</code> with extension matching one of the elements of
<code>exts</code>.  Note that by default, full paths are returned, and that
only visible files are used.
</p>
<p><code>list_files_with_type</code> returns the paths of the files in <code>dir</code>
of the given ‘type’, as determined by the extensions recognized
by <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.  When listing R code and documentation files, files in
OS-specific subdirectories are included if present according to the
value of <code>OS_subdirs</code>.  Note that by default, full paths are
returned, and that only visible files are used.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#file.path">file.path</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#file.info">file.info</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#list.files">list.files</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">dir <span class="token operator">&lt;-</span> file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"library"</span><span class="token punctuation">,</span> <span class="token string">"stats"</span><span class="token punctuation">)</span>
list_files_with_exts<span class="token punctuation">(</span>file.path<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">"demo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">)</span>
list_files_with_type<span class="token punctuation">(</span>file.path<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">"demo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"demo"</span><span class="token punctuation">)</span> <span class="token comment"># the same</span>
file_path_sans_ext<span class="token punctuation">(</span>list.files<span class="token punctuation">(</span>file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token string">"modules"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="find_gs_cmd">

<a href="#find_gs_cmd" class="help-page-title"><h2>
Find a GhostScript Executable
</h2></a>

<h3>Description</h3>

<p>Find a GhostScript executable in a cross-platform way.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">find_gs_cmd<span class="token punctuation">(</span>gs_cmd <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>gs_cmd</code></td>
<td>
<p>The name, full or partial path of a GhostScript executable.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The details differ by platform.
</p>
<p>On a Unix-alike, the GhostScript executable is usually called
<code>gs</code>.  The name (and possibly path) of the command is taken
first from argument <code>gs_cmd</code> then from the environment variable
<span class="env">R_GSCMD</span> and default <code>gs</code>.  This is then looked for on the
system path and the value returned if a match is found.
</p>
<p>On Windows, the name of the command is taken from argument
<code>gs_cmd</code> then from the environment variables <span class="env">R_GSCMD</span> and
<span class="env">GSC</span>.  If neither of those produces a suitable command name,
<code>gswin64c</code> and <code>gswin32c</code> are tried in turn.  In all
cases the command is looked for on the system <span class="env">PATH</span>.
</p>
<p>Note that on Windows (and some other OSes) there are separate
GhostScript executables to display Postscript/PDF files and to
manipulate them: this function looks for the latter.  
</p>


<h3>Value</h3>

<p>A character string giving the full path to a GhostScript executable if
one was found, otherwise an empty string.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span><span class="token comment">## Suppose a Solaris system has GhostScript 9.00 on the path and</span><span class="token comment">## 9.07 in /opt/csw/bin.  Then one might set</span>
Sys.setenv<span class="token punctuation">(</span>R_GSCMD <span class="token operator">=</span> <span class="token string">"/opt/csw/bin/gs"</span><span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="getVignetteInfo">

<a href="#getVignetteInfo" class="help-page-title"><h2>Get Information on Installed Vignettes</h2></a>

<h3>Description</h3>

<p>This function gets information on installed vignettes.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">getVignetteInfo<span class="token punctuation">(</span>package <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> all <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>

<p>Which package to look in, or <code>NULL</code> for all packages.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>

<p>Which library to look in.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>

<p>Whether to search all installed packages, or just attached packages.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A matrix with columns
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Package</code></td>
<td>
<p>the name of the package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Dir</code></td>
<td>
<p>the directory where the package is installed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Topic</code></td>
<td>
<p>the name of the vignette</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>File</code></td>
<td>
<p>the base filename of the source of the vignette</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Title</code></td>
<td>
<p>the title of the vignette</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>R</code></td>
<td>
<p>the tangled R source from the vignette</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PDF</code></td>
<td>
<p>the PDF or HTML file for display</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The last column of the result is named <code>PDF</code> for historical reasons, 
but it may contain a filename of a PDF or HTML document.
</p>


<h3>See Also</h3>

<p><code><a href="#buildVignettes">pkgVignettes</a></code> is a similar function that can work on
an uninstalled package.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">getVignetteInfo<span class="token punctuation">(</span><span class="token string">"grid"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="HTMLheader">

<a href="#HTMLheader" class="help-page-title"><h2>Generate a Standard HTML Header for R Help</h2></a>

<h3>Description</h3>

<p>This function generates the standard HTML header used on R help pages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">HTMLheader<span class="token punctuation">(</span>title <span class="token operator">=</span> <span class="token string">"R"</span><span class="token punctuation">,</span> logo <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> up <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
           top <span class="token operator">=</span> file.path<span class="token punctuation">(</span>Rhome<span class="token punctuation">,</span> <span class="token string">"doc/html/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           Rhome <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
           css <span class="token operator">=</span> file.path<span class="token punctuation">(</span>Rhome<span class="token punctuation">,</span> <span class="token string">"doc/html/R.css"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           headerTitle <span class="token operator">=</span> paste<span class="token punctuation">(</span><span class="token string">"R:"</span><span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">,</span>
           outputEncoding <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>

<p>The title to display and use in the HTML headers.  Should have had any
HTML escaping already done.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logo</code></td>
<td>

<p>Whether to display the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> logo after the title.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>up</code></td>
<td>

<p>Which page (if any) to link to on the “up” button.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>top</code></td>
<td>

<p>Which page (if any) to link to on the “top” button.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Rhome</code></td>
<td>

<p>A <b>relative</b> path to the R home directory.  See the ‘Details’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>css</code></td>
<td>

<p>The relative URL for the Cascading Style Sheet.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>headerTitle</code></td>
<td>

<p>The title used in the headers.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputEncoding</code></td>
<td>

<p>The declared encoding for the whole page.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>up</code> and <code>top</code> links should be relative to the current page.
The <code>Rhome</code> path default works with dynamic help; for static help, a
relative path (e.g., ‘<span class="file">../..</span>’) to it should be used.
</p>


<h3>Value</h3>

<p>A character vector containing the lines of an HTML header which can be used
to start a page in the R help system.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">cat<span class="token punctuation">(</span>HTMLheader<span class="token punctuation">(</span><span class="token string">"This is a sample header"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sep<span class="token operator">=</span><span class="token string">"\n"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="HTMLlinks">

<a href="#HTMLlinks" class="help-page-title"><h2>Collect HTML Links from Package Documentation</h2></a>

<h3>Description</h3>

<p>Compute relative file paths for URLs to other package's installed HTML
documentation.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">findHTMLlinks<span class="token punctuation">(</span>pkgDir <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> level <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgDir</code></td>
<td>
<p>the top-level directory of an installed package.  The
default indicates no package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>character vector describing the location of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> library
trees to scan: the default indicates <code><a href="https://r-universe.dev/manuals/base.html#libPaths">.libPaths</a>()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>Which level(s) to include.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>findHTMLlinks</code> tries to resolve links from one help page to
another.  It uses in decreasing priority
</p>

<ul>
<li>
<p> The package in <code>pkgDir</code>: this is used when converting
HTML help for that package (level 0).
</p>
</li>
<li>
<p> The base and recommended packages (level 1).
</p>
</li>
<li>
<p> Other packages found in the library trees specified by
<code>lib.loc</code> in the order of the trees and alphabetically within a
library tree (level 2).
</p>
</li>
</ul>
<h3>Value</h3>

<p>A named character vector of file paths, relative to the ‘<span class="file">html</span>’
directory of an installed package.  So these are of the form
‘<span class="file">"../../<var>somepkg</var>/html/<var>sometopic</var>.html"</span>’.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley</p>

<hr>
</div>
<div class="container manual-page" id="loadRdMacros">

<a href="#loadRdMacros" class="help-page-title"><h2>Load User-defined Rd Help System Macros</h2></a>

<h3>Description</h3>

<p>Loads macros from an ‘<span class="file">.Rd</span>’ file, or from several ‘<span class="file">.Rd</span>’
files contained in a package.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">loadRdMacros<span class="token punctuation">(</span>file<span class="token punctuation">,</span> macros <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
loadPkgRdMacros<span class="token punctuation">(</span>pkgdir<span class="token punctuation">,</span> macros <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>

<p>A file in Rd format containing macro definitions.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>macros</code></td>
<td>

<p>optionally, a previous set of macro definitions, in the format
expected by the <code><a href="#parse_Rd">parse_Rd</a></code> <code>macros</code> argument. 
<code>loadPkgRdMacros</code> loads the system Rd macros by default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkgdir</code></td>
<td>

<p>The base directory of a source package or an installed package.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The Rd files parsed by these functions should contain only macro
definitions; a warning will be issued if anything else other than
comments or white space is found.
</p>
<p>The <code>macros</code> argument may be a filename of a base set of macros,
or the result of a previous call to <code>loadRdMacros</code> or
<code>loadPkgRdMacros</code> in the same session.  These results should be
assumed to be valid only within the current session.
</p>
<p>The <code>loadPkgRdMacros</code> function first looks for an <code>"RdMacros"</code>
entry in the package ‘<span class="file">DESCRIPTION</span>’ file.  If present, it should
contain a comma-separated list of other package names; their macros
will be loaded before those of the current package.  It will then look
in the current package for ‘<span class="file">.Rd</span>’ files in the ‘<span class="file">man/macros</span>’
or ‘<span class="file">help/macros</span>’ subdirectories, and load those.
</p>


<h3>Value</h3>

<p>These functions each return an environment containing objects with the
names of the newly defined macros from the last file processed.  The
parent environment will be macros from the previous file, and so on.
The first file processed will have <code><a href="https://r-universe.dev/manuals/base.html#environment">emptyenv</a>()</code> as its
parent.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>References</h3>

<p>See the ‘Writing R Extensions’ manual for the syntax of Rd files,
or <a href="https://developer.r-project.org/parseRd.pdf" target="_blank">https://developer.r-project.org/parseRd.pdf</a> for a technical
discussion.
</p>


<h3>See Also</h3>

<p><code><a href="#parse_Rd">parse_Rd</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">f <span class="token operator">&lt;-</span> tempfile<span class="token punctuation">(</span><span class="token punctuation">)</span>
writeLines<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span>
    r<span class="token string">"(\newcommand{\Rlogo}{\if{html}{\figure{Rlogo.svg}{options: width=100 alt="</span>R logo<span class="token string">"}})"</span><span class="token punctuation">,</span>
    r<span class="token string">"(\if{latex}{\figure{Rlogo.pdf}{options: width=0.5in}}})"</span>
<span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span>
m <span class="token operator">&lt;-</span> loadRdMacros<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
ls<span class="token punctuation">(</span>m<span class="token punctuation">)</span>
ls<span class="token punctuation">(</span>parent.env<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>  
ls<span class="token punctuation">(</span>parent.env<span class="token punctuation">(</span>parent.env<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
parse_Rd<span class="token punctuation">(</span>textConnection<span class="token punctuation">(</span>r<span class="token string">"(\Rlogo)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fragment <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> macros <span class="token operator">=</span> m<span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="make_translations_pkg">

<a href="#make_translations_pkg" class="help-page-title"><h2>Package the Current Translations in the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> Sources</h2></a>

<h3>Description</h3>

<p>A utility for R Core members to prepare a package of updated translations.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">make_translations_pkg<span class="token punctuation">(</span>srcdir<span class="token punctuation">,</span> outDir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span> append <span class="token operator">=</span> <span class="token string">"-1"</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>srcdir</code></td>
<td>
<p>The <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> source directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outDir</code></td>
<td>
<p>The directory into which to place the prepared package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>The suffix for the package version number,
e.g. <code>3.0.0-1</code> will be the default in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.0.0.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This extracts the translations in a current <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> source distribution and
packages them as a source package called <span class="pkg">translations</span> which can
be distributed on CRAN and installed by
<code><a href="https://r-universe.dev/manuals/utils.html#update.packages">update.packages</a></code>.  This allows e.g. the translations
shipped in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.x.y to be updated to those currently in
‘<span class="samp">⁠R-patched⁠</span>’, even by a user without administrative privileges.
</p>
<p>The package has a ‘<span class="samp">⁠Depends⁠</span>’ field which restricts it to versions
<code>3.x.*</code> for a single <code>x</code>.
</p>

<hr>
</div>
<div class="container manual-page" id="makeLazyLoading">

<a href="#makeLazyLoading" class="help-page-title"><h2>Lazy Loading of Packages</h2></a>

<h3>Description</h3>

<p>Tools for lazy loading of packages from a database.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">makeLazyLoading<span class="token punctuation">(</span>package<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> compress <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
                keep.source <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"keep.source.pkgs"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                keep.parse.data <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"keep.parse.data.pkgs"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                set.install.dir <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>package name string</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>library trees, as in <code>library</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.source</code></td>
<td>
<p>logical; should sources be kept when saving from source</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.parse.data</code></td>
<td>
<p>logical; should parse data be kept with sources
when <code>keep.source</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress</code></td>
<td>
<p>logical; whether to compress entries on the database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>set.install.dir</code></td>
<td>
<p>character or null; if not null, set installation
directory to this value before serializing internal data structures
(for internal use, staged installation)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A tool to set up packages for lazy loading from a database.  For
packages other than <span class="pkg">base</span> you can use
<code>makeLazyLoading(package)</code> to convert them to use lazy loading.
</p>
<p>This is done when a package is installed.
</p>


<h3>Author(s)</h3>

<p>Luke Tierney and Brian Ripley</p>

<hr>
</div>
<div class="container manual-page" id="makevars">

<a href="#makevars" class="help-page-title"><h2>User and Site Compilation Variables</h2></a>

<h3>Description</h3>

<p>Determine the location of the user and site specific ‘<span class="file">Makevars</span>’
files for customizing package compilation.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">makevars_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
makevars_site<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>


<h3>Details</h3>

<p>Package maintainers can use these functions to employ user and site
specific compilation settings also for compilations not using <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s
mechanisms (in particular, custom compilations in subdirectories of
‘<span class="file">src</span>’), e.g., by adding configure code calling <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> with
<code>cat(tools::makevars_user())</code> or
<code>cat(tools::makevars_site())</code>, and if non-empty passing this with
<span class="option">-f</span> to custom Make invocations.
</p>


<h3>Value</h3>

<p>A character string with the path to the user or site specific
‘<span class="file">Makevars</span>’ file, or an empty character vector if there is no such
file.
</p>


<h3>See Also</h3>

<p>Section ‘Customizing package compilation’ in the
‘R Installation and Administration’ manual.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">makevars_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
makevars_site<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="md5sum">

<a href="#md5sum" class="help-page-title"><h2>Compute MD5 Checksums</h2></a>

<h3>Description</h3>

<p>Compute the 32-byte MD5 hashes of one or more files.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">md5sum<span class="token punctuation">(</span>files<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>files</code></td>
<td>
<p>character. The paths of file(s) whose contents are to be hashed.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>A MD5 ‘hash’ or ‘checksum’ or ‘message digest’ is
a 128-bit summary of the file contents represented by 32 hexadecimal
digits.  Files with different MD5 sums are different: only very
exceptionally (and usually with the intent to deceive) are those with
the same sums different.
</p>
<p>On Windows all files are read in binary mode (as the <code>md5sum</code>
utilities there do): on other OSes the files are read in the default
mode (almost always text mode where there is more than one).
</p>
<p>MD5 sums are used as a check that <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> packages have been unpacked
correctly and not subsequently accidentally modified.
</p>


<h3>Value</h3>

<p>A character vector of the same length as <code>files</code>, with names
equal to <code>files</code> (possibly expanded).  The elements will be
<code>NA</code> for non-existent or unreadable files, otherwise a
32-character string of hexadecimal digits.
</p>


<h3>Source</h3>

<p>The underlying C code was written by Ulrich Drepper and extracted from
a 2001 release of <code>glibc</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#checkMD5sums">checkMD5sums</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">as.vector<span class="token punctuation">(</span>md5sum<span class="token punctuation">(</span>dir<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">"^COPY"</span><span class="token punctuation">,</span> full.names <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="package_dependencies">

<a href="#package_dependencies" class="help-page-title"><h2>Computations on the Dependency Hierarchy of Packages</h2></a>

<h3>Description</h3>

<p>Find (recursively) dependencies or reverse dependencies of packages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">package_dependencies<span class="token punctuation">(</span>packages <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> db <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> which <span class="token operator">=</span> <span class="token string">"strong"</span><span class="token punctuation">,</span>
	             recursive <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                     verbose <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"verbose"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>packages</code></td>
<td>
<p>a character vector of package names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>character matrix as from <code><a href="https://r-universe.dev/manuals/utils.html#available.packages">available.packages</a>()</code>
(with the default <code>NULL</code> the results of this call)
or data frame variants thereof.  Alternatively, a package database
like the one available from
<a href="https://cran.r-project.org/web/packages/packages.rds" target="_blank">https://cran.r-project.org/web/packages/packages.rds</a>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>a character vector listing the types of
dependencies, a subset of
<code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string <code>"all"</code> is shorthand for that vector,
character string <code>"most"</code> for the same vector without
<code>"Enhances"</code>,
character string <code>"strong"</code> (default) for the first three
elements of that vector.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>a logical indicating whether (reverse) dependencies
of (reverse) dependencies (and so on) should be included, or a
character vector like <code>which</code> indicating the type of (reverse)
dependencies to be added recursively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reverse</code></td>
<td>
<p>logical: if <code>FALSE</code> (default), regular
dependencies are calculated, otherwise reverse dependencies.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical indicating if output should monitor the package
search cycles.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Named list with one element for each package in argument <code>packages</code>,
each consists of a character vector naming the (recursive) (reverse) dependencies
of that package.
</p>
<p>For given packages which are not found in the db, <code>NULL</code> entries are returned,
as opposed to <code>character(0)</code> entries which indicate no dependencies.
</p>


<h3>See Also</h3>

<p><code><a href="#dependsOnPkgs">dependsOnPkgs</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">myPkgs <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span><span class="token string">"MASS"</span><span class="token punctuation">,</span> <span class="token string">"Matrix"</span><span class="token punctuation">,</span> <span class="token string">"KernSmooth"</span><span class="token punctuation">,</span> <span class="token string">"class"</span><span class="token punctuation">,</span> <span class="token string">"cluster"</span><span class="token punctuation">,</span> <span class="token string">"codetools"</span><span class="token punctuation">)</span>
pdb <span class="token operator">&lt;-</span> available.packages<span class="token punctuation">(</span>repos <span class="token operator">=</span> findCRANmirror<span class="token punctuation">(</span><span class="token string">"web"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
system.time<span class="token punctuation">(</span>
dep1 <span class="token operator">&lt;-</span> package_dependencies<span class="token punctuation">(</span>myPkgs<span class="token punctuation">,</span> db <span class="token operator">=</span> pdb<span class="token punctuation">)</span> <span class="token comment"># all arguments at default</span>
<span class="token punctuation">)</span> <span class="token comment"># very fast</span>
utils<span class="token operator">::</span>str<span class="token punctuation">(</span>dep1<span class="token punctuation">,</span> vec.len<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

system.time<span class="token punctuation">(</span> <span class="token comment">## reverse dependencies, recursively --- takes much longer:</span>
deps <span class="token operator">&lt;-</span> package_dependencies<span class="token punctuation">(</span>myPkgs<span class="token punctuation">,</span> db <span class="token operator">=</span> pdb<span class="token punctuation">,</span> which <span class="token operator">=</span> <span class="token string">"most"</span><span class="token punctuation">,</span>
                             recursive <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token comment"># seen ~ 10 seconds</span>

lengths<span class="token punctuation">(</span>deps<span class="token punctuation">)</span> <span class="token comment"># 2020-05-03: all are 16053, but codetools with 16057</span>

<span class="token comment">## install.packages(dependencies = TRUE) installs 'most' dependencies</span>
<span class="token comment">## and the strong recursive dependencies of these: these dependencies</span>
<span class="token comment">## can be obtained using 'which = "most"' and 'recursive = "strong"'.</span>
<span class="token comment">## To illustrate on the first packages with non-missing Suggests:</span>
packages <span class="token operator">&lt;-</span> pdb<span class="token punctuation">[</span>head<span class="token punctuation">(</span>which<span class="token punctuation">(</span><span class="token operator">!</span>is.na<span class="token punctuation">(</span>pdb<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">"Suggests"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Package"</span><span class="token punctuation">]</span>
package_dependencies<span class="token punctuation">(</span>packages<span class="token punctuation">,</span> db <span class="token operator">=</span> pdb<span class="token punctuation">,</span>
                     which <span class="token operator">=</span> <span class="token string">"most"</span><span class="token punctuation">,</span> recursive <span class="token operator">=</span> <span class="token string">"strong"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="package_native_routine_registration_skeleton">

<a href="#package_native_routine_registration_skeleton" class="help-page-title"><h2>
Write Skeleton for Adding Native Routine Registration to a Package
</h2></a>

<h3>Description</h3>

<p>Write a skeleton for adding native routine registration to a package.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">package_native_routine_registration_skeleton<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> con <span class="token operator">=</span> stdout<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    align <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> character_only <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> include_declarations <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>

<p>Top-level directory of a package.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>con</code></td>
<td>

<p>Connection on which to write the skeleton: can be specified as a
file path.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>align</code></td>
<td>

<p>Logical: should the registration tables be lined up in three
columns each?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>character_only</code></td>
<td>

<p>Logical: should only <code>.NAME</code> arguments specified by character
strings (and not as names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects nor expressions) be extracted?
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_declarations</code></td>
<td>

<p>Logical: should the output include declarations (also known as
‘prototypes’) for the registered routines?
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Registration is described in section
‘Registering native routines’ of
‘Writing R Extensions’.
This function produces a skeleton of the C code which
needs to be added to enable registration, conventionally as file
‘<span class="file">src/init.c</span>’ or appended to the sole C file of the package.
</p>
<p>This function examines the code in the ‘<span class="file">R</span>’ directory of the
package for calls to <code>.C</code>, <code>.Fortran</code>, <code>.Call</code> and
<code>.External</code> and creates registration information for those it can
make sense of.  If the number of arguments used cannot be determined
it will be recorded as <code>-1</code>: such values should be corrected.
</p>
<p>Optionally the skeleton will include declarations for the registered
routines: they should be checked against the C/Fortran source code,
not least as the number of arguments is taken from the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code.  For
<code>.Call</code> and <code>.External</code> calls they will often suffice, but
for <code>.C</code> and <code>.Fortran</code> calls the <code>void *</code> arguments
would ideally be replaced by the actual types.  Otherwise declarations
need to be included (they may exist earlier in that file if appending
to a file, or in a header file which can be included in
‘<span class="file">init.c</span>’).
</p>
<p>The default value of <code>character_only</code> is appropriate when working
on a package without any existing registration:
<code>character_only = FALSE</code>
can be used to suggest updates for a package which has been
extended since registration.  For the default value, if <code>.NAME</code>
values are found which are not character strings (e.g. names
or expressions) this is noted via a comment in the output.
</p>
<p>Packages which used the earlier form of creating <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects for native
symbols <em>via</em> additional arguments in a <code>useDynLib</code>
directive will probably most easily be updated to use registration
with <code>character_only = FALSE</code>.
</p>
<p>If an entry point is used with different numbers of arguments in the
package's <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code, an entry in the table (and optionally, a
declaration) is made for each number, and a comment placed in the
output.  This needs to be resolved: only <code>.External</code> calls can
have a variable number of arguments, which should be declared as
<code>-1</code>.
</p>
<p>A surprising number of <abbr><span class="acronym">CRAN</span></abbr> packages had calls in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code to
native routines not included in the package, which will lead to a
‘loading failed’ error during package installation when the
registration C code is added.
</p>
<p>Calls which do not name a routine such as <code>.Call(...)</code> will be
silently ignored.
</p>


<h3>Value</h3>

<p>None: the output is written to the connection <code>con</code>.
</p>


<h3>Extracting C/C++ prototypes</h3>

<p>There are several tools available to extract function declarations
from C or C++ code.
</p>
<p>For C code one can use <code>cproto</code>
(<a href="https://invisible-island.net/cproto/cproto.html" target="_blank">https://invisible-island.net/cproto/cproto.html</a>; Windows
executables are available), for
example
</p>
<pre>
    cproto -I/path/to/R/include -e *.c
  </pre>
<p><code>ctags</code> (commonly distributed with the OS)
covers C and C++., using something like
</p>
<pre>
    ctags -x *.c
  </pre>
<p>to list all function usages.
(The ‘Exuberant’ version allows a lot more control.)
</p>


<h3>Extracting Fortran prototypes</h3>

<p><code>gfortran</code> 9.2 and later can extract C prototypes for Fortran
subroutines with a special flag:
</p>
<pre>
    gfortran -c -fc-prototypes-external file.f
  </pre>
<p>although ironically not for functions declared <code>bind(C)</code>.
</p>


<h3>Note</h3>

<p>This only examines the ‘<span class="file">R</span>’ directory: it will not find
e.g. <code>.Call</code> calls used directly in examples, tests <em>etc</em>.
</p>
<p>Static code analysis is used to find the <code>.C</code> etc calls: it
<em>will</em> find those in parts of the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code ‘commented out’
by inclusion in <code>if(FALSE) { ... }</code>.
On the other hand, it will fail to find the entry points in
constructs like
</p>
<pre>
    .Call(if(int) "rle_i" else "rle_d", i, force)
  </pre>
<p>and does not know the value of variables in calls like
</p>
<pre>
    .Call (cfunction, ...)
    .Call(..., PACKAGE="sparseLTSEigen")
  </pre>
<p>(but if <code>character_only</code> is false, will extract the first as
<code>"cfunction"</code>).  Calls which have not been fully resolved will be
noted <em>via</em> comments in the output file.
</p>
<p>Call to entry points in other packages will be ignored if they have an
explicit (character string) <code>PACKAGE</code> argument.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#package.skeleton">package.skeleton</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span><span class="token comment">## with a completed splines/DESCRIPTION file,</span>
tools<span class="token operator">::</span>package_native_routine_registration_skeleton<span class="token punctuation">(</span><span class="token string">'splines'</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span>
<span class="token comment">## produces</span>
<span class="token comment">#include &lt;R.h&gt;</span>
<span class="token comment">#include &lt;Rinternals.h&gt;</span>
<span class="token comment">#include &lt;stdlib.h&gt; // for NULL</span>
<span class="token comment">#include &lt;R_ext/Rdynload.h&gt;</span>

<span class="token operator">/</span><span class="token operator">*</span> FIXME<span class="token operator">:</span> 
   Check these declarations against the C<span class="token operator">/</span>Fortran source code.
<span class="token operator">*</span><span class="token operator">/</span>

<span class="token operator">/</span><span class="token operator">*</span> .Call calls <span class="token operator">*</span><span class="token operator">/</span>
extern SEXP spline_basis<span class="token punctuation">(</span>SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">)</span><span class="token punctuation">;</span>
extern SEXP spline_value<span class="token punctuation">(</span>SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">,</span> SEXP<span class="token punctuation">)</span><span class="token punctuation">;</span>

static const R_CallMethodDef CallEntries<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">{</span><span class="token string">"spline_basis"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>DL_FUNC<span class="token punctuation">)</span> <span class="token operator">&amp;</span>spline_basis<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token string">"spline_value"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>DL_FUNC<span class="token punctuation">)</span> <span class="token operator">&amp;</span>spline_value<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token keyword">NULL</span><span class="token punctuation">,</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

void R_init_splines<span class="token punctuation">(</span>DllInfo <span class="token operator">*</span>dll<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    R_registerRoutines<span class="token punctuation">(</span>dll<span class="token punctuation">,</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> CallEntries<span class="token punctuation">,</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    R_useDynamicSymbols<span class="token punctuation">(</span>dll<span class="token punctuation">,</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="parse_Rd">

<a href="#parse_Rd" class="help-page-title"><h2>Parse an Rd File</h2></a>

<h3>Description</h3>

<p>This function reads an R documentation (Rd) file and parses it, for
processing by other functions.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">parse_Rd<span class="token punctuation">(</span>file<span class="token punctuation">,</span> srcfile <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> encoding <span class="token operator">=</span> <span class="token string">"unknown"</span><span class="token punctuation">,</span>
         verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> fragment <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> warningCalls <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
	 macros <span class="token operator">=</span> file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token string">"share"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Rd"</span><span class="token punctuation">,</span> <span class="token string">"macros"</span><span class="token punctuation">,</span> <span class="token string">"system.Rd"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         permissive <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
<span class="token comment">## S3 method for class 'Rd'</span>
print<span class="token punctuation">(</span>x<span class="token punctuation">,</span> deparse <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
<span class="token comment">## S3 method for class 'Rd'</span>
as.character<span class="token punctuation">(</span>x<span class="token punctuation">,</span> deparse <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A filename or text-mode connection.  At present filenames
work best.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>srcfile</code></td>
<td>
<p><code>NULL</code>, or a <code>"srcfile"</code> object.  See the
‘Details’ section.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>Encoding to be assumed for input strings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical indicating whether detailed parsing
information should be printed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fragment</code></td>
<td>
<p>Logical indicating whether file represents a complete
Rd file, or a fragment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warningCalls</code></td>
<td>
<p>Logical: should parser warnings include the call?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>macros</code></td>
<td>
<p>Filename or environment from which to load additional
macros, or a logical value.  See the Details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>permissive</code></td>
<td>
<p>Logical indicating that unrecognized macros
should be treated as text with no warning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object of class Rd.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deparse</code></td>
<td>
<p>If <code>TRUE</code>, attempt to reinstate the escape characters
so that the resulting characters will parse to the same object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed to or from other methods.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function parses ‘<span class="file">Rd</span>’ files according to the specification given
in <a href="https://developer.r-project.org/parseRd.pdf" target="_blank">https://developer.r-project.org/parseRd.pdf</a>.
</p>
<p>It generates a warning for each parse error and attempts to continue
parsing.  In order to continue, it is generally necessary to drop some
parts of the file, so such warnings should not be ignored.
</p>
<p>Files without a marked encoding are by default assumed to be in the
native encoding.  An alternate default can be set using the
<code>encoding</code> argument.  All text in files is translated to the
UTF-8 encoding in the parsed object.
</p>
<p>As from <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> version 3.2.0, User-defined macros may be given in a
separate file using ‘<span class="samp">⁠\newcommand⁠</span>’ or ‘<span class="samp">⁠\renewcommand⁠</span>’.
An environment may also be given:  it would be produced by
<code><a href="#loadRdMacros">loadRdMacros</a></code>, <code><a href="#loadRdMacros">loadPkgRdMacros</a></code>, or
by a previous call to <code>parse_Rd</code>.  If a logical value
is given, only the default built-in macros will be used;
<code>FALSE</code> indicates that no <code>"macros"</code> attribute
will be returned with the result.
</p>
<p>The <code>permissive</code> argument allows text to be parsed that is
not completely in Rd format.  Typically it would be LaTeX code,
used in an Rd fragment, e.g. in a <code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code>.
With <code>permissive = TRUE</code>, this will be passed through as plain
text.  Since <code>parse_Rd</code> doesn't know how many arguments
belong in LaTeX macros, it will guess based on the presence
of braces after the macro; this is not infallible.
</p>


<h3>Value</h3>

<p><code>parse_Rd</code> returns an object of class <code>"Rd"</code>.  The
internal format of this object is subject to change.  The
<code>as.character()</code> and <code>print()</code> methods defined for the
class return character vectors and print them, respectively.
</p>
<p>Unless <code>macros = FALSE</code>, the object will have an attribute
named <code>"macros"</code>, which is an environment containing the
macros defined in <code>file</code>, in a format that can be used for
further <code>parse_Rd</code> calls  in the same session.  It is not
guaranteed to work if saved to a file and reloaded in a different
session.
</p>


<h3>Author(s)</h3>

<p> Duncan Murdoch </p>


<h3>References</h3>

 <p><a href="https://developer.r-project.org/parseRd.pdf" target="_blank">https://developer.r-project.org/parseRd.pdf</a> </p>


<h3>See Also</h3>

<p><code><a href="#Rd2HTML">Rd2HTML</a></code> for the converters that use the output of
<code>parse_Rd()</code>.
</p>

<hr>
</div>
<div class="container manual-page" id="parseLatex">

<a href="#parseLatex" class="help-page-title"><h2>Experimental Functions to Work with LaTeX Code</h2></a>

<h3>Description</h3>

<p>The <code>parseLatex</code> function parses LaTeX source, producing a
structured object; <code>deparseLatex</code> reverses the process.  The
<code>latexToUtf8</code> function takes a LaTeX object, and processes a number
of different macros to convert them into the corresponding UTF-8
characters.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">parseLatex<span class="token punctuation">(</span>text<span class="token punctuation">,</span> filename <span class="token operator">=</span> deparse1<span class="token punctuation">(</span>substitute<span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
           verbatim <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"verbatim"</span><span class="token punctuation">,</span> <span class="token string">"verbatim*"</span><span class="token punctuation">,</span>
                        <span class="token string">"Sinput"</span><span class="token punctuation">,</span> <span class="token string">"Soutput"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
deparseLatex<span class="token punctuation">(</span>x<span class="token punctuation">,</span> dropBraces <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
latexToUtf8<span class="token punctuation">(</span>x<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>text</code></td>
<td>

<p>A character vector containing LaTeX source code.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>

<p>A filename to use in syntax error messages.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>If <code>TRUE</code>, print debug error messages.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbatim</code></td>
<td>

<p>A character vector containing the names of LaTeX environments holding verbatim text.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A <code>"LaTeX"</code> object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dropBraces</code></td>
<td>

<p>Drop unnecessary braces when displaying a <code>"LaTeX"</code> object.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The parser does not recognize all legal LaTeX code, only relatively
simple examples.  It does not associate arguments with macros, that
needs to be done after parsing, with knowledge of the definitions of
each macro.  The main intention for this function is to process simple
LaTeX code used in bibliographic references, not fully general LaTeX
documents.
</p>
<p>Verbose text is allowed in two forms:  the <code style="white-space: pre;">⁠\verb⁠</code> macro (with
single character delimiters), and environments whose names are listed
in the <code>verbatim</code> argument.
</p>


<h3>Value</h3>

<p>The <code>parseLatex()</code> function returns a recursive object of class
<code>"LaTeX"</code>.  Each of the entries in this object will have a
<code>"latex_tag"</code> attribute identifying its syntactic role.
</p>
<p>The <code>deparseLatex()</code> function returns a single element character
vector, possibly containing embedded newlines.
</p>
<p>The <code>latexToUtf8()</code> function returns a modified version of the
<code>"LaTeX"</code> object that was passed to it.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">latex <span class="token operator">&lt;-</span> parseLatex<span class="token punctuation">(</span><span class="token string">"fa\\c{c}ile"</span><span class="token punctuation">)</span>
deparseLatex<span class="token punctuation">(</span>latexToUtf8<span class="token punctuation">(</span>latex<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="pskill">

<a href="#pskill" class="help-page-title"><h2>Kill a Process</h2></a>

<h3>Description</h3>

<p><code>pskill</code> sends a signal to a process, usually to terminate it.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">pskill<span class="token punctuation">(</span>pid<span class="token punctuation">,</span> signal <span class="token operator">=</span> SIGTERM<span class="token punctuation">)</span>

SIGHUP
SIGINT
SIGQUIT
SIGKILL
SIGTERM
SIGSTOP
SIGTSTP
SIGCHLD
SIGUSR1
SIGUSR2</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pid</code></td>
<td>
<p>positive integers: one or more process IDs as returned by
<code><a href="https://r-universe.dev/manuals/base.html#Sys.getpid">Sys.getpid</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>signal</code></td>
<td>
<p>integer, most often one of the symbolic constants.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Signals are a C99 concept, but only a small number are required to be
supported (of those listed, only <code>SIGINT</code> and <code>SIGTERM</code>).
They are much more widely used on POSIX operating systems (which
should define all of those listed here), which also support a
<code>kill</code> system call to send a signal to a process, most often to
terminate it.  Function <code>pskill</code> provides a wrapper: it silently
ignores invalid values of its arguments, including zero or negative pids.
</p>
<p>In normal use on a Unix-alike, <kbd>Ctrl-C</kbd> sends <code>SIGINT</code>,
<kbd>Ctrl-\</kbd> sends <code>SIGQUIT</code> and <kbd>Ctrl-Z</kbd> sends
<code>SIGTSTP</code>: that and <code>SIGSTOP</code> suspend a process which can be
resumed by <code>SIGCONT</code>.
</p>
<p>The signals are small integers, but the actual numeric values are not
standardized (and most do differ between OSes).  The <code>SIG*</code>
objects contain the appropriate integer values for the current platform
(or <code>NA_INTEGER_</code> if the signal is not defined).
</p>
<p>Only <code>SIGINT</code> and <code>SIGTERM</code> will be defined on Windows, and
<code>pskill</code> will always use the Windows system call
<code>TerminateProcess</code>.
</p>


<h3>Value</h3>

<p>A logical vector of the same length as <code>pid</code>,
<code>TRUE</code> (for success) or <code>FALSE</code>, invisibly.
</p>


<h3>See Also</h3>

<p>Package <span class="pkg">parallel</span> has several means to launch child processes
which record the process IDs.
</p>
<p><code><a href="#psnice">psnice</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span>
pskill<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">237</span><span class="token punctuation">,</span> <span class="token number">245</span><span class="token punctuation">)</span><span class="token punctuation">,</span> SIGKILL<span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="psnice">

<a href="#psnice" class="help-page-title"><h2>Get or Set the Priority (Niceness) of a Process</h2></a>

<h3>Description</h3>

<p>Get or set the ‘niceness’ of the current process, or one or
more other processes.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">psnice<span class="token punctuation">(</span>pid <span class="token operator">=</span> Sys.getpid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token keyword">NA_integer_</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pid</code></td>
<td>
<p>positive integers: the process IDs of one of more
processes: defaults to the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session process.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>The niceness to be set, or <code>NA</code> for an enquiry.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>POSIX operating systems have a concept of process priorities, usually
from 0 to 39 (or 40) with 20 being a normal priority and (somewhat
confusingly) larger numeric values denoting lower priority.  To add to
the confusion, there is a ‘niceness’ value, the amount by which
the priority numerically exceeds 20 (which can be negative).
Processes with high niceness will receive less CPU time than those
with normal priority.  On some OSes, processes with niceness
<code>+19</code> are only run when the system would otherwise be idle.
</p>
<p>On many OSes utilities such as <code>top</code> report the priority and
not the niceness.  Niceness is used by the utility
‘<span class="file">/usr/bin/renice</span>’: ‘<span class="file">/usr/bin/nice</span>’ (and
<code>/usr/bin/renice -n</code>) specifies an <em>increment</em> in niceness.
</p>
<p>Only privileged users (usually super-users) can lower the niceness.
</p>
<p>Windows has a slightly different concept of ‘priority
classes’.  We have mapped the idle priority to niceness <code>19</code>,
‘below normal’ to <code>15</code>, normal to <code>0</code>, ‘above
normal’ to <code>-5</code> and ‘realtime’ to <code>-10</code>.  Unlike
Unix-alikes, a non-privileged user can increase the priority class on
Windows (but using ‘realtime’ is inadvisable).
</p>


<h3>Value</h3>

<p>An integer vector of <em>previous</em> niceness values,
<code>NA</code> if unknown for any reason.
</p>


<h3>See Also</h3>

<p>Various functions in package <span class="pkg">parallel</span> create child processes
whose priority may need to be changed.
</p>
<p><code><a href="#pskill">pskill</a></code>.
</p>

<hr>
</div>
<div class="container manual-page" id="QC">

<a href="#QC" class="help-page-title"><h2>QC Checks for R Code and/or Documentation</h2></a>

<h3>Description</h3>

<p>Functions for performing various quality control (QC) checks on R code
and documentation, notably on R packages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">checkDocFiles   <span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> chkInternal <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
checkDocStyle   <span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
checkReplaceFuns<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
checkS3methods  <span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
checkRdContents <span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> chkInternal <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>

langElts
nonS3methods<span class="token punctuation">(</span>package<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source (or <em>installed</em> in some cases) directory.  This should contain the subdirectories ‘<span class="file">R</span>’
(for R code) and ‘<span class="file">man</span>’ with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> documentation sources (in Rd
format).  Only used if <code>package</code> is not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chkInternal</code></td>
<td>
<p>logical indicating if Rd files marked with keyword
<code>internal</code> should be checked as well.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>checkDocFiles</code> checks, for all Rd files in a package, whether all
arguments shown in the usage sections of the Rd file are documented in
its arguments section.  It also reports duplicated entries in the
arguments section, and ‘over-documented’ arguments which are
given in the arguments section but not in the usage.  Note that the
match is for the usage section and not a possibly existing synopsis
section, as the usage is what gets displayed.
</p>
<p><code>checkDocStyle</code> investigates how (S3) methods are shown in the
usages of the Rd files in a package.  It reports the methods shown by
their full name rather than using the Rd <code style="white-space: pre;">⁠\method⁠</code> markup for
indicating S3 methods.  Earlier versions of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> also reported about
methods shown along with their generic, which typically caused
problems for the documentation of the primary argument in the generic
and its methods.  With <code style="white-space: pre;">⁠\method⁠</code> now being expanded in a way
that class information is preserved, joint documentation is
no longer necessarily a problem.  (The corresponding information is
still contained in the object returned by <code>checkDocStyle</code>.)
</p>
<p><code>checkReplaceFuns</code> checks whether replacement functions or S3/S4
replacement methods in the package R code have their final argument
named <code>value</code>.
</p>
<p><code>checkS3methods</code> checks whether all S3 methods defined in the
package R code have all arguments of the corresponding generic, with
positional arguments of the generics in the same positions for the
method.  As an exception, the first argument of a formula method
<em>may</em> be called <code>formula</code> even if this is not the name used
by the generic.  The rules when <code>...</code> is involved are subtle:
see the source code.  Functions recognized as S3 generics are those
with a call to <code>UseMethod</code> in their body, internal S3 generics
(see <a href="https://r-universe.dev/manuals/base.html#InternalMethods">InternalMethods</a>), and S3 group generics (see
<code><a href="https://r-universe.dev/manuals/base.html#groupGeneric">Math</a></code>).  Possible dispatch under a
different name is not taken into account.  The generics are sought
first in the given package, then in the <span class="pkg">base</span> package and
(currently) the packages <span class="pkg">graphics</span>, <span class="pkg">stats</span>, and <span class="pkg">utils</span>
added in R 1.9.0 by splitting the former <span class="pkg">base</span>, and, if an
installed package is tested, also in the loaded namespaces/packages
listed in the package's ‘<span class="file">DESCRIPTION</span>’ Depends field.
</p>
<p><code>checkRdContents()</code> checks Rd content, e.g., whether arguments of
functions in the usage section have non empty descriptions.
</p>
<p><code>nonS3methods(package)</code> returns a <code><a href="https://r-universe.dev/manuals/base.html#character">character</a></code> vector with
the names of the functions in <code>package</code> which ‘look’ like
S3 methods, but are not.  Using <code>package = NULL</code> returns all
known examples.
</p>
<p><code>langElts</code> is a character vector of names of “language
elements” of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.  These are implemented as “very primitive”
functions (no argument list; <code><a href="https://r-universe.dev/manuals/base.html#print">print</a>()</code>ing as
<code>.Primitive("&lt;name&gt;")</code>).
</p>
<p>If using an installed package, the checks needing access to all <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
objects of the package will load the package (unless it is the
<span class="pkg">base</span> package), after possibly detaching an already loaded
version of the package.
</p>


<h3>Value</h3>

<p>The functions return objects of class the same as the respective
function names containing the information about problems detected.
There are <code>print</code> methods for nicely displaying the information
contained in such objects.
</p>

<hr>
</div>
<div class="container manual-page" id="Rcmd">

<a href="#Rcmd" class="help-page-title"><h2>R CMD Interface</h2></a>

<h3>Description</h3>

<p>Invoke <code>R CMD</code> tools from within <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rcmd<span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>args</code></td>
<td>
<p>a character vector of arguments to <code>R CMD</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments to be passed to <code><a href="https://r-universe.dev/manuals/base.html#system2">system2</a></code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Provides a portable convenience interface to the <code>R CMD</code>
mechanism by invoking the corresponding system commands (using the
version of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> currently used) via <code><a href="https://r-universe.dev/manuals/base.html#system2">system2</a></code>.
</p>


<h3>Value</h3>

<p>See section “Value” in <code><a href="https://r-universe.dev/manuals/base.html#system2">system2</a></code>.
</p>

<hr>
</div>
<div class="container manual-page" id="Rd2HTML">

<a href="#Rd2HTML" class="help-page-title"><h2> Rd Converters </h2></a>

<h3>Description</h3>

<p>These functions take the output of <code><a href="#parse_Rd">parse_Rd</a>()</code>, an
<code>Rd</code> object, and produce a help page from it.  As they are mainly
intended for internal use, their interfaces are subject to change.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rd2HTML<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> out <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> package <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> defines <span class="token operator">=</span> .Platform<span class="token operator">$</span>OS.type<span class="token punctuation">,</span>
        Links <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> Links2 <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
        stages <span class="token operator">=</span> <span class="token string">"render"</span><span class="token punctuation">,</span> outputEncoding <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">,</span>
        dynamic <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> no_links <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> fragment <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
        stylesheet <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dynamic<span class="token punctuation">)</span> <span class="token string">"/doc/html/R.css"</span> <span class="token keyword">else</span> <span class="token string">"R.css"</span><span class="token punctuation">,</span>
        texmath <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"help.htmlmath"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token ellipsis">...</span><span class="token punctuation">)</span>

Rd2txt<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> out <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> package <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> defines <span class="token operator">=</span> .Platform<span class="token operator">$</span>OS.type<span class="token punctuation">,</span>
       stages <span class="token operator">=</span> <span class="token string">"render"</span><span class="token punctuation">,</span> outputEncoding <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
       fragment <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>

Rd2latex<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> out <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> defines <span class="token operator">=</span> .Platform<span class="token operator">$</span>OS.type<span class="token punctuation">,</span>
         stages <span class="token operator">=</span> <span class="token string">"render"</span><span class="token punctuation">,</span> outputEncoding <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">,</span>
         fragment <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">,</span> writeEncoding <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

Rd2ex<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> out <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> defines <span class="token operator">=</span> .Platform<span class="token operator">$</span>OS.type<span class="token punctuation">,</span>
      stages <span class="token operator">=</span> <span class="token string">"render"</span><span class="token punctuation">,</span> outputEncoding <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token punctuation">,</span>
      commentDontrun <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> commentDonttest <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Rd</code></td>
<td>
<p> a filename or <code>Rd</code> object to use as input. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out</code></td>
<td>
<p>a filename or connection object to which to write the
output.  The default <code>out = ""</code> is equivalent to
<code>out = <a href="https://r-universe.dev/manuals/base.html#showConnections">stdout</a>()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p> the package to list in the output. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>defines</code></td>
<td>
<p> string(s) to use in <code style="white-space: pre;">⁠#ifdef⁠</code> tests. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p> at which stage (<code>"build"</code>, <code>"install"</code>, or
<code>"render"</code>) should <code style="white-space: pre;">⁠\Sexpr⁠</code> macros be executed? See the
notes below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputEncoding</code></td>
<td>
<p> see the ‘Encodings’ section below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dynamic</code></td>
<td>
<p>logical: set links for render-time resolution by
dynamic help system.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_links</code></td>
<td>
<p>logical: suppress hyperlinks to other help topics.
Used by <code>R CMD <a href="https://r-universe.dev/manuals/base.html#RdUtils">Rdconv</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fragment</code></td>
<td>
<p>logical:  should fragments of Rd files be accepted?  See the
notes below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stylesheet</code></td>
<td>
<p>character: a URL for a stylesheet to be used in the header
of the HTML output page.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>texmath</code></td>
<td>
<p>character: controls how mathematics in <code style="white-space: pre;">⁠\eqn⁠</code> and
<code style="white-space: pre;">⁠\deqn⁠</code> commands are typeset in HTML output. Useful values
are <code>"katex"</code> (default) and <code>"mathjax"</code> to use
<a href="https://katex.org/" target="_blank">KaTeX</a> or
<a href="https://www.mathjax.org/" target="_blank">MathJax</a> respectively, otherwise
basic substitutions are used. May be ignored under certain
circumstances, e.g., if the help page already uses macros from the
<code><a href="https://wviechtb.r-universe.dev/manual/mathjaxr.html#mathjaxr">mathjaxr</a></code> package.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Links, Links2</code></td>
<td>
<p><code>NULL</code> or a named (by topics) character vector of
links, as returned by <code><a href="#HTMLlinks">findHTMLlinks</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>An optional named list of options to pass to
<code><a href="#Rd2txt_options">Rd2txt_options</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional parameters to pass to <code><a href="#parse_Rd">parse_Rd</a></code> when
<code>Rd</code> is a filename. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>writeEncoding</code></td>
<td>
<p>should <code style="white-space: pre;">⁠\inputencoding⁠</code> lines be written in
the file for non-ASCII encodings?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commentDontrun</code></td>
<td>
<p>should <code style="white-space: pre;">⁠\dontrun⁠</code> sections be commented
out?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commentDonttest</code></td>
<td>
<p>should <code style="white-space: pre;">⁠\donttest⁠</code> sections be commented out?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions convert help documents: <code>Rd2HTML</code> produces HTML,
<code>Rd2txt</code> produces plain text, <code>Rd2latex</code> produces LaTeX.
<code>Rd2ex</code> extracts the examples in the format used by
<code><a href="https://r-universe.dev/manuals/utils.html#example">example</a></code> and <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> utilities.
</p>
<p>Each of the functions accepts a filename for an Rd file, and
will use <code><a href="#parse_Rd">parse_Rd</a></code> to parse it before applying the
conversions or checks.
</p>
<p>The difference between arguments <code>Link</code> and <code>Link2</code> is that
links are looked in them in turn, so lazy-evaluation can be used to
only do a second-level search for links if required.
</p>
<p>Before <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.6.0, the default for <code>Rd2latex</code> was <code>outputEncoding = "ASCII"</code>,
including using the second option of <code style="white-space: pre;">⁠\enc⁠</code> markup, because LaTeX
versions did not provide enough coverage of UTF-8 glyphs for a long time.
</p>
<p><code>Rd2txt</code> will format text paragraphs to a width determined by
<code>width</code>, with appropriate margins.  The default is to be close to
the rendering in versions of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> &lt; 2.10.0.
</p>
<p><code>Rd2txt</code> will use directional quotes (see <code><a href="https://r-universe.dev/manuals/base.html#sQuote">sQuote</a></code>)
if option <code>"useFancyQuotes"</code> is true (usually the default,
see <code><a href="https://r-universe.dev/manuals/base.html#sQuote">sQuote</a></code>) and
the current encoding is UTF-8.
</p>
<p>Various aspects of formatting by <code>Rd2txt</code> are controlled by the
<code>options</code> argument, documented with the <code><a href="#Rd2txt_options">Rd2txt_options</a></code>
function.  Changes made using <code>options</code> are temporary, those
made with <code><a href="#Rd2txt_options">Rd2txt_options</a></code> are persistent.
</p>
<p>When <code>fragment = TRUE</code>, the <code>Rd</code> file will be rendered
with no processing of <code style="white-space: pre;">⁠\Sexpr⁠</code> elements or conditional defines
using <code style="white-space: pre;">⁠#ifdef⁠</code> or <code style="white-space: pre;">⁠#ifndef⁠</code>.  Normally a fragment represents
text within a section, but if the first element of the fragment
is a section macro, the whole fragment will be rendered as
a series of sections, without the usual sorting.
</p>


<h3>Value</h3>

<p>These functions are executed mainly for the side effect of
writing the converted help page.  Their value is the name of the output
file (invisibly).  For <code>Rd2latex</code>, the output name is given an
attribute <code>"latexEncoding"</code> giving the encoding of the file in a
form suitable for use with the LaTeX ‘<span class="samp">⁠inputenc⁠</span>’ package.
</p>


<h3>Encodings</h3>

<p>Rd files are normally intended to be rendered on a wide variety of
systems, so care must be taken in the encoding of non-ASCII
characters.  In general, any such encoding should be declared using
the ‘<span class="samp">⁠encoding⁠</span>’ section for there to be any hope of correct
rendering.
</p>
<p>For output, the <code>outputEncoding</code> argument will be used:
<code>outputEncoding = ""</code> will choose the native encoding for the
current system.
</p>
<p>If the text cannot be converted to the <code>outputEncoding</code>, byte
substitution will be used (see <code><a href="https://r-universe.dev/manuals/base.html#iconv">iconv</a></code>): <code>Rd2latex</code>
and <code>Rd2ex</code> give a warning.
</p>


<h3>Note</h3>

<p>The <code style="white-space: pre;">⁠\Sexpr⁠</code> macro is a new addition to Rd files.  It includes
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code that will be executed at one of three times: <em>build</em> time
(when a package's source code is built into a tarball),
<em>install</em> time (when the package is installed or
built into a binary package), and <em>render</em> time (when the man
page is converted to a readable format).
</p>
<p>For example, this man page was:
</p>

<ol>
<li>
<p> built on
2022-10-31 at 18:33:16,
</p>
</li>
<li>
<p> installed on
2022-10-31 at 18:33:16, and
</p>
</li>
<li>
<p> rendered on
2022-11-27 at 13:32:36.
</p>
</li>
</ol>
<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley
</p>


<h3>References</h3>

 <p><a href="https://developer.r-project.org/parseRd.pdf" target="_blank">https://developer.r-project.org/parseRd.pdf</a> </p>


<h3>See Also</h3>

<p><code><a href="#parse_Rd">parse_Rd</a></code>, <code><a href="#checkRd">checkRd</a></code>,
<code><a href="#HTMLlinks">findHTMLlinks</a></code>, <code><a href="#Rd2txt_options">Rd2txt_options</a></code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span><span class="token comment">## Simulate install and rendering of this page in HTML and text format:</span>

Rd <span class="token operator">&lt;-</span> file.path<span class="token punctuation">(</span><span class="token string">"src/library/tools/man/Rd2HTML.Rd"</span><span class="token punctuation">)</span>

outfile <span class="token operator">&lt;-</span> tempfile<span class="token punctuation">(</span>fileext <span class="token operator">=</span> <span class="token string">".html"</span><span class="token punctuation">)</span>
browseURL<span class="token punctuation">(</span>Rd2HTML<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> outfile<span class="token punctuation">,</span> package <span class="token operator">=</span> <span class="token string">"tools"</span><span class="token punctuation">,</span>
          stages <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token string">"render"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

outfile <span class="token operator">&lt;-</span> tempfile<span class="token punctuation">(</span>fileext <span class="token operator">=</span> <span class="token string">".txt"</span><span class="token punctuation">)</span>
file.show<span class="token punctuation">(</span>Rd2txt<span class="token punctuation">(</span>Rd<span class="token punctuation">,</span> outfile<span class="token punctuation">,</span> package <span class="token operator">=</span> <span class="token string">"tools"</span><span class="token punctuation">,</span>
          stages <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"install"</span><span class="token punctuation">,</span> <span class="token string">"render"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

checkRd<span class="token punctuation">(</span>Rd<span class="token punctuation">)</span> <span class="token comment"># A stricter test than Rd2HTML uses</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="Rd2txt_options">

<a href="#Rd2txt_options" class="help-page-title"><h2>Set Formatting Options for Text Help</h2></a>

<h3>Description</h3>

<p>This function sets various options for displaying text help.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rd2txt_options<span class="token punctuation">(</span><span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>A list containing named options, or
options passed as individual named arguments.
See below for currently defined ones.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function persistently sets various formatting options for the
<code><a href="#Rd2HTML">Rd2txt</a></code> function which is used in displaying text format
help.  Currently defined options are:
</p>

<dl>
<dt>width</dt>
<dd>
<p>(default 80):  The width of the output page.</p>
</dd>
<dt>minIndent</dt>
<dd>
<p>(default 10):  The minimum indent to use in a list.</p>
</dd>
<dt>extraIndent</dt>
<dd>
<p>(default 4):  The extra indent to use in each
level of nested lists.</p>
</dd>
<dt>sectionIndent</dt>
<dd>
<p>(default 5):  The indent level for a section.</p>
</dd>
<dt>sectionExtra</dt>
<dd>
<p>(default 2):  The extra indentation for each
nested section level.</p>
</dd>
<dt>itemBullet</dt>
<dd>
<p>(default <code>"* "</code>, with the asterisk replaced by a
Unicode bullet in UTF-8 and most Windows locales):
The symbol to use as a bullet in itemized lists.</p>
</dd>
<dt>enumFormat</dt>
<dd>
<p>:  A function to format item numbers in enumerated lists.</p>
</dd>
<dt>showURLs</dt>
<dd>
<p>(default <code>FALSE</code>):  Whether to show URLs when
expanding <code style="white-space: pre;">⁠\href⁠</code> tags.</p>
</dd>
<dt>code_quote</dt>
<dd>
<p>(default <code>TRUE</code>):  Whether to render
<code style="white-space: pre;">⁠\code⁠</code> and similar with single quotes.</p>
</dd>
<dt>underline_titles</dt>
<dd>
<p>(default <code>TRUE</code>):  Whether to render
section titles with underlines (via backspacing).</p>
</dd>
</dl>
<h3>Value</h3>

<p>If called with no arguments, returns all option settings in a list.
Otherwise, it changes the named settings and invisibly returns their
previous values.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="#Rd2HTML">Rd2txt</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment"># The itemBullet is locale-specific</span>
saveOpts <span class="token operator">&lt;-</span> Rd2txt_options<span class="token punctuation">(</span><span class="token punctuation">)</span>
saveOpts
Rd2txt_options<span class="token punctuation">(</span>minIndent <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>
Rd2txt_options<span class="token punctuation">(</span><span class="token punctuation">)</span>
Rd2txt_options<span class="token punctuation">(</span>saveOpts<span class="token punctuation">)</span>
Rd2txt_options<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="Rdiff">

<a href="#Rdiff" class="help-page-title"><h2>Difference R Output Files</h2></a>

<h3>Description</h3>

<p>Given two <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> output files, compute differences ignoring headers,
footers and some other differences.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rdiff<span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">,</span> useDiff <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> forEx <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
      nullPointers <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> Log <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>from, to</code></td>
<td>
<p>filepaths to be compared</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useDiff</code></td>
<td>
<p>should <code>diff</code> be used to compare results?
Overidden to false if the command is not available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forEx</code></td>
<td>
<p>logical: extra pruning for ‘<span class="file">-Ex.Rout</span>’ files to
exclude the header.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nullPointers</code></td>
<td>
<p>logical: should the displayed addresses of
pointers be set to <code>0x00000000</code> before comparison?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Log</code></td>
<td>
<p>logical: should the returned value include a log of
differences found?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> startup banner and any timing information from <code>R CMD
    BATCH</code> are removed from both files, together with lines about
loading packages.  UTF-8 fancy quotes (see <code><a href="https://r-universe.dev/manuals/base.html#sQuote">sQuote</a></code>) and
on Windows, Windows' so-called ‘smart quotes’, are mapped to
a simple quote.  Addresses of environments, compiled bytecode and
other exotic types expressed as hex addresses
(e.g., <code>&lt;environment: 0x12345678&gt;</code>) are mapped to
<code>0x00000000</code>.  The files are then compared line-by-line.  If
there are the same number of lines and <code>useDiff</code> is false, a
simple <code>diff -b</code> -like display of differences is printed
(which ignores trailing spaces and differences in numbers of
consecutive spaces), otherwise <code>diff -bw</code> is called on the
edited files.  (This tries to ignore all differences in whitespace:
note that flag <span class="option">-w</span> is not required by POSIX but is supported
by GNU, Solaris and FreeBSD versions – macOS uses an old GNU version.)
</p>
<p>This can compare uncompressed PDF files, ignoring differences in
creation and modification dates.  However, non-ASCII text may not be
handled in UTF-8 locales, and it does not check if the PDF files really
are uncompressed.  This is unlikely to be supported in future versions
of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>
<p>Mainly for use in examples and tests, text from marker
‘<span class="samp">⁠&gt; ## IGNORE_RDIFF_BEGIN⁠</span>’ up to (but not including)
‘<span class="samp">⁠&gt; ## IGNORE_RDIFF_END⁠</span>’ is ignored.
</p>


<h3>Value</h3>

<p>If <code>Log</code> is true, a list with components <code>status</code> (see
below) and <code>out</code>, a character vector of descriptions of
differences, possibly of zero length.
</p>
<p>Otherwise, a status indicator (invisibly), <code>0L</code> if and only if no
differences were found.
</p>


<h3>See Also</h3>

<p>The shell script run as <code>R CMD Rdiff</code>, which uses
<code>useDiff = TRUE</code>.
</p>

<hr>
</div>
<div class="container manual-page" id="Rdindex">

<a href="#Rdindex" class="help-page-title"><h2>Generate Index from Rd Files</h2></a>

<h3>Description</h3>

<p>Print a 2-column index table with names and titles from given
R documentation files to a given output file or connection.  The
titles are nicely formatted between two column positions (typically 25
and 72, respectively).
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rdindex<span class="token punctuation">(</span>RdFiles<span class="token punctuation">,</span> outFile <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> type <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
        width <span class="token operator">=</span> <span class="token number">0.9</span> <span class="token operator">*</span> getOption<span class="token punctuation">(</span><span class="token string">"width"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>RdFiles</code></td>
<td>
<p>a character vector specifying the Rd files to be used
for creating the index, either by giving the paths to the files, or
the path to a single directory with the sources of a package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outFile</code></td>
<td>
<p>a connection, or a character string naming the output
file to print to.  <code>""</code> (the default) indicates output to the
console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a character string giving the documentation type of the Rd
files to be included in the index, or <code>NULL</code> (the default).
The type of an Rd file is typically specified via the
<code style="white-space: pre;">⁠\docType⁠</code> tag; if <code>type</code> is <code>"data"</code>, Rd files
whose <em>only</em> keyword is <code>datasets</code> are included as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indent</code></td>
<td>
<p>a positive integer specifying the indentation of the
second column.  Must not be greater than <code>width/2</code>, and
defaults to <code>width/3</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If a name is not a valid alias, the first alias (or the empty string
if there is none) is used instead.
</p>

<hr>
</div>
<div class="container manual-page" id="RdTextFilter">

<a href="#RdTextFilter" class="help-page-title"><h2>Select Text in an Rd File</h2></a>

<h3>Description</h3>

<p>This function blanks out all non-text in an Rd file,
for spell checking or other uses.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">RdTextFilter<span class="token punctuation">(</span>ifile<span class="token punctuation">,</span> encoding <span class="token operator">=</span> <span class="token string">"unknown"</span><span class="token punctuation">,</span> keepSpacing <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
             drop <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> keep <span class="token operator">=</span> character<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
             macros <span class="token operator">=</span> file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token string">"share"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Rd"</span><span class="token punctuation">,</span> <span class="token string">"macros"</span><span class="token punctuation">,</span> <span class="token string">"system.Rd"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ifile</code></td>
<td>

<p>An input file specified as a filename or connection, or an <code>"Rd"</code> object
from <code><a href="#parse_Rd">parse_Rd</a></code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>

<p>An encoding name to pass to <code><a href="#parse_Rd">parse_Rd</a></code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keepSpacing</code></td>
<td>

<p>Whether to try to leave the text in the same lines and columns
as in the original file.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>

<p>Additional sections of the Rd to drop.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>

<p>Sections of the Rd file to keep.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>macros</code></td>
<td>

<p>Macro definitions to assume when parsing.  See <code><a href="#parse_Rd">parse_Rd</a></code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function parses the Rd file, then walks through it, element by
element.  Items with tag <code>"TEXT"</code> are kept in the same position as
they appeared in the original file, while other parts of the file are
replaced with blanks, so a spell checker such as <code><a href="https://r-universe.dev/manuals/utils.html#aspell">aspell</a></code>
can check only the text and report the position in the original file.
(If <code>keepSpacing</code> is <code>FALSE</code>, blank filling will not occur,
and text will not be output in its original location.)
</p>
<p>By default, the tags <code style="white-space: pre;">⁠\S3method⁠</code>, <code style="white-space: pre;">⁠\S4method⁠</code>,
<code style="white-space: pre;">⁠\command⁠</code>, <code style="white-space: pre;">⁠\docType⁠</code>, <code style="white-space: pre;">⁠\email⁠</code>, <code style="white-space: pre;">⁠\encoding⁠</code>,
<code style="white-space: pre;">⁠\file⁠</code>, <code style="white-space: pre;">⁠\keyword⁠</code>, <code style="white-space: pre;">⁠\link⁠</code>, <code style="white-space: pre;">⁠\linkS4class⁠</code>,
<code style="white-space: pre;">⁠\method⁠</code>, <code style="white-space: pre;">⁠\pkg⁠</code>, and <code style="white-space: pre;">⁠\var⁠</code> are skipped.  Additional
tags can be skipped by listing them in the <code>drop</code> argument;
listing tags in the <code>keep</code> argument will stop them from being
skipped.  It is also possible to <code>keep</code> any of the
<code>c("RCODE", "COMMENT", "VERB")</code> tags, which correspond to R-like
code, comments, and verbatim text respectively, or to drop
<code>"TEXT"</code>.
</p>


<h3>Value</h3>

<p>A character vector which if written to a file, one element per line, would
duplicate the text elements of the original Rd file.
</p>


<h3>Note</h3>

<p>The filter attempts to merge text elements into single words when markup in
the Rd file is used to highlight just the start of a word.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#aspell">aspell</a></code>, for which this is an acceptable <code>filter</code>.
</p>

<hr>
</div>
<div class="container manual-page" id="Rdutils">

<a href="#Rdutils" class="help-page-title"><h2>Rd Utilities</h2></a>

<h3>Description</h3>

<p>Utilities for computing on the information in Rd objects.</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">Rd_db<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> stages <span class="token operator">=</span> <span class="token string">"build"</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This should contain the subdirectory ‘<span class="file">man</span>’
with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> documentation sources (in Rd format).  Only used if
<code>package</code> is not given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p>if <code>dir</code> is specified and the database is being
built from source, which stages of <code style="white-space: pre;">⁠\Sexpr⁠</code> processing should be
processed?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>Rd_db</code> builds a simple database of all Rd objects in a package,
as a list of the results of running <code><a href="#parse_Rd">parse_Rd</a></code> on the Rd
source files in the package and processing platform conditionals
and some <code style="white-space: pre;">⁠\Sexpr⁠</code> macros.
</p>


<h3>See Also</h3>

<p><code><a href="#parse_Rd">parse_Rd</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Build the Rd db for the (installed) base package.</span>
db <span class="token operator">&lt;-</span> Rd_db<span class="token punctuation">(</span><span class="token string">"base"</span><span class="token punctuation">)</span>

<span class="token comment">## Keyword metadata per Rd object.</span>
keywords <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>db<span class="token punctuation">,</span> tools<span class="token operator">::</span><span class="token operator">:</span>.Rd_get_metadata<span class="token punctuation">,</span> <span class="token string">"keyword"</span><span class="token punctuation">)</span>
<span class="token comment">## Tabulate the keyword entries.</span>
kw_table <span class="token operator">&lt;-</span> sort<span class="token punctuation">(</span>table<span class="token punctuation">(</span>unlist<span class="token punctuation">(</span>keywords<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">## The 5 most frequent ones:</span>
rev<span class="token punctuation">(</span>kw_table<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment">## The "most informative" ones:</span>
kw_table<span class="token punctuation">[</span>kw_table <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">]</span>

<span class="token comment">## Concept metadata per Rd file.</span>
concepts <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span>db<span class="token punctuation">,</span> tools<span class="token operator">::</span><span class="token operator">:</span>.Rd_get_metadata<span class="token punctuation">,</span> <span class="token string">"concept"</span><span class="token punctuation">)</span>
<span class="token comment">## How many files already have \concept metadata?</span>
sum<span class="token punctuation">(</span>sapply<span class="token punctuation">(</span>concepts<span class="token punctuation">,</span> length<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">## How many concept entries altogether?</span>
length<span class="token punctuation">(</span>unlist<span class="token punctuation">(</span>concepts<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="read.00Index">

<a href="#read.00Index" class="help-page-title"><h2>Read 00Index-style Files</h2></a>

<h3>Description</h3>

<p>Read item/description information from ‘<span class="file">00Index</span>’-like files.  Such
files are description lists rendered in tabular form, and currently
used for the ‘<span class="file">INDEX</span>’ and ‘<span class="file">demo/00Index</span>’ files of add-on
packages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">read.<span class="token number">00</span>Index<span class="token punctuation">(</span>file<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the name of a file to read data values from.  If the
specified file is <code>""</code>, then input is taken from the keyboard
(in this case input can be terminated by a blank line).
Alternatively, <code>file</code> can be a <code><a href="https://r-universe.dev/manuals/base.html#connections">connection</a></code>, which
will be opened if necessary, and if so closed at the end of the
function call.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A character matrix with 2 columns named <code>"Item"</code> and
<code>"Description"</code> which hold the items and descriptions.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#formatDL">formatDL</a></code> for the inverse operation of creating a
00Index-style file from items and their descriptions.
</p>

<hr>
</div>
<div class="container manual-page" id="showNonASCII">

<a href="#showNonASCII" class="help-page-title"><h2>Pick Out Non-ASCII Characters</h2></a>

<h3>Description</h3>

<p>This function prints elements of a character vector which contain
non-ASCII bytes, printing such bytes as a escape like ‘<span class="samp">⁠&lt;fc&gt;⁠</span>’.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">showNonASCII<span class="token punctuation">(</span>x<span class="token punctuation">)</span>

showNonASCIIfile<span class="token punctuation">(</span>file<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>path to a file.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This was originally written to help detect non-portable text in
files in packages.
</p>
<p>It prints all element of <code>x</code> which contain non-ASCII characters,
preceded by the element number and with non-ASCII bytes highlighted
<em>via</em> <code><a href="https://r-universe.dev/manuals/base.html#iconv">iconv</a>(sub = "byte")</code>.
</p>


<h3>Value</h3>

<p>The elements of <code>x</code> containing non-ASCII characters will be returned
invisibly.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">out <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span>
<span class="token string">"fa\xE7ile test of showNonASCII():"</span><span class="token punctuation">,</span>
<span class="token string">"\\details{"</span><span class="token punctuation">,</span>
<span class="token string">"   This is a good line"</span><span class="token punctuation">,</span>
<span class="token string">"   This has an \xfcmlaut in it."</span><span class="token punctuation">,</span>
<span class="token string">"   OK again."</span><span class="token punctuation">,</span>
<span class="token string">"}"</span><span class="token punctuation">)</span>
f <span class="token operator">&lt;-</span> tempfile<span class="token punctuation">(</span><span class="token punctuation">)</span>
cat<span class="token punctuation">(</span>out<span class="token punctuation">,</span> file <span class="token operator">=</span> f<span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">"\n"</span><span class="token punctuation">)</span>

showNonASCIIfile<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
unlink<span class="token punctuation">(</span>f<span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="startDynamicHelp">

<a href="#startDynamicHelp" class="help-page-title"><h2>Start the Dynamic HTML Help System</h2></a>

<h3>Description</h3>

<p>This function starts the internal help server, so that HTML help pages
are rendered when requested.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">startDynamicHelp<span class="token punctuation">(</span>start <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>logical: whether to start or shut down the dynamic help
system.  If <code>NA</code>, the server is started if not already running.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This function starts the internal HTTP server, which runs on the
loopback interface (<code>127.0.0.1</code>).  If <code>options("help.ports")</code>
is set to a vector of non-zero integer values, <code>startDynamicHelp</code> will try
those ports in order; otherwise, it tries up to 10 random ports to
find one not in use.  It can be disabled by setting the environment
variable <span class="env">R_DISABLE_HTTPD</span> to a non-empty value or <code>options("help.ports")</code>
to <code>0</code>.
</p>
<p><code>startDynamicHelp</code> is called by functions that need to use the
server, so would rarely be called directly by a user.
</p>
<p>Note that <code>options(help_type = "html")</code> must be set to actually
make use of HTML help, although it might be the default for an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
installation.
</p>
<p>If the server cannot be started or is disabled,
<code><a href="https://r-universe.dev/manuals/utils.html#help.start">help.start</a></code> will be unavailable and requests for HTML
help will give text help (with a warning).
</p>
<p>The browser in use does need to be able to connect to the loopback
interface: occasionally it is set to use a proxy for HTTP on all
interfaces, which will not work – the solution is to add an exception
for <code>127.0.0.1</code>.
</p>


<h3>Value</h3>

<p>The chosen port number is returned invisibly (which will be <code>0</code>
if the server has been stopped).
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#help.start">help.start</a></code> and <code><a href="https://r-universe.dev/manuals/utils.html#help">help</a>(help_type = "html")</code>
will attempt to start the HTTP server if required
</p>
<p><code><a href="#Rd2HTML">Rd2HTML</a></code> is used to render the package help pages.
</p>

<hr>
</div>
<div class="container manual-page" id="SweaveTeXFilter">

<a href="#SweaveTeXFilter" class="help-page-title"><h2>Strip R Code out of Sweave File</h2></a>

<h3>Description</h3>

<p>This function blanks out code chunks and Noweb markup in an Sweave
input file, for spell checking or other uses.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">SweaveTeXFilter<span class="token punctuation">(</span>ifile<span class="token punctuation">,</span> encoding <span class="token operator">=</span> <span class="token string">"unknown"</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ifile</code></td>
<td>

<p>Input file or connection.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>

<p>Text encoding to pass to <code><a href="https://r-universe.dev/manuals/base.html#readLines">readLines</a></code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function blanks out all Noweb markup and code chunks from an
Sweave input file, leaving behind the LaTeX source, so that a
LaTeX-aware spelling checker can check it and report errors in their
original locations.
</p>


<h3>Value</h3>

<p>A character vector which if written to a file, one element per line,
would duplicate the text elements of the original Sweave input file.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#aspell">aspell</a></code>, for which this is used with <code>filter = "Sweave"</code>.
</p>

<hr>
</div>
<div class="container manual-page" id="testInstalledPackage">

<a href="#testInstalledPackage" class="help-page-title"><h2>Test Installed Packages</h2></a>

<h3>Description</h3>

<p>These functions allow an installed package to be tested, or all base
and recommended packages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">testInstalledPackage<span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> outDir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span>
                     types <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"examples"</span><span class="token punctuation">,</span> <span class="token string">"tests"</span><span class="token punctuation">,</span> <span class="token string">"vignettes"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                     srcdir <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> Ropts <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>

testInstalledPackages<span class="token punctuation">(</span>outDir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span> errorsAreFatal <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
                      scope <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"both"</span><span class="token punctuation">,</span> <span class="token string">"base"</span><span class="token punctuation">,</span> <span class="token string">"recommended"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      types <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"examples"</span><span class="token punctuation">,</span> <span class="token string">"tests"</span><span class="token punctuation">,</span> <span class="token string">"vignettes"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      srcdir <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> Ropts <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>

testInstalledBasic<span class="token punctuation">(</span>scope <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"basic"</span><span class="token punctuation">,</span> <span class="token string">"devel"</span><span class="token punctuation">,</span> <span class="token string">"both"</span><span class="token punctuation">,</span> <span class="token string">"internet"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkg</code></td>
<td>
<p>name of an installed package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>library path(s) in which to look for the package.  See
<code><a href="https://r-universe.dev/manuals/base.html#library">library</a></code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outDir</code></td>
<td>
<p>the directory into which to write the output files: this
should already exist.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>types</code></td>
<td>
<p>type(s) of tests to be done.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>errorsAreFatal</code></td>
<td>
<p>logical: should testing terminate at the first
error?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>srcdir</code></td>
<td>
<p>Optional directory to look for <code>.save</code> files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ropts</code></td>
<td>
<p>Additional options such as <span class="option">-d valgrind</span> to be
passed to <code>R CMD BATCH</code> when running examples or tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments use when preparing the files to be
run, e.g. <code>commentDontrun</code> and <code>commentDonttest</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scope</code></td>
<td>
<p>Which set(s) should be tested?  Can be abbreviated.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These tests depend on having the package example files installed (which
is the default).  If package-specific tests are found in a
‘<span class="file">tests</span>’ directory they can be tested: these are not
installed by default, but will be if
<code>R CMD INSTALL --install-tests</code> was used.  Finally, the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
code in any vignettes can be extracted and tested.
</p>
<p>Package tests are run in a ‘<span class="file"><var>pkg</var>-tests</span>’ subdirectory of
‘<span class="file">outDir</span>’, and leave their output there.
</p>
<p><code>testInstalledBasic</code> runs the basic tests, if installed.  This
should be run with <code>LC_COLLATE=C</code> set: the function tries to set
this by it may not work on all OSes.  For non-English locales it may
be desirable to set environment variables <span class="env">LANGUAGE</span> to ‘<span class="samp">⁠en⁠</span>’
and <span class="env">LC_TIME</span> to ‘<span class="samp">⁠C⁠</span>’ to reduce the number of differences from
reference results.
</p>
<p>Except on Windows, if the environment variable <span class="env">TEST_MC_CORES</span> is
set to an integer greater than one, <code>testInstalledPackages</code> will
run the package tests in parallel using its value as the maximum
number of parallel processes.
</p>
<p>The package-specific tests for the base and recommended packages are
not normally installed, but <code>make install-tests</code> is provided
to do so (as well as the basic tests).
</p>


<h3>Value</h3>

<p>Invisibly <code>0L</code> for success, <code>1L</code> for failure.
</p>

<hr>
</div>
<div class="container manual-page" id="texi2dvi">

<a href="#texi2dvi" class="help-page-title"><h2>Compile LaTeX Files</h2></a>

<h3>Description</h3>

<p>Run <code>latex</code>/<code>pdflatex</code>, <code>makeindex</code> and <code>bibtex</code>
until all cross-references are resolved to create a dvi or a PDF file.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">texi2dvi<span class="token punctuation">(</span>file<span class="token punctuation">,</span> pdf <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> clean <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> quiet <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
         texi2dvi <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"texi2dvi"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         texinputs <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

texi2pdf<span class="token punctuation">(</span>file<span class="token punctuation">,</span> clean <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> quiet <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
         texi2dvi <span class="token operator">=</span> getOption<span class="token punctuation">(</span><span class="token string">"texi2dvi"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         texinputs <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>character string.  Name of the LaTeX source file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf</code></td>
<td>
<p>logical.  If <code>TRUE</code>, a PDF file is produced instead of
the default dvi file (<code>texi2dvi</code> command line option <span class="option">--pdf</span>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>logical.  If <code>TRUE</code>, all auxiliary files created
during the conversion are removed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical.  No output unless an error occurs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>texi2dvi</code></td>
<td>
<p>character string (or <code>NULL</code>).  Script or program
used to compile a TeX file to dvi or PDF. The default (selected
by <code>""</code> or <code>"texi2dvi"</code> or <code>NULL</code>) is to look
for a program or script named ‘<span class="file">texi2dvi</span>’ on the path and
otherwise emulate the script with <code>system2</code> calls (which
can be selected by the value <code>"emulation"</code>).  See also
‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>texinputs</code></td>
<td>
<p><code>NULL</code> or a character vector of paths to add to
the LaTeX and bibtex input search paths.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>logical: should indices be prepared?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>texi2pdf</code> is a wrapper for the common case of
<code>texi2dvi(pdf = TRUE)</code>.
</p>
<p>Despite the name, this is used in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> to compile LaTeX files,
specifically those generated from vignettes and by the
<code><a href="https://r-universe.dev/manuals/base.html#RdUtils">Rd2pdf</a></code> script (used for package reference manuals).  It
ensures that the ‘<span class="file"><var><a href="https://r-universe.dev/manuals/base.html#Rhome">R_HOME</a></var>/share/texmf</span>’ directory is
in the <span class="env">TEXINPUTS</span> path, so <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> style files such as ‘<span class="file">Sweave</span>’
and ‘<span class="file">Rd</span>’ will be found.  The TeX search path used is first the
existing <span class="env">TEXINPUTS</span> setting (or the current directory if unset),
then elements of argument <code>texinputs</code>, then
‘<span class="file"><var>R_HOME</var>/share/texmf</span>’ and finally the default path.
Analogous changes are made to <span class="env">BIBINPUTS</span> and <span class="env">BSTINPUTS</span>
settings.
</p>
<p>The default option for <code>texi2dvi</code> is set from environment variable
<span class="env">R_TEXI2DVICMD</span>, and the default for that is set from environment
variable <span class="env">TEXI2DVI</span> or if that is unset, from a value chosen when
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is configured.
</p>


<p>A shell script <code>texi2dvi</code> is part of GNU's <span class="pkg">texinfo</span>.
Several issues have been seen with released versions, so if yours does
not work correctly try <span class="env">R_TEXI2DVICMD=emulation</span>.
</p>
<p>Occasionally indices contain special characters which cause indexing
to fail (particularly when using the ‘<span class="samp">⁠hyperref⁠</span>’ LaTeX package)
even on valid input.  The argument <code>index = FALSE</code> is provided to
allow package manuals to be made when this happens: it uses emulation.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.  Used for the side effect of creating a dvi or
PDF file in the current working directory (and maybe other files,
especially if <code>clean = FALSE</code>).
</p>


<h3>Note</h3>






<p>There are various versions of the <code>texi2dvi</code> script on
Unix-alikes and quite a number of bugs have been seen, some of which
this <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> wrapper works around.
</p>
<p>One that was present with <code>texi2dvi</code> version <code>4.8</code> (as
supplied by macOS) is that it will not work correctly for paths which
contain spaces, nor if the absolute path to a file would contain
spaces.
</p>
<p>The three possible approaches all have their quirks.  For example the
Unix-alike <code>texi2dvi</code> script removes ancillary files that already
exist but the other two approaches do not (and may get confused by
such files).
</p>
<p>Where supported (<code>texi2dvi</code> 5.0 and later;
<code>texify.exe</code> from MiKTeX), option <span class="option">--max-iterations=20</span>
is used to avoid infinite retries.
</p>
<p>The emulation mode supports <code>quiet = TRUE</code> from <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 3.2.3 only.
Currently <code>clean = TRUE</code> only cleans up in this mode if the
conversion was successful—this gives users a chance to examine log
files in the event of error.
</p>
<p>All the approaches should respect the values of environment variables
<span class="env">LATEX</span>, <span class="env">PDFLATEX</span>, <span class="env">MAKEINDEX</span> and <span class="env">BIBTEX</span> for the
full paths to the corresponding commands.
</p>


<h3>Author(s)</h3>

<p>Originally Achim Zeileis but largely rewritten by R-core.
</p>

<hr>
</div>
<div class="container manual-page" id="toHTML">

<a href="#toHTML" class="help-page-title"><h2>Display an Object in HTML</h2></a>

<h3>Description</h3>

<p>This generic function generates a complete HTML page from an object.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">toHTML<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
<span class="token comment">## S3 method for class 'packageIQR'</span>
toHTML<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
<span class="token comment">## S3 method for class 'news_db'</span>
toHTML<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> An object to display. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> Optional parameters for methods; the <code>"packageIQR"</code> and
<code>"news_db"</code> methods pass these to <code><a href="#HTMLheader">HTMLheader</a></code>. </p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character vector to display the object <code>x</code>.  The <code>"packageIQR"</code> method
is designed to display lists in the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> help system.
</p>


<h3>See Also</h3>

<p><code><a href="#HTMLheader">HTMLheader</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">cat<span class="token punctuation">(</span>toHTML<span class="token punctuation">(</span>demo<span class="token punctuation">(</span>package <span class="token operator">=</span> <span class="token string">"base"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sep <span class="token operator">=</span> <span class="token string">"\n"</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="tools-defunct">

<a href="#tools-defunct" class="help-page-title"><h2>Defunct Objects in Package <span class="pkg">tools</span>
</h2></a>

<h3>Description</h3>

<p>The functions or variables listed here are no longer part of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> as
they are not needed (any more).
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r"><span class="token comment"># Defunct in R 2.10.0, removed in R 3.0.0</span>
Rd_parse<span class="token punctuation">(</span>file<span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>

<span class="token comment"># Defunct in R 3.1.0,  removed in R 4.1.0</span>
readNEWS<span class="token punctuation">(</span>file <span class="token operator">=</span> file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"NEWS"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> trace <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
         chop <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"first"</span><span class="token punctuation">,</span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"par1"</span><span class="token punctuation">,</span> <span class="token string">"keepAll"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
checkNEWS<span class="token punctuation">(</span>file <span class="token operator">=</span> file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"NEWS"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Defunct in R 4.1.0</span>
package.dependencies<span class="token punctuation">(</span>x<span class="token punctuation">,</span> check <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
                     depLevel <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"Depends"</span><span class="token punctuation">,</span> <span class="token string">"Imports"</span><span class="token punctuation">,</span> <span class="token string">"Suggests"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
getDepList<span class="token punctuation">(</span>depMtrx<span class="token punctuation">,</span> instPkgs<span class="token punctuation">,</span> recursive <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> local <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
           reduce <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
pkgDepends<span class="token punctuation">(</span>pkg<span class="token punctuation">,</span> recursive <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> local <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> reduce <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
           lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span>
installFoundDepends<span class="token punctuation">(</span>depPkgList<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
vignetteDepends<span class="token punctuation">(</span>vignette<span class="token punctuation">,</span> recursive <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> reduce <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
                local <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>See Also</h3>

<p><code><a href="#tools-deprecated">tools-deprecated</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#Deprecated">Deprecated</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#Defunct">Defunct</a></code>
</p>

<hr>
</div>
<div class="container manual-page" id="tools-deprecated">

<a href="#tools-deprecated" class="help-page-title"><h2>Deprecated Objects in Package <span class="pkg">tools</span>
</h2></a>

<h3>Description</h3>

<p>(Currently none)
</p>
<p>The functions or variables listed here are provided for compatibility
with older versions of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> only, and may be defunct as soon as of the
next release.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/base.html#Deprecated">Deprecated</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#Defunct">Defunct</a></code>
</p>

<hr>
</div>
<div class="container manual-page" id="tools-package">

<a href="#tools-package" class="help-page-title"><h2>Tools for Package Development</h2></a>

<h3>Description</h3>

<p>Tools for package development, administration and documentation.
</p>


<h3>Details</h3>

<p>This package contains tools for manipulating R packages and their
documentation.
</p>
<p>For a complete list of functions, use <code>library(help = "tools")</code>.
</p>


<h3>Author(s)</h3>

<p>Kurt Hornik and Friedrich Leisch
</p>
<p>Maintainer: R Core Team <a href="mailto:R-core@r-project.org">R-core@r-project.org</a>
</p>

<hr>
</div>
<div class="container manual-page" id="toRd">

<a href="#toRd" class="help-page-title"><h2>Generic Function to Convert Object to a Fragment of Rd Code</h2></a>

<h3>Description</h3>

<p>Methods for this function render their associated classes as a fragment of Rd
code, which can then be rendered into text, HTML, or LaTeX.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">toRd<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
<span class="token comment">## S3 method for class 'bibentry'</span>
toRd<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> style <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>

<p>The object to be rendered.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>

<p>The style to be used in converting a <code><a href="https://r-universe.dev/manuals/utils.html#bibentry">bibentry</a></code> object.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Additional arguments used by methods.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <code><a href="#bibstyle">bibstyle</a></code> for a discussion of styles.  The default <code>style = NULL</code> value
gives the default style.
</p>


<h3>Value</h3>

<p>Returns a character vector containing a fragment of Rd code that could
be parsed and rendered.  The default method converts <code>obj</code> to mode <code>character</code>,
then escapes any Rd markup within it.  The <code>bibentry</code> method converts an
object of that class to markup appropriate for use in a bibliography.
</p>

<hr>
</div>
<div class="container manual-page" id="toTitleCase">

<a href="#toTitleCase" class="help-page-title"><h2>Convert Titles to Title Case</h2></a>

<h3>Description</h3>

<p>Convert a character vector to title case, especially package titles.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">toTitleCase<span class="token punctuation">(</span>text<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>text</code></td>
<td>
<p>a character vector.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>This is intended for English text only.
</p>
<p>No definition of‘title case’ is universally accepted: all agree
that ‘principal’ words are capitalized and common words like
‘for’ are not, but not which words fall into each category.
</p>
<p>Generally words in all capitals are left alone: this implementation
knows about conventional mixed-case words such as ‘LaTeX’ and
‘OpenBUGS’ and a few technical terms which are not usually
capitalized such as ‘jar’ and ‘xls’.  However, unknown
technical terms will be capitalized unless they are single words
enclosed in single quotes: names of packages and libraries should be
quoted in titles.
</p>


<h3>Value</h3>

<p>A character vector of the same length as <code>text</code>, without names.
</p>

<hr>
</div>
<div class="container manual-page" id="undoc">

<a href="#undoc" class="help-page-title"><h2>Find Undocumented Objects</h2></a>

<h3>Description</h3>

<p>Finds the objects in a package which are undocumented, in the sense
that they are visible to the user (or data objects or S4 classes
provided by the package), but no documentation entry exists.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">undoc<span class="token punctuation">(</span>package<span class="token punctuation">,</span> dir<span class="token punctuation">,</span> lib.loc <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectory ‘<span class="file">man</span>’
with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> documentation sources (in Rd format), and at least one of
the ‘<span class="file">R</span>’ or ‘<span class="file">data</span>’ subdirectories with <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code or data
objects, respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.loc</code></td>
<td>
<p>a character vector of directory names of <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is useful for package maintainers mostly.  In principle,
<em>all</em> user-level <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> objects should be documented.
</p>
<p>The <span class="pkg">base</span> package is special as it contains the primitives and
these do not have definitions available at code level.  We provide
equivalent closures in environments <code>.ArgsEnv</code> and
<code>.GenericArgsEnv</code> in the <span class="pkg">base</span> package that are used
for various purposes: <code>undoc("base")</code> checks that all the
primitives that are not language constructs are prototyped in those
environments and no others are.
</p>


<h3>Value</h3>

<p>An object of class <code>"undoc"</code> which is a list of character vectors
containing the names of the undocumented objects split according to
documentation type.
</p>
<p>There is a <code>print</code> method for nicely displaying the information
contained in such objects.
</p>


<h3>See Also</h3>

<p><code><a href="#codoc">codoc</a></code>, <code><a href="#QC">QC</a></code>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">undoc<span class="token punctuation">(</span><span class="token string">"tools"</span><span class="token punctuation">)</span>                  <span class="token comment"># Undocumented objects in 'tools'</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="updatePACKAGES">

<a href="#updatePACKAGES" class="help-page-title"><h2>Update Existing PACKAGES Files</h2></a>

<h3>Description</h3>

<p>Update an existing repository by reading the <code>PACKAGES</code>
file, retaining entries which are still valid, removing entries which
are no longer valid, and only processing built package tarballs which do not
match existing entries.
</p>
<p><code>update_PACKAGES</code> can be much faster than
<code><a href="#writePACKAGES">write_PACKAGES</a></code> for small-moderate changes to large
repository indexes, particularly in non-strict mode (see Details).
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">update_PACKAGES<span class="token punctuation">(</span>dir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span> fields <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> type <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">,</span>
  <span class="token string">"mac.binary"</span><span class="token punctuation">,</span> <span class="token string">"win.binary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> verbose.level <span class="token operator">=</span> as.integer<span class="token punctuation">(</span>dryrun<span class="token punctuation">)</span><span class="token punctuation">,</span>
  latestOnly <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> addFiles <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> rds_compress <span class="token operator">=</span> <span class="token string">"xz"</span><span class="token punctuation">,</span>
  strict <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> dryrun <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose.level</code></td>
<td>
<p>(0, 1,  2) What level of informative messages
which should be displayed throughout the process. Defaults to 0 if
<code>dryrun</code>   is   <code>FALSE</code>    (the   default)   and   1
otherwise. See details for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latestOnly</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addFiles</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rds_compress</code></td>
<td>
<p>See <code><a href="#writePACKAGES">write_PACKAGES</a></code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strict</code></td>
<td>
<p>logical. Should 'strict mode' be used when checking
existing <code>PACKAGES</code> entries. See details. Defaults to
<code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dryrun</code></td>
<td>
<p>logical. Should the updates to existing <code>PACKAGES</code>
files be computed but NOT applied. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Throughout this section, <em>package tarball</em> is defined to mean any
archive file in <code>dir</code> whose name can be interpreted as
<code>&lt;package&gt;_&lt;version&gt;.&lt;ext&gt;</code> - with <code>&lt;ext&gt;</code> the appropriate
extension for built packages of type <code>type</code> - (or that is pointed
to by the <code>File</code> field of an existing <code>PACKAGES</code> entry).
<em>Novel package tarballs</em> are those which do not match an existing
<code>PACKAGES</code> file entry.
</p>
<p><code>update_PACKAGES</code> calls directly down to
<code><a href="#writePACKAGES">write_PACKAGES</a></code> with a warning (and thus all package tarballs
will be processed), if any of the following conditions hold:
</p>

<ul>
<li> <p><code>type</code> is <code>win.binary</code> and <code>strict</code> is
<code>TRUE</code> (no MD5 checksums are included in win.binary <code>PACKAGES</code> files)
</p>
</li>
<li>
<p> No <code>PACKAGES</code> file exists under <code>dir</code>
</p>
</li>
<li>
<p> A <code>PACKAGES</code> file exists under <code>dir</code> but is empty 
</p>
</li>
<li> <p><code>fields</code> is not <code>NULL</code> and one or more specified fields
are not present in the existing <code>PACKAGES</code> file
</p>
</li>
</ul>
<p><code>update_PACKAGES</code> avoids (re)processing package tarballs in cases where
a <code>PACKAGES</code> file entry already exists and appears to remain valid. The
logic for detecting still-valid entries is as follows:
</p>
<p>Any package tarball which was last modified more recently than the
existing <code>PACKAGES</code> file is considered novel; existing
<code>PACKAGES</code> entries appearing to correspond to such tarballs are
<em>always</em> considered stale and replaced by newly generated ones.
Similarly, all <code>PACKAGES</code> entries that do not correspond to any
package tarball found in <code>dir</code> are considered invalid and are
excluded from the resulting updated <code>PACKAGES</code> files.
</p>
<p>When <code>strict</code> is <code>TRUE</code>, <code>PACKAGES</code> entries that match a package
tarball (by package name and version) are confirmed via MD5 checksum;
only those that pass are retained as valid. All novel package tarballs
are fully processed by the standard machinery underlying
<code><a href="#writePACKAGES">write_PACKAGES</a></code> and the resulting entries are
added. Finally, if <code>latestOnly</code> is <code>TRUE</code>, package-version
pruning is performed across the entries.
</p>
<p>When <code>strict</code> is <code>FALSE</code>, package tarballs are assumed to encode
correct metadata in their filenames. <code>PACKAGES</code> entries which
appear to match a package tarball are retained as valid (No MD5 checksum
testing occurs). If <code>latestOnly</code> is <code>TRUE</code>, package-version
pruning is performed across the full set of retained entries and novel package
tarballs <em>before</em> the processing of the novel tarballs, at
significant computational and time savings in some
situations. After the optional pruning, any relevant novel package
tarballs are processed via the standard machinery and added to the
set of retained entries.
</p>
<p>In both cases, after the above process concludes, entries are sorted
alphabetically by the string concatenation of <code>Package</code> and
<code>Version</code>. This should match the entry order <code>write_PACKAGES</code>
outputs.
</p>
<p>The fields within the entries are ordered as follows: canonical fields -
i.e., those appearing as columns when <code>available.packages</code> is
called on a CRAN mirror - appear first in their canonical order,
followed by any non-canonical fields.
</p>
<p>After entry and field reordering, the final database of <code>PACKAGES</code>
entries is written to all three <code>PACKAGES</code> files, overwriting the
existing versions.
</p>
<p>When <code>verbose.level</code> is <code>0</code>, no extra messages are displayed
to the user. When it is <code>1</code>, detailed information about what is
happening is conveyed via messages, but underlying machinery from
<code><a href="#writePACKAGES">write_PACKAGES</a></code> is invoked with <code>verbose = FALSE</code>.
Behavior when <code>verbose.level</code> is <code>2</code> is identical to
<code>verbose.level</code> <code>1</code> with the exception that underlying
machinery from <code>write_PACKAGE</code> is invoked with
<code>verbose = TRUE</code>, which will individually list every processed
tarball.
</p>


<h3>Note</h3>

<p>While both strict and non-strict modes can offer speedups when updating
small percentages of large repositories, non-strict mode is <em>much</em>
faster and is recommended in situations where the assumption it makes
about tarballs' filenames encoding accurate information is safe.  </p>


<h3>Note</h3>

<p> Users should expect significantly smaller speedups over
<code>write_PACKAGES</code> in the <code>type == "win.binary"</code> case on at
least some operating systems. This is due to <code>write_PACKAGES</code> being
significantly faster in this context, rather than <code>update_PACKAGES</code>
being slower.
</p>


<h3>Author(s)</h3>

<p>Gabriel Becker (adapted from previous, related work by him in the <code>switchr</code>
package which is copyright Genentech, Inc.)
</p>


<h3>See Also</h3>

<p><a href="#writePACKAGES">write_PACKAGES</a>
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span>
write_PACKAGES<span class="token punctuation">(</span><span class="token string">"c:/myFolder/myRepository"</span><span class="token punctuation">)</span> <span class="token comment"># on Windows</span>
update_PACKAGES<span class="token punctuation">(</span><span class="token string">"c:/myFolder/myRepository"</span><span class="token punctuation">)</span> <span class="token comment"># on Windows</span>
write_PACKAGES<span class="token punctuation">(</span><span class="token string">"/pub/RWin/bin/windows/contrib/2.9"</span><span class="token punctuation">,</span>
type <span class="token operator">=</span> <span class="token string">"win.binary"</span><span class="token punctuation">)</span> <span class="token comment"># on Linux</span>
update_PACKAGES<span class="token punctuation">(</span><span class="token string">"/pub/RWin/bin/windows/contrib/2.9"</span><span class="token punctuation">,</span>
type <span class="token operator">=</span> <span class="token string">"win.binary"</span><span class="token punctuation">)</span> <span class="token comment"># on Linux</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="update_pkg_po">

<a href="#update_pkg_po" class="help-page-title"><h2>
Prepare Translations for a Package
</h2></a>

<h3>Description</h3>

<p>Prepare the ‘<span class="file">po</span>’ directory of a package and compile and install
the translations.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">update_pkg_po<span class="token punctuation">(</span>pkgdir<span class="token punctuation">,</span> pkg <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> version <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> mergeOpts <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span> copyright<span class="token punctuation">,</span> bugs<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pkgdir</code></td>
<td>
<p>The path to the package directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pkg</code></td>
<td>
<p>The package name: if <code>NULL</code> it is read from the package's
‘<span class="file">DESCRIPTION</span>’ file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>The package version: if <code>NULL</code> it is read from the
package's ‘<span class="file">DESCRIPTION</span>’ file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mergeOpts</code></td>
<td>
<p>a string, by default empty, of options to
<code>msgmerge</code> in addition to <code>"--update"</code>.  Since <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> 4.2.0,
<code>"--no-wrap"</code> is used when called from
<code>file.path(R.home("po"), "Makefile")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>copyright, bugs</code></td>
<td>
<p>optional character strings for the
‘<span class="samp">⁠Copyright⁠</span>’ and ‘<span class="samp">⁠Report-Msgid-Bugs-To⁠</span>’ details in the
template files.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This performs a series of steps to prepare or update messages in
the package.
</p>

<ul>
<li>
<p> If the package sources do not already have a ‘<span class="file">po</span>’
directory, one is created.
</p>
</li>
<li> <p><code><a href="#xgettext">xgettext2pot</a></code> is called to create/update a file
‘<span class="file">po/R-<var>pkgname</var>.pot</span>’ containing the translatable messages
in the package.
</p>
</li>
<li>
<p> All existing files in directory <code>po</code> with names
‘<span class="file">R-<var>lang</var>.po</span>’ are updated from ‘<span class="file">R-<var>pkgname</var>.pot</span>’,
<code><a href="#checkPoFiles">checkPoFile</a></code> is called on the updated file, and if
there are no problems the file is  compiled and installed under
‘<span class="file">inst/po</span>’.
</p>
</li>
<li>
<p> In a UTF-8 locale, a ‘translation’ ‘<span class="file">R-en@quot.po</span>’
is created with UTF-8 directional quotes, compiled and installed
under ‘<span class="file">inst/po</span>’.
</p>
</li>
<li>
<p> The remaining steps are done only if file
‘<span class="file">po/<var>pkgname</var>.pot</span>’ already exists.  The
‘<span class="file">src/*.{c,cc,cpp,m,mm}</span>’ files in the package are examined to
create a file ‘<span class="file">po/<var>pkgname</var>.pot</span>’ containing the translatable
messages in the C/C++ files.  If there is a <code>src/windows</code>
directory, files within it are also examined.
</p>
</li>
<li>
<p> All existing files in directory <code>po</code> with names
‘<span class="file"><var>lang</var>.po</span>’ are updated from ‘<span class="file"><var>pkgname</var>.pot</span>’,
<code><a href="#checkPoFiles">checkPoFile</a></code> is called on the updated file, and if
there are no problems the file is  compiled and
installed under ‘<span class="file">inst/po</span>’.
</p>
</li>
<li>
<p> In a UTF-8 locale, a ‘translation’ ‘<span class="file">en@quot.po</span>’ is
created with UTF-8 directional quotes, compiled and installed under
‘<span class="file">inst/po</span>’.
</p>
</li>
</ul>
<p>Note that C/C++ messages are not automatically prepared for
translation as they need to be explicitly marked for translation in
the source files.  Once that has been done, create an empty file
‘<span class="file">po/<var>pkgname</var>.pot</span>’ in the package sources and run this
function again.
</p>
<p><code>pkg = "base"</code> is special (and for use by <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> developers only):
the C files are not in the package directory but in the main sources.
</p>


<h3>System requirements</h3>

<p>This function requires the following tools from the GNU
<code>gettext-tools</code>: <code>xgettext</code>, <code>msgmerge</code>,
<code>msgfmt</code>, <code>msginit</code> and <code>msgconv</code>.  These are
part of most Linux distributions and easily compiled from the sources
on Unix-alikes (including macOS).  Pre-compiled versions for
Windows are available in
<a href="https://www.stats.ox.ac.uk/pub/Rtools/goodies/gettext-tools.zip" target="_blank">https://www.stats.ox.ac.uk/pub/Rtools/goodies/gettext-tools.zip</a>.
</p>
<p>It will probably not work correctly for <code>en@quot</code> translations
except in a UTF-8 locale, so these are skipped elsewhere.
</p>


<h3>See Also</h3>

<p><code><a href="#xgettext">xgettext2pot</a></code>.
</p>

<hr>
</div>
<div class="container manual-page" id="userdir">

<a href="#userdir" class="help-page-title"><h2>R User Directories</h2></a>

<h3>Description</h3>

<p>Directories for storing R-related user-specific data, configuration
and cache files.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">R_user_dir<span class="token punctuation">(</span>package<span class="token punctuation">,</span> which <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"config"</span><span class="token punctuation">,</span> <span class="token string">"cache"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>a character string giving the name of an <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>a character string indicating the kind of file(s) of
interest.  Can be abbreviated.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For desktop environments using X Windows, the freedesktop.org project
(formerly X Desktop Group, XDG) developed the XDG Base Directory
Specification
(<a href="https://specifications.freedesktop.org/basedir-spec" target="_blank">https://specifications.freedesktop.org/basedir-spec</a>) for
standardizing the location where certain files should be placed.  CRAN
package <a href="https://CRAN.R-project.org/package=rappdirs" target="_blank"><span class="pkg">rappdirs</span></a> provides these general locations with
appropriate values for all platforms for which <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> is available.
</p>
<p><code>R_user_dir</code> specializes the general mechanism to R package
specific locations for user files, by providing package specific
subdirectories inside a ‘<span class="file">R</span>’ subdirectory inside the “base”
directories appropriate for user-specific data, configuration and
cache files (see the examples), with the intent that packages will not
interfere if they work within their respective subdirectories.
</p>
<p>The locations of these base directories can be customized via the
specific environment variables
<span class="env">R_USER_DATA_DIR</span>,
<span class="env">R_USER_CONFIG_DIR</span> and
<span class="env">R_USER_CACHE_DIR</span>.
If these are not set, the general XDG-style environment variables
<span class="env">XDG_DATA_HOME</span>,
<span class="env">XDG_CONFIG_HOME</span> and
<span class="env">XDG_CACHE_HOME</span>
are used if set, and otherwise, defaults appropriate for the <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
platform in use are employed.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## IGNORE_RDIFF_BEGIN</span>
R_user_dir<span class="token punctuation">(</span><span class="token string">"FOO"</span><span class="token punctuation">,</span> <span class="token string">"cache"</span><span class="token punctuation">)</span>
<span class="token comment">## IGNORE_RDIFF_END</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="vignetteEngine">

<a href="#vignetteEngine" class="help-page-title"><h2>Set or Get a Vignette Processing Engine</h2></a>

<h3>Description</h3>

<p>Vignettes are normally processed by <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code>, but package
writers may choose to use a different engine (e.g., one provided by the
<a href="https://CRAN.R-project.org/package=knitr" target="_blank"><span class="pkg">knitr</span></a>, <a href="https://CRAN.R-project.org/package=noweb" target="_blank"><span class="pkg">noweb</span></a> or <a href="https://CRAN.R-project.org/package=R.rsp" target="_blank"><span class="pkg">R.rsp</span></a> packages).  This function
is used by those packages to register their engines, and internally by
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> to retrieve them.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">vignetteEngine<span class="token punctuation">(</span>name<span class="token punctuation">,</span> weave<span class="token punctuation">,</span> tangle<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
	       package <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span> aspell <span class="token operator">=</span> list<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>the name of the engine.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weave</code></td>
<td>
<p>a function to convert vignette source files to PDF/HTML or
intermediate LaTeX output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tangle</code></td>
<td>
<p>a function to convert vignette source files to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>a regular expression pattern for the filenames handled
by this engine, or <code>NULL</code> for the default pattern.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>the package registering the engine.  By default, this
is the package calling <code>vignetteEngine</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aspell</code></td>
<td>
<p>a list with element names <code>filter</code> and/or
<code>control</code> giving the respective arguments to be used when spell
checking the text in the vignette source file with
<code><a href="https://r-universe.dev/manuals/utils.html#aspell">aspell</a></code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>weave</code> is missing, <code>vignetteEngine</code> will return the currently
registered engine matching <code>name</code> and <code>package</code>.
</p>
<p>If <code>weave</code> is <code>NULL</code>, the specified engine will be deleted.
</p>
<p>Other settings define a new engine. The <code>weave</code> and <code>tangle</code>
functions must be defined with argument lists compatible with
<code>function(file, ...)</code>. Currently the <code>...</code> arguments may
include logical argument <code>quiet</code> and character argument
<code>encoding</code>; others may be added in future. These are described in
the documentation for <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> and <code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Stangle</a></code>.
</p>
<p>The <code>weave</code> and <code>tangle</code> functions should return the
filename of the output file that has been produced. Currently the
<code>weave</code> function, when operating on a file named
‘<span class="file">&lt;name&gt;&lt;pattern&gt;</span>’ must produce a file named
‘<span class="file">&lt;name&gt;[.](tex|pdf|html)</span>’. 
The ‘<span class="file">.tex</span>’ files will be processed by <code>pdflatex</code> to
produce ‘<span class="file">.pdf</span>’ output for display to the user; the others will be
displayed as produced.  The <code>tangle</code> function must produce a file
named ‘<span class="file">&lt;name&gt;[.][rRsS]</span>’ containing the executable <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> code from
the vignette.  The <code>tangle</code> function may support a
<code>split = TRUE</code> argument, and then it should produce files named
‘<span class="file">&lt;name&gt;.*[.][rRsS]</span>’.
</p>
<p>The <code>pattern</code> argument gives a regular expression to match the
extensions of files which are to be processed as vignette input files.
If set to <code>NULL</code>, the default pattern <code>"[.][RrSs](nw|tex)$"</code>
is used.
</p>


<h3>Value</h3>

<p>If the engine is being deleted, <code>NULL</code>.  Otherwise a list
containing components
</p>
<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the engine</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>package</code></td>
<td>
<p>The name of its package</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>The pattern for vignette input files</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weave</code></td>
<td>
<p>The weave function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tangle</code></td>
<td>
<p>The tangle function</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Duncan Murdoch and Henrik Bengtsson.
</p>


<h3>See Also</h3>

<p><code><a href="https://r-universe.dev/manuals/utils.html#Sweave">Sweave</a></code> and the ‘Writing R Extensions’ manual.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">str<span class="token punctuation">(</span>vignetteEngine<span class="token punctuation">(</span><span class="token string">"Sweave"</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="vignetteInfo">

<a href="#vignetteInfo" class="help-page-title"><h2>Basic Information about a Vignette</h2></a>

<h3>Description</h3>

<p>Extract metadata from a vignette source file.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">vignetteInfo<span class="token punctuation">(</span>file<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>file name of the vignette.</p>
</td>
</tr></table>
<h3>Value</h3>

<p>A <code><a href="https://r-universe.dev/manuals/base.html#list">list</a></code> with the following
<code><a href="https://r-universe.dev/manuals/base.html#character">character</a></code> components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>the <code><a href="https://r-universe.dev/manuals/base.html#basename">basename</a></code> of the file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>the vignette title from
‘<span class="samp">⁠\VignetteIndexEntry⁠</span>’, possibly an empty string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depends</code></td>
<td>
<p>a vector of package dependencies from
‘<span class="samp">⁠\VignetteDepends⁠</span>’, possibly of length 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keywords</code></td>
<td>
<p>a vector of keywords from
‘<span class="samp">⁠\VignetteKeyword⁠</span>’, possibly of length 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>engine</code></td>
<td>
<p>the <code><a href="#vignetteEngine">vignetteEngine</a></code>, such as
<code>"utils::Sweave"</code> or <code>"knitr::knitr"</code>.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code><a href="#package_dependencies">package_dependencies</a></code> for recursive dependencies.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r">gridEx <span class="token operator">&lt;-</span> system.file<span class="token punctuation">(</span><span class="token string">"doc"</span><span class="token punctuation">,</span> <span class="token string">"grid.Rnw"</span><span class="token punctuation">,</span> package <span class="token operator">=</span> <span class="token string">"grid"</span><span class="token punctuation">)</span>
  vi <span class="token operator">&lt;-</span> vignetteInfo<span class="token punctuation">(</span>gridEx<span class="token punctuation">)</span>
  str<span class="token punctuation">(</span>vi<span class="token punctuation">)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="writePACKAGES">

<a href="#writePACKAGES" class="help-page-title"><h2>Generate PACKAGES Files</h2></a>

<h3>Description</h3>

<p>Generate ‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’
files for a repository of source or Mac/Windows binary packages.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">write_PACKAGES<span class="token punctuation">(</span>dir <span class="token operator">=</span> <span class="token string">"."</span><span class="token punctuation">,</span> fields <span class="token operator">=</span> <span class="token keyword">NULL</span><span class="token punctuation">,</span>
               type <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">,</span> <span class="token string">"mac.binary"</span><span class="token punctuation">,</span> <span class="token string">"win.binary"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> unpacked <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> subdirs <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span>
               latestOnly <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> addFiles <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> rds_compress <span class="token operator">=</span> <span class="token string">"xz"</span><span class="token punctuation">,</span>
               validate <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>Character vector describing the location of the repository
(directory including source or binary packages) to generate the
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files
from and write them to.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>

<p>a character vector giving the fields to be used in the
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files in
addition to the default ones, or <code>NULL</code> (default).
</p>
<p>The default corresponds to
the fields needed by <code><a href="https://r-universe.dev/manuals/utils.html#available.packages">available.packages</a></code>:
<code>"Package"</code>, <code>"Version"</code>, <code>"Priority"</code>,
<code>"Depends"</code>, <code>"Imports"</code>, <code>"LinkingTo"</code>,
<code>"Suggests"</code>, <code>"Enhances"</code>, <code>"OS_type"</code>,
<code>"License"</code> and <code>"Archs"</code>, and those fields will always
be included, plus
the file name in field <code>"File"</code> if <code>addFile = TRUE</code>
and the path to the subdirectory in field <code>"Path"</code> if subdirectories
are used.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>Type of packages: currently source ‘<span class="file">.tar.{gz,bz2,xz}</span>’ archives,
and macOS or Windows binary (‘<span class="file">.tgz</span>’ or ‘<span class="file">.zip</span>’,
respectively) packages are supported.  Defaults to
<code>"win.binary"</code> on Windows and to <code>"source"</code> otherwise.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical.  Should packages be listed as they are
processed?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unpacked</code></td>
<td>
<p>a logical indicating whether the package contents are
available in unpacked form or not (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdirs</code></td>
<td>
<p>either logical (to indicate if subdirectories should be
included, recursively) or a character vector of names of subdirectories
to include (which are not recursed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latestOnly</code></td>
<td>
<p>logical: if multiple versions of a package are
available should only the latest version be included?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addFiles</code></td>
<td>
<p>logical: should the filenames be included as field
‘<span class="samp">⁠File⁠</span>’ in the ‘<span class="file">PACKAGES</span>’ file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rds_compress</code></td>
<td>
<p>The type of compression to be used for
‘<span class="file">PACKAGES.rds</span>’: see <code><a href="https://r-universe.dev/manuals/base.html#readRDS">saveRDS</a></code>.  The default is the
one found to give maximal compression, and is as used on <abbr><span class="acronym">CRAN</span></abbr>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validate</code></td>
<td>
<p>a logical indicating whether ‘<span class="file">DESCRIPTION</span>’ files
should be validated, and the corresponding packages skipped in case
this finds problems.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>write_PACKAGES</code> scans the named directory for R packages,
extracts information from each package's ‘<span class="file">DESCRIPTION</span>’ file, and
writes this information into the ‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’
and ‘<span class="file">PACKAGES.rds</span>’ files, where the first two represent the
information in DCF format, and the third serializes it via
<code><a href="https://r-universe.dev/manuals/base.html#readRDS">saveRDS</a></code>.
</p>
<p>Including non-latest versions of packages is only useful if they have
less constraining version requirements, so for example
<code>latestOnly = FALSE</code> could be used for a source repository when
‘<span class="samp">⁠foo_1.0⁠</span>’ depends on ‘<span class="samp">⁠R &gt;= 2.15.0⁠</span>’ but ‘<span class="samp">⁠foo_0.9⁠</span>’ is
available which depends on ‘<span class="samp">⁠R &gt;= 2.11.0⁠</span>’.
</p>
<p>Support for repositories with subdirectories and hence for
<code>subdirs != FALSE</code> depends on recording a <code>"Path"</code> field in
the ‘<span class="file">PACKAGES</span>’ files.
</p>
<p>Support for more general file names (e.g., other types of compression)
<em>via</em> a <code>"File"</code> field in the ‘<span class="file">PACKAGES</span>’ files can be
used by <code><a href="https://r-universe.dev/manuals/utils.html#download.packages">download.packages</a></code>.  If the file names are not of
the standard form, use <code>addFiles = TRUE</code>.
</p>
<p><code>type = "win.binary"</code> uses <code><a href="https://r-universe.dev/manuals/base.html#connections">unz</a></code> connections to read
all ‘<span class="file">DESCRIPTION</span>’ files contained in the (zipped) binary packages
for Windows in the given directory <code>dir</code>, and builds files
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files from
this information.
</p>
<p>For a remote repository there is a tradeoff between download speed and
time spent by <code><a href="https://r-universe.dev/manuals/utils.html#available.packages">available.packages</a></code> processing the
downloaded file(s).  For large repositories it is likely to be
beneficial to use <code>rds_compress = "xz"</code>.
</p>


<h3>Value</h3>

<p>Invisibly returns the number of packages described in the resulting
‘<span class="file">PACKAGES</span>’, ‘<span class="file">PACKAGES.gz</span>’ and ‘<span class="file">PACKAGES.rds</span>’ files.  If
<code>0</code>, no packages were found and no files were written.
</p>


<h3>Note</h3>

<p>Processing ‘<span class="file">.tar.gz</span>’ archives to extract the ‘<span class="file">DESCRIPTION</span>’
files is quite slow.
</p>
<p>This function can be useful on other OSes to prepare a repository to
be accessed by Windows machines, so <code>type = "win.binary"</code> should
work on all OSes.
</p>


<h3>Author(s)</h3>

<p>Uwe Ligges and R-core.
</p>


<h3>See Also</h3>

<p>See <code><a href="https://r-universe.dev/manuals/base.html#dcf">read.dcf</a></code> and <code><a href="https://r-universe.dev/manuals/base.html#dcf">write.dcf</a></code> for reading
‘<span class="file">DESCRIPTION</span>’ files and writing the ‘<span class="file">PACKAGES</span>’ and
‘<span class="file">PACKAGES.gz</span>’ files. See <code><a href="#updatePACKAGES">update_PACKAGES</a></code> for
efficiently updating existing ‘<span class="file">PACKAGES</span>’ and ‘<span class="file">PACKAGES.gz</span>’
files.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: </span>
write_PACKAGES<span class="token punctuation">(</span><span class="token string">"c:/myFolder/myRepository"</span><span class="token punctuation">)</span>  <span class="token comment"># on Windows</span>
write_PACKAGES<span class="token punctuation">(</span><span class="token string">"/pub/RWin/bin/windows/contrib/2.9"</span><span class="token punctuation">,</span>
               type <span class="token operator">=</span> <span class="token string">"win.binary"</span><span class="token punctuation">)</span>  <span class="token comment"># on Linux</span>

<span class="token comment">## End(Not run)</span></code></pre>

<hr>
</div>
<div class="container manual-page" id="xgettext">

<a href="#xgettext" class="help-page-title"><h2>Extract Translatable Messages from R Files in a Package</h2></a>

<h3>Description</h3>

<p>For each file in the ‘<span class="file">R</span>’ directory (including system-specific
subdirectories) of a <em>source</em> package, extract the unique arguments passed
to these “message generating” calls;
</p>

<dl>
<dt>for <code>xgettext()</code>:</dt>
<dd>
<p>to <code><a href="https://r-universe.dev/manuals/base.html#stop">stop</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#warning">warning</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#message">message</a></code>,
<code><a href="https://r-universe.dev/manuals/base.html#message">packageStartupMessage</a></code>, <code><a href="https://r-universe.dev/manuals/base.html#gettext">gettext</a></code> and
<code><a href="https://r-universe.dev/manuals/base.html#sprintf">gettextf</a></code>,</p>
</dd>
<dt>for <code>xngettext()</code>:</dt>
<dd>
<p>to <code><a href="https://r-universe.dev/manuals/base.html#gettext">ngettext</a></code>.</p>
</dd>
</dl>
<p><code>xgettext2pot()</code> calls both <code>xgettext()</code> and then <code>xngettext()</code>.
</p>


<h3>Usage</h3>

<pre class="language-r"><code class="language-r">xgettext<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">,</span> asCall <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>

xngettext<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>

xgettext2pot<span class="token punctuation">(</span>dir<span class="token punctuation">,</span> potFile<span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">"R"</span><span class="token punctuation">,</span> version<span class="token punctuation">,</span> bugs<span class="token punctuation">)</span></code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>the directory of a source package, i.e., with a ‘<span class="file">./R</span>’ sub
directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical: should each file be listed as it is processed?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asCall</code></td>
<td>
<p>logical: if <code>TRUE</code> each argument is converted to
string and returned whole, otherwise the string literals within each
argument are extracted (recursively). See Examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>potFile</code></td>
<td>
<p>name of <code>po</code> template file to be produced.
Defaults to ‘<span class="file">R-<var>pkgname</var>.pot</span>’ where
<var>pkgname</var> is the basename of ‘<span class="file">dir</span>’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name, version, bugs</code></td>
<td>
<p>as recorded in the template file:
<code>version</code> defaults the version number of the currently running
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>, and <code>bugs</code> to <code>"bugs.r-project.org"</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Leading and trailing white space (space, tab and linefeed
(aka newline, i.e., <code>\n</code>)) is removed
for all the calls extracted by <code>xgettext()</code>, see
‘Description’ above,
as it is by the internal code that passes strings for translation.
</p>
<p>We look to see if the matched functions were called with
<code>domain = NA</code>.  If so, when <code>asCall</code> is true, the whole call
is omitted.  Note that a call might contain a nested call
to <code>gettext</code> (or <code>warning</code>, etc.) whose strings would be visible
if <code>asCall</code> is false.
</p>
<p><code>xgettext2pot</code> calls <code>xgettext</code> and then <code>xngettext</code>,
and writes a PO template file (to <code>potFile</code>) for use with the <span class="pkg">GNU Gettext</span>
tools.  This ensures that the strings for simple translation are
unique in the file (as <span class="pkg">GNU Gettext</span> requires), but does not do so
for <code>ngettext</code> calls (and the rules are not stated in the Gettext
manual, but <code>msgfmt</code> complains if there is duplication between
the sets.).
</p>
<p>If applied to the <span class="pkg">base</span> package, this also looks in the ‘<span class="file">.R</span>’
files in ‘<span class="file"><var><a href="https://r-universe.dev/manuals/base.html#Rhome">R_HOME</a></var>/share/R</span>’.
</p>


<h3>Value</h3>

<p>For <code>xgettext</code>, a list of objects of class <code>"xgettext"</code>
(which has a <code>print</code> method), one per source file that
contains potentially translatable strings.
</p>
<p>For <code>xngettext</code>, a list of objects of class <code>"xngettext"</code>,
which are themselves lists of length-2 character vectors.
</p>


<h3>See Also</h3>

<p><code><a href="#update_pkg_po">update_pkg_po</a>()</code> which calls <code>xgettext2pot()</code>.
</p>


<h3>Examples</h3>

<pre class="language-r"><code class="language-r"><span class="token comment">## Not run: ## in a source-directory build (not typical!) of R;</span><span class="token comment">## otherwise, download and unpack the R sources, and replace</span><span class="token comment">## R.home()  by  "&lt;my_path_to_source_R&gt;" :</span>
xgettext<span class="token punctuation">(</span>file.path<span class="token punctuation">(</span>R.home<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">,</span> <span class="token string">"library"</span><span class="token punctuation">,</span> <span class="token string">"splines"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## End(Not run)</span>

<span class="token comment">## Create source package-like  &lt;tmp&gt;/R/foo.R  and get text from it:</span>
tmpPkg <span class="token operator">&lt;-</span> tempdir<span class="token punctuation">(</span><span class="token punctuation">)</span>
tmpRDir <span class="token operator">&lt;-</span> file.path<span class="token punctuation">(</span>tmpPkg<span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">)</span>
dir.create<span class="token punctuation">(</span>tmpRDir<span class="token punctuation">,</span> showWarnings <span class="token operator">=</span> <span class="token boolean">FALSE</span><span class="token punctuation">)</span>
fnChar <span class="token operator">&lt;-</span> paste<span class="token punctuation">(</span>sep <span class="token operator">=</span> <span class="token string">"\n"</span><span class="token punctuation">,</span>
  <span class="token string">"foo &lt;- function(x) {"</span><span class="token punctuation">,</span>
  <span class="token string">"  if (x &lt; -1)  stop('too small')"</span><span class="token punctuation">,</span>
  <span class="token string">"  # messages unduplicated (not so for ngettext)"</span><span class="token punctuation">,</span>
  <span class="token string">"  if (x &lt; -.5) stop('too small')"</span><span class="token punctuation">,</span>
  <span class="token string">"  if (x &lt; 0) {"</span><span class="token punctuation">,</span>
  <span class="token string">"    warning("</span><span class="token punctuation">,</span>
  <span class="token string">"      'sqrt(x) is', sqrt(as.complex(x)),"</span><span class="token punctuation">,</span>
  <span class="token string">"      ', which may be too small'"</span><span class="token punctuation">,</span>
  <span class="token string">"    )"</span><span class="token punctuation">,</span>
  <span class="token string">"  }"</span><span class="token punctuation">,</span>
  <span class="token string">"  # calls with domain=NA are skipped"</span><span class="token punctuation">,</span>
  <span class="token string">"  if (x == 0) cat(gettext('x is 0!\n', domain=NA))"</span><span class="token punctuation">,</span>
  <span class="token string">"  # gettext strings may be ignored due to 'outer' domain=NA"</span><span class="token punctuation">,</span>
  <span class="token string">"  if (x &gt; 10) stop('x is ', gettextf('%.2f', x), domain=NA)"</span><span class="token punctuation">,</span>
  <span class="token string">"  x"</span><span class="token punctuation">,</span>
  <span class="token string">"}"</span><span class="token punctuation">)</span>

writeLines<span class="token punctuation">(</span>fnChar<span class="token punctuation">,</span> con <span class="token operator">=</span> file.path<span class="token punctuation">(</span>tmpRDir<span class="token punctuation">,</span> <span class="token string">"foo.R"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## [[1]] : suppressing (tmpfile) name to make example Rdiff-able</span>
xgettext<span class="token punctuation">(</span>tmpPkg<span class="token punctuation">,</span> asCall<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># default; shows  ' sqrt(as.complex(x)) '</span>
xgettext<span class="token punctuation">(</span>tmpPkg<span class="token punctuation">,</span> asCall<span class="token operator">=</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># doesn't ; but then ' %.2f '</span>

unlink<span class="token punctuation">(</span>tmpRDir<span class="token punctuation">,</span> recursive<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span></code></pre>

<hr>
</div>
</div>
    <footer><p>Rendered with postdoc 1.0.0</p></footer>
  </body>
</html>
